(function(){function L(P,Q,E){function D(t,w){if(!Q[t]){if(!P[t]){var F="function"==typeof require&&require;if(!w&&F)return F(t,!0);if(J)return J(t,!0);w=Error("Cannot find module '"+t+"'");throw w.code="MODULE_NOT_FOUND",w;}w=Q[t]={exports:{}};P[t][0].call(w.exports,function(v){return D(P[t][1][v]||v)},w,w.exports,L,P,Q,E)}return Q[t].exports}for(var J="function"==typeof require&&require,y=0;y<E.length;y++)D(E[y]);return D}return L})()({1:[function(L,P,Q){(function(){function E(D,J,y){function t(v,
B){if(!J[v]){if(!D[v]){const H="function"===typeof L&&L;if(!B&&H)return H(v,!0);if(w)return w(v,!0);B=Error(`Cannot find module '${v}'`);throw B.code="MODULE_NOT_FOUND",B;}B=J[v]={exports:{}};D[v][0].call(B.exports,H=>t(D[v][1][H]||H),B,B.exports,E,D,J,y)}return J[v].exports}for(var w="function"===typeof L&&L,F=0;F<y.length;F++)t(y[F]);return t}return E})()({1:[function(E,D,J){function y(a=window?.event){ta();/BowGun/.test(n.value)?t(a):w(a)}function t(a){document.querySelector("output.elementalAug").value=
0;document.getElementById("elementalResult").value="+0";document.querySelector("output.sharpnessAug").value=0;document.getElementById("sharpnessResult").value="+0";const b=[],c=[];let d={};var f=!0;const h=z();["Shot","Sever","Blunt","IgnoreHZV"].forEach(g=>{h[g]=H(h,g)});const p=ma();for(let g=0;g<Object.keys(p).length;g++){let m={...h[Object.values(p)[g].type],...Object.values(p)[g]};m=v(m);m=ua(m);m=va(m);/Demon|Armor|Wyvern Blast|Glide|Wyvernsn|Guard/.test(m.attackName)?d.ticsAdjust=1:d=Ja(m);
var l=~~((~~m.efr+~~m.efe)*d.ticsAdjust);const k=~~(~~m.rawCrit+~~m.eleCrit),x=~~(~~m.rawNon+~~m.eleNon),r=A(~~(.99+document.getElementById("health").value/l));let C=/Stic|Slic/.test(m.attackName)?5+~~(.98+60/d.shotsPerMin)*~~(.99+document.getElementById("health").value/l):~~(.98+60/d.shotsPerMin)*~~(.99+document.getElementById("health").value/l);C=A(C);l=[m.attackName,[`${~~m.rawNon} / ${~~m.rawCrit}`],[`${~~m.eleNon} / ${~~m.eleCrit}`],[`${~~x} / ${~~k}`],l,"NaN%"===d.shotsPerGain||"0.00%"===d.shotsPerGain?
"No Gain":d.shotsPerGain,/(\d{2},\d{3})/.test(r)?"N / A":r,/(\d{2},\d{3})/.test(C)?"N / A":C];b.push(l);l=[m.attackName,m.rawMV.toFixed(1),void 0===d.reloadSpeed?" N / A ":d.reloadSpeed,void 0===d.recoilSpeed?" N / A ":d.recoilSpeed,isNaN(d.clipSize)?"N / A":d.clipSize,m.ticsPer,void 0===d.shotsPerMinBase?" N / A ":d.shotsPerMinBase,void 0===d.shotsPerMin?" N / A ":d.shotsPerMin];c.push(l);f&&(f=[["Stat","Raw","Ele Pierce"],["Base",~~m.baseRaw,~~(22*(1+m.raw/100))],["True",~~m.raw,~~((22*m.BEM+m.BE)*
(1+m.raw/100))],["eTrue",~~(m.raw*U(m.aff,m.Crit).PRM*m.PRM*m.augPRM),~~((22*m.BEM+m.BE)*(1+m.raw/100)*m.PEM*m.augPEM*V(m.aff,m.Crit).PEM)],["EFR/EFE",~~(m.raw*U(m.aff,m.Crit).EFR*m.PRM*m.augPRM),~~((22*m.BEM+m.BE)*(1+m.raw/100)*m.PEM*m.augPEM*V(m.aff,m.Crit).EFE)],["Critical"].concat(Number(U(m.aff).EFR).toFixed(3),Number(V(m.aff).EFE).toFixed(2)),["Affinity",~~(100*m.aff)]],wa(f),f=!1)}b.splice(0,0,["Ammo Type","Raw","Element",["Total","Combined Damage For a Single Tick"],["Effective","Sums Every Tick Using EFE/EFR"],
["RPM Gain","The Percentage Increase Of Damage From Both \nAmmo Up And Spare Shot In 60 seconds."],["Shots To Kill","Use the Pierce Damage Adjust For Accurate Results"],["Time To Kill","Can Have Variance Due To FPS,\nBut The Percent Gain Or Loss VS\nOther Ammo Types Should Stay Constant"]]);ea(b,"dps",a);c.splice(0,0,["Ammo Type","Raw MV","Reload","Recoil","Clip Size",["Procs Per","Maximum Ticks Per Shot Using Optimal FPS, \nAs Well As The Monsters Smallest Large Gold Crown Size"],["RPM Base","Shots Per Minuite Including Recoil Down And Reload Speed"],
["Current RPM","Shots Per Minuite With AmmoUp And Spare Shot"]]);ea(c,"ammo",a)}function w(a){const b=performance.now(),c=["Combo;Attack Name;MV;Raw;Element;Total;Effective".split(";")];let d=[0,0,0,0,0,0,0,0],f=-1,h={};document.getElementById("Sharpness");const p=z();["Shot","Sever","Blunt","IgnoreHZV"].forEach(l=>{p[l]=H(p,l)});Object.values(ma()).forEach(l=>{++f;let g={...l,...p[l.type]};g=v(g);/input/.test(a?.target?.className)&&"Combo Damage"===g.attackName&&(R(),N());"Combo Damage"===g.attackName&&
(h="Bow"===n.value?xa()[1]:Ka(g.aff));g=ua(g);g=va(g);M.includes(f.toString())&&Object.entries(h).filter(k=>0<k[1].length).forEach(k=>{if(S(f,k[1])){var {PRM:x,PEM:r}=!1===g.noSharpMod?e.skills.Sharpness[La(k[0])]:{PRM:1,PEM:1};k=S(f,k[1]);d=[d[0]+=Number(~~(g.rawMV*k)),d[1]+=Number(~~(g.rawNon*x)*k),d[2]+=Number(~~(g.rawCrit*x)*k),d[3]+=Number(~~(g.eleNon*r)*k),d[4]+=Number(~~(g.eleCrit*r)*k),d[5]+=Number(~~(g.rawNon*x)*k+~~(g.eleNon*r)*k),d[6]+=Number(~~(g.rawCrit*x)*k+~~(g.eleCrit*r)*k),d[7]+=
Number(~~(g.efr*x)*k+~~(g.efe*r)*k)]}});l=e.skills.Sharpness[document.getElementById("Sharpness").selectedOptions[0].textContent.trim()];if("Bow"===n.value&&"Shot"!==g.type)switch(document.getElementById("BowCoating").selectedOptions[0].textContent){case "Power":l="1.35";break;case "Close Range":l="1.32";break;case "Close Range+":l="1.39"}var m=["replaceME",g.attackName,g.rawMV.toFixed(1),`${A(~~(g.rawNon*l.PRM))} / ${A(~~(g.rawCrit*l.PRM))}`,`${A(~~(g.eleNon*l.PEM))} / ${A(~~(g.eleCrit*l.PEM))}`,
`${A(~~(g.rawNon*l.PRM)+~~(g.eleNon*l.PEM))} / ${A(~~(g.rawCrit*l.PRM)+~~(g.eleCrit*l.PEM))}`,A((~~(g.efe*l.PEM)+~~(g.efr*l.PRM))*(g.ticsPer+1))];c.push(m);m="none"===O(g.eleType)?0:g.ele;l=[[["Stat"],["Raw"],[g.eleType]],["Base",~~g.baseRaw,g.baseEle],["True",~~g.raw,~~m],["eTrue",~~(g.raw*U(g.aff,g.Crit).PRM*g.PRM*g.augPRM*l.PRM),~~(m*V(g.aff,g.Crit).PEM*g.PEM*g.augPEM*l.PEM)],["EFR/EFE",~~(g.raw*U(g.aff,g.Crit).EFR*g.PRM*g.augEFR*l.PRM),~~(m*V(g.aff,g.Crit).EFE*g.PEM*g.augPEM*g.augEFR*l.PEM)],
["Critical"].concat(Number(U(g.aff).EFR).toFixed(3),Number(V(g.aff).EFE).toFixed(2)),["Sharp."].concat(Object.values(Object.values(e.skills.Sharpness)[7-document.getElementById("Sharpness").selectedIndex])),["Affinity",~~(100*g.aff)]];wa(l)});"Gunlance"===n.value?(ya(c,d,a),console.log((performance.now()-b)/1E3),ya(532)):(c.splice(1,1,["replaceME","Combo Damage",`${A(d[0])}`,`${A(d[1])} / ${A(d[2])}`,`${A(d[3])} / ${A(d[4])}`,`${A(d[5])} / ${A(d[6])}`,`${A(d[7])}`]),ea(c,"dps",a),console.log((performance.now()-
b)/1E3))}function F(a={...e[n.value].weapons[K.value]}){for(let c=0;6>c;c++){var b=document.querySelectorAll("#weaponRampage>select")[c];if("none"===b.style.display)break;b=e.rampage["Rampage-Up Skill"][b.value];if(void 0!==b)for(const d of Object.keys(b))a[d]+=b[d]}/BowGun/.test(n.value)||(a.eleType=/Fire|Water|Thunder|Ice|Dragon|Blase|Sleep|Poison|Para/.test(document.getElementById("weaponRampage").children[1].value)?document.getElementById("weaponRampage").children[1].value.match(/Fire|Water|Thunder|Ice|Dragon|Blase|Sleep|Poison|Para/)[0]:
a.eleType);return{...a}}function v(a){a.getSkills=[];"FireWaterIceThunderDragon".includes(a.eleType)&&document.querySelectorAll(`.${O(a.eleType)}`).forEach(b=>{0<b.selectedIndex&&a.getSkills.push(e.skills[b.id][b.selectedIndex])});return n.value.includes("Bow")?Ma(a):Na(a)}function B(){return"Enraged"===document.getElementById("dropEnraged").value?e.monster[G.value]?.anger_data:1}function H(a,b){null===M[0]&&(M=[]);a.baseRaw+=!0===a.Draw?Number(document.getElementById("PunishingDraw").value):0;a.BR=
0;a.BRM=1;a.PRM=1;a.BEM=1;a.BE=0;a.PEM=1;const c={};let d=[];a.getSkills=[];Object.values(e.types[b]).forEach(f=>{document.getElementById([f])?.style.display.includes("none")||!document.getElementById([f]).selectedIndex||c[f]||a.getSkills.push(e.skills[f][document.getElementById([f]).selectedIndex]);c[f]=1});a.PRM*=document.getElementById("DemonAmmo").checked&&/(Sever|Blunt)/.test(a.type)?1.1:1;document.querySelectorAll("input.skillButton").forEach(f=>{f.checked&&e.skills[f.id]&&!c[f.id]?(a.getSkills.push(e.skills[f.id]),
c[f.id]=1):e.skills[f.id]||console.log(f.id)});document.getElementById("enrageDisplay").textContent=`${~~(100*B())}%`;"Enraged"===document.getElementById("dropEnraged").value&&(d.push("Agitator"),a.PEM*=B(),a.PRM*=B());"DualBlades"===n.value&&(a.BEM*=e.skills.ArchdemonMode[document.getElementById("ArchdemonMode").selectedIndex].BEM,a.BEM*=/\[Feral Demon Mode\]/.test(a.attackName)?1:e.skills.DemonMode[document.getElementById("DemonMode").selectedIndex].BEM,a.BRM*=/\[Demon Mode\]/.test(a.attackName)?
1:e.skills.FeralDemonMode[document.getElementById("FeralDemonMode").selectedIndex].BRM,a.aff+="Hellion Mode"===document.getElementById("weaponRampage0").value?20:0);"Bow"===n.value&&(d=d.concat("UpperCrit","HerculesDraw"));d.forEach(f=>{!c[f]&&document.getElementById([f]).selectedIndex&&(c[f]=1,a.getSkills.push(e.skills[f][document.getElementById([f]).selectedIndex]))});na(a);"Kushala Daora Soul"===document.getElementById("weaponRampage0").value&&(a.aff+=15);a.aff+=Oa(oa(b));a.aff=Math.min(a.aff,
100)/100;return{...a}}function R(){if(document.getElementsByClassName("inputs")?.length&&!Number.isNaN(Number(window?.event?.target.id))&&"0"!==window?.event?.target.id){let a=document.querySelectorAll(".inputs")[window?.event?.target.id].value-S(window?.event?.target.id);for(;0<a;)M.push(window.event.target.id),--a;for(;0>a;)M.splice(M.lastIndexOf(window?.event?.target.id),1),++a}}function N(){document.querySelectorAll("li.comboHits").forEach(b=>b.remove());let a;M.forEach(b=>{a=document.createElement("li");
a.className=`${b} comboHits`;a.setAttribute("draggable","true");a.textContent=document.querySelector(`td#b${[b]}>output`).textContent;document.getElementById("comboCountDisplay").append(a)})}function X(a,b={...Pa()}){var c=[];c=e.skills.RazorSharp[document.getElementById("RazorSharp").selectedIndex].Sharp;const d=e.skills.MastersTouch[document.getElementById("MastersTouch").selectedIndex].Sharp*a,f=0<a&&0<document.getElementById("MastersTouch").selectedIndex?1/(1-d)*(1/(1-c)):1/(1-c);return c=Object.entries(b).map(h=>
~~(Number(h[1])*Number(f)))}function Qa(){let [...a]=M;if(void 0!==M[0]&&null!==M[0]){let b=document.getElementsByClassName("inputComboRepeat")[0].value;for(;1<b;)a=a.concat(M),--b;return a}}function Ka(a=0){const [b,c,d]=xa(a);document.getElementById("Sharpness").selectedIndex=6-b.lastIndexOf(0);b.forEach((f,h)=>{document.querySelector("#sharpnessContainer").children[6-h].style.width=`${f/d*90}%`;document.querySelector("#sharpnessContainer").children[6-h].textContent=.1>f?"":~~f});return c}function xa(a=
0,b=Qa()){const c={purple:[],white:[],blue:[],green:[],yellow:[],orange:[],red:[]};a="Bow"!==n.value?X(a).reverse():[0,0,0,1,0,0,0,0];const d=Object.values(a).reduce((h,p)=>h+p);if(b){const h=Object.keys(ma());let p=0;const l=Object.keys(c),g=za();a:for(const m of b){var f=h[m];b=g[f].ticsPer+1;f=Ra(g[f].hitsOfSharp,m);if("Gunlance"!==n.value||27>m)for(;b--;){if(.1>a[p]&&7===++p)break a;c[l[p]].push(m);a[p]-=f}}}return[a,c,d]}function Ra(a,b){return document.getElementById("ProtectivePolish").checked||
"Bow"===n.value?0:"Gunlance"!==n.value||27<b?"DualBlades"!==n.value?a:a/3:1}function ua(a){const b=z().rampageSlots;[a.augEFR,a.augPRM,a.augPEM]=[1,1,1];a.augPEM*="Valstrax Soul"===document.getElementById("weaponRampage0").value&&"Dragon"===a.eleType?1.2:1;[a.augEFR,a.augPRM]="Dulling Strike"===document.getElementById("weaponRampage0").value&&5>document.getElementById("Sharpness").selectedIndex?[1.02,1.2]:[a.augEFR,a.augPRM];var c=Object.values(e.monster[G.value]?.species);c&&("Invalid"!==c[1]&&"Wyvern Exploit"===
document.querySelector("#weaponRampage0").value||document.querySelector("#weaponRampage0").value.includes(c[2])||"Invalid"!==c[3]&&"Fanged Exploit"===document.querySelector("#weaponRampage0").value)&&(a.PRM*=1.05);/blight Exploit/.test(document.getElementById("weaponRampage0").value)&&(a.PRM*=1.1);"Magnamalo Soul"===document.getElementById("weaponRampage0").value&&(a.BR+=12);if("IgnoreHZV"===a.type&&"LightBowGun"===n.value||"ChargeBlade"===n.value)a.augEFR*=e.skills.Bombardier[document.getElementById("Bombardier").selectedIndex][1],
a.augPRM*=e.skills.Bombardier[document.getElementById("Bombardier").selectedIndex][0],"SwitchAxe"===n.value&&/Sword|ZSD|ED/.test(a.attackName)&&"Impact Phial"===a.phialType&&(a.BRM*=1.15),"SwitchAxe"===n.value&&/Sword|Elemental|ED/.test(a.attackName)&&"Elemental Phial"===a.phialType&&(a.BEM*=1.45);"None"!==a.eleType&&(a.PEM*=0===b&&"Elemental Exploit"===document.getElementById("weaponRampage0").value&&25<=fa(a.eleType)?1.3:1,a.PEM*=0!==b&&"Element Exploit"===document.getElementById("weaponRampage0").value&&
25<=fa(a.eleType)&&"none"!==O(a.eleType)?1.15:1,a.PEM*=20<=fa(a.eleType)&&"none"!==O(a.eleType)?e.skills.ElementExploit[document.getElementById("ElementExploit").selectedIndex].PEM:1);if("ChargeBlade"===n.value||"SwitchAxe"===n.value)a.BRM*=/Morph Slash|Condensed Spinning|Up Roundslash/.test(a.attackName)?e.skills.RapidMorph[document.getElementById("RapidMorph").selectedIndex].BRM:1;0<document.getElementById("Sharpness").selectedIndex&&0<document.getElementById("Bludgeoner").selectedIndex&&(a.BRM*=
1===document.getElementById("Bludgeoner").selectedIndex&&4>document.getElementById("Sharpness").selectedIndex?1.05:1,a.BRM*=2===document.getElementById("Bludgeoner").selectedIndex&&4>document.getElementById("Sharpness").selectedIndex?1.1:1,a.BRM*=3===document.getElementById("Bludgeoner").selectedIndex&&5>document.getElementById("Sharpness").selectedIndex?1.1:1);!/Wyvern/.test(a.attackName)&&Object.keys(e.skills.ChargeMaster).includes(n.value)&&!0===a.ChargeMaster?a.BEM*=e.skills.ChargeMaster[n.value][document.getElementById("ChargeMaster").selectedIndex].BEM:
!0===a.ChargeMaster&&!0===a.NoEleBuff&&(a.baseEle*=/Wyvern/.test(a.attackName)?e.skills.ChargeMaster["HeavyBowGun Wyvern"][document.getElementById("ChargeMaster").selectedIndex].BEM:e.skills.ChargeMaster[n.value][document.getElementById("ChargeMaster").selectedIndex].BEM);c={};[c.PRM,c.PEM]=!1===a.noSharpMod&&/sever|blunt/.test(O(a.type))?[JSON.parse(document.getElementById("Sharpness").value).PRM,JSON.parse(document.getElementById("Sharpness").value).PEM]:[1,1];a.PRM*=~~(25/c.PRM)>=oa(a.type)?e.skills.MindsEye[document.getElementById("MindsEye").selectedIndex].PRM:
1;0===b&&"Brutal Strike"===document.getElementById("weaponRampage0").value&&0>a.aff?(a.efrMulti=1+-.2*a.aff*1.5- -.8*a.aff*.75,a.critBoost=1.5):0!==b&&"Brutal Strike"===document.getElementById("weaponRampage0").value&&0>a.aff&&(a.efrMulti=1+-.5*a.aff- -.5625*a.aff,a.critBoost=1.5);"Shot"===a.type&&(a.augPRM*=e.skills.Marksman[document.getElementById("Marksman").selectedIndex][0],a.augEFR*=e.skills.Marksman[document.getElementById("Marksman").selectedIndex][1]);a.NoSneak||(a.augPRM*=e.skills.SneakAttack[document.getElementById("SneakAttack").selectedIndex].PRM,
a.augEFR*=e.skills.SneakAttack[document.getElementById("SneakAttack").selectedIndex].PRM);return{...a}}function V(a,b=!0){return b?{PEM:e.skills.CriticalElement[document.getElementById("CriticalElement").selectedIndex].PEM,EFE:1+(e.skills.CriticalElement[document.getElementById("CriticalElement").selectedIndex].PEM-1)*a}:{PEM:1,EFE:1}}function U(a,b=!0){return b?{PRM:e.skills.CriticalBoost[document.getElementById("CriticalBoost").selectedIndex].PRM,EFR:1+(e.skills.CriticalBoost[document.getElementById("CriticalBoost").selectedIndex].PRM-
1)*a}:{PRM:1,EFR:1}}function va(a){if(!1===a.Raw)[a.raw,a.rawNon,a.efr,a.rawCrit]=[0,0,0,0];else{a.raw=Math.min(~~(~~(~~a.baseRaw*a.BRM+a.BR+.1)*(document.getElementById("HuntingHornAttack").checked?1.1:1)),2600);var b=a.raw*a.PRM*oa(O(a.type))*a.rawMV/1E4;a.rawNon=~~(.5+Math.max(1,b*a.augPRM));a.efr=~~(.5+Math.max(1,b*a.augEFR*U(a.aff,a.Crit).EFR));a.rawCrit=~~(.5+Math.max(1,b*a.augPRM*U(a.aff,a.Crit).PRM))}Object.prototype.hasOwnProperty.call(a,"NoEleBuff")&&!0===a.NoEleBuff?[a.ele,a.eleNon,a.efe,
a.eleCrit]=[a.baseEle,a.baseEle,a.baseEle,a.baseEle]:(a.eleAmmo=/BowGun/.test(n.value)&&"None"!==a.eleType?1+a.raw/100:1,a.ele=~~(Math.min(a.baseEle*a.BEM+a.BE,365)*a.eleAmmo+.1),b=a.ele*a.PEM*(fa(a.eleType)/100)*a.eleMV*a.augPEM,a.eleNon=~~(.5+Math.max(1,b)),a.efe=~~(.5+Math.max(1,b*V(a.aff,a.Crit).EFE)),a.eleCrit=~~(.5+Math.max(1,b*V(a.aff,a.Crit).PEM)));return{...a}}function ya(a,b,c,d){const f=new RegExp(`${z().shellingType} Lv${z().shellingLevel}`);let h=1,p=1;Object.entries(za()).forEach((l,
g)=>{f.test(l[0])&&(h=~~(l[1].rawMV*e.skills.Bombardier[document.getElementById("Bombardier").selectedIndex][0]*e.skills.Artillery[document.getElementById("Artillery").selectedIndex].BRM),p=~~(l[1].rawMV*e.skills.Bombardier[document.getElementById("Bombardier").selectedIndex][1]*e.skills.Artillery[document.getElementById("Artillery").selectedIndex].BRM),a.push(["replaceME",l[0],0,`${h} / ${h}`,`${l[1].baseEle} / ${l[1].baseEle}`,`${(h+l[1].baseEle)*(l[1].ticsPer+1)} / ${(h+l[1].baseEle)*(l[1].ticsPer+
1)}`,p,l[1].baseEle,(p+l[1].baseEle)*(l[1].ticsPer+1)]),b[0]+=0,b[1]+=h*S(g+27),b[2]+=h*S(g+27),b[3]+=l[1].baseEle*S(g+27),b[4]+=l[1].baseEle*S(g+27),b[5]+=(h+l[1].baseEle)*(c.ticsPer+1)*S(g+27),b[6]+=(h+l[1].baseEle)*(c.ticsPer+1)*S(g+27),b[7]+=(p+l[1].baseEle)*(c.ticsPer+1)*S(g+27))});/Inputs|inputButton/.test(window?.event?.target.className)||ea(a,"dps",d);document.getElementById("c0").innerHTML=`${A(b[0])}`;document.getElementById("d0").innerHTML=`${A(b[1])} / ${A(b[2])}`;document.getElementById("e0").innerHTML=
`${A(b[3])} / ${A(b[4])}`;document.getElementById("f0").innerHTML=`${A(b[5])} / ${A(b[6])}`;document.getElementById("g0").innerHTML=`${A(b[7])}`}function wa(a){const b=document.createElement("table");let c="";for(let d=0;d<a.length;d++){c+="<tr>";for(let f=0;f<a[d].length;f++)c=1==d?c+`<td data-tooltip='Base Stats + Augments'>${a[d][f]}</td>`:2==d?c+`<td data-tooltip='Value Seen In Game'>${a[d][f]}</td>`:3==d?c+`<td data-tooltip='Total Damage Output If Critical'>${a[d][f]}</td>`:4==d?c+`<td data-tooltip='Averaged Damage Output'>${a[d][f]}</td>`:
5==d?c+`<td data-tooltip='Critical Damage Increase'>${a[d][f]}</td>`:6!=d||n.value.includes("Bow")?7==d||6==d&&n.value.includes("Bow")?c+`<td data-tooltip='Total Affinity'>${a[d][f]}</td>`:c+`<td>${a[d][f]}</td>`:c+`<td data-tooltip='Sharpness Modifier'>${a[d][f]}</td>`;c+="</tr>"}b.innerHTML=c;document.querySelector("#statsTableDiv").replaceChildren(b)}function ea(a,b){const c=!document.getElementById("ammoTable").classList.contains("augInvis")&&n.value.includes("BowGun"),d=document.getElementById("dpsTable").classList.contains("augInvis")||
!n.value.includes("BowGun"),f=/gray/.test(document.getElementById("filterCombo").className)?document.querySelectorAll(".a"):document.querySelectorAll(".a:not(.gray)");let h=0;const p=document.querySelector(`#${b}Head`),l=document.querySelector(`#${b}Body`),g=document.createElement("table"),m=document.createElement("thead");/BowGun/.test(n.value)&&"stats"!==b?m.className="tableRowRanged":"stats"!==b&&(m.className="tableRowMelee");m.id=`${b}Head`;const k=document.createElement("tr"),x=document.createElement("tbody");
x.id=`${b}Body`;a.splice(0,1)[0].forEach(r=>{const C=document.createElement("th");let q;Array.isArray(r)?(q=document.createTextNode(r[0]),C.dataset.tooltip=r[1]):q=document.createTextNode(r);C.appendChild(q);k.appendChild(C)});m.appendChild(k);p.replaceWith(m);a.forEach(r=>{const C=document.createElement("tr");/BowGun/.test(n.value)&&"stats"!==b?C.className="tableRowRanged":"stats"!==b&&(C.className="tableRowMelee");Object.values(r).forEach(q=>{if("replaceME"===q)if(document.getElementById("previousWeaponType").value===
n.value&&0<f.length&&(window?.event?.target===K&&"ChargeBlade"!==n.value||window?.event?.target!==K)&&"BowChargePlus"!==window?.event?.target.id&&("Bow"===n.value&&document.getElementById("previousWeapon").value===K.value||"Bow"!==n.value))C.appendChild(f[h]),++h;else{var u=document.createElement("td");q=document.createElement("input");q.type="Number";q.className=`Combo skill ${h}`;q.Max=20;"Bow"===n.value&&document.getElementById("previousWeapon").value!==K.value&&(M=[],N());0===h?(q.id="inputComboRepeat",
q.Min=1,q.value=1,q.className="inputComboRepeat hitsOfSharpInputs inputs"):(q.id=h,q.className="inputs hitsOfSharpInputs",q.Min=0,q.value=0);++h;u.appendChild(q);C.appendChild(u)}else u=document.createElement("td"),q=document.createTextNode(q),u.appendChild(q),C.appendChild(u)});x.appendChild(C);l.replaceWith(x)});g.setAttribute("id",`${b}Table`);x.className=/(BowGun)/.test(n.value)?"rangedTable":"meleeTable";document.getElementById("damageContainer").className=/(BowGun)/.test(n.value)?"rangedContainer":
"meleeContainer";document.getElementById("ammoTable").classList.toggle("augInvis",c);document.getElementById("dpsTable").classList.toggle("augInvis",!d);/BowGun/.test(n.value)||document.getElementById("ammoTable").classList.add("augInvis");if("stats"!==b&&"ammo"!==b){const [r,...C]=/BowGun/.test(n.value)?[h,"a","b","c","d","e","f","g","h"]:[h,"a","b","c","d","e","f","g"];/BowGun/.test(n.value)&&!/BowGun/.test(document.getElementById("previousWeaponType").value)?document.querySelectorAll("#comboCountContainer").forEach(q=>
q.style.display="none"):!/BowGun/.test(n.value)&&/BowGun/.test(document.getElementById("previousWeaponType").value)&&document.querySelectorAll("#comboCountContainer").forEach(q=>q.style.display="");document.getElementById("previousWeapon").value=K.value;document.getElementById("previousWeaponType").value=n.value;for(let q=0;q<r;++q)C.forEach((u,T)=>{document.getElementById(`${b}Body`).children[q].children[T].id=u+q;document.getElementById(`${b}Body`).children[q].children[T].className=`${u} ${q}`});
n.value.includes("BowGun")||document.querySelectorAll(`tbody#${b}Body>tr>td:nth-child(2)`).forEach((q,u)=>{const T=document.createElement("td");T.innerHTML=`<button type="button" aria-pressed="false" id="${u}" class="inputButton dec"
                    >&#8681</button><button type="button" aria-pressed="false" id="${u}" class="inputButton inc">&#8679</button><output class="label">${q.textContent}</output>`;T.id=`b${u}`;T.className=`b ${u} inputContainer`;q.replaceWith(T)})}/blue/.test(document.getElementById("filterCombo").className)&&document.querySelectorAll(".a").forEach((r,C)=>{"none"===document.querySelectorAll(`.${C}`)[0].style.display&&document.querySelectorAll(`.${C}`).forEach(q=>q.style.display="none")})}function aa(){Sa();
if(""!==ha.value){const a=/Bow/.test(n.value)?"shot":"H"===n.value[0]?"blunt":"sever",b="Hit Zone;Sever;Blunt;Shot;Fire;Water;Thunder;Ice;Dragon".split(";"),c=document.createElement("table"),d=document.querySelector("#monTable"),f=e.monster[G.value].parts.sort((p,l)=>l[a]===p[a]&&z().eleType?l[z().eleType]-p[z().eleType]:l[a]-p[a]),h=document.createElement("tr");b.forEach(p=>{const l=document.createElement("th");p=document.createTextNode(p);l.appendChild(p);h.appendChild(l)});c.appendChild(h);f.forEach(p=>
{const l=document.createElement("tr");for(let m=0;9>m;++m){var g=0===m?`${p.part} ${p.state}`:p[O(b[m])];const k=document.createElement("td");0!==m&&(g=document.getElementById("WaterBlight").checked&&4>m?Math.min(100,~~(Math.max(g,.63*g+22.2)+3)):+g,14>+g?k.setAttribute("class","F"):15>+g?k.setAttribute("class","C"):45>+g?k.setAttribute("class","B"):65>+g?k.setAttribute("class","A"):65<=+g&&k.setAttribute("class","S"),g=~~g);g=document.createTextNode(g);k.appendChild(g);l.appendChild(k)}c.appendChild(l)});
c.setAttribute("id","monTable");d.replaceWith(c)}}function pa(){if(e){n.value.includes("Bow")&&(document.getElementById("Sharpness").selectedIndex=0);0<document.getElementsByClassName("inputs").length&&ia();switch(n.value){case "DualBlades":e.skills.Burst=e.skills.BurstDualBlades;break;case "Bow":e.skills.Burst=e.skills.BurstBow;break;case "LightBowGun":e.skills.Burst=e.skills.BurstBowGun;break;case "HeavyBowGun":e.skills.Burst=e.skills.BurstBowGun;break;default:e.skills.Burst=e.skills.BurstStandard}e.skills.Bombardier=
/Gun|Charge/.test(n.value)?e.skills.BombardierSource[n.value]:[];document.querySelectorAll(`.skill:not(.${n.value})`).forEach(a=>a.selectedIndex=0);document.querySelectorAll(".classSpecific").forEach(a=>{a.style.display="";a.parentElement.style.display="";a.classList.contains(n.value)?"BUTTON"===a.tagName||"DIV"===a.tagName?a.style.display="":a.parentElement.style.display="":"BUTTON"===a.tagName||"DIV"===a.tagName?a.style.display="none":a.parentElement.style.display="none"});document.querySelectorAll("div").forEach(a=>
{Object.values(a.children).some(b=>3>=a.childElementCount&&"SELECT"===b.tagName&&"none"!==a.style.display)&&a.classList.add("dropContainer")});document.getElementById("weaponId").textContent=n.value;"ChargeBlade"===n.value&&("Impact Phial"===z().phialType?(document.getElementById("impShieldCharge").parentNode.style='display:"',document.getElementById("eleShieldCharge").parentNode.style="display:none",document.getElementById("eleShieldCharge").selectedIndex=0):"Element Phial"===z().phialType&&(document.getElementById("impShieldCharge").parentNode.style=
"display:none",document.getElementById("impShieldCharge").selectedIndex=0,document.getElementById("eleShieldCharge").parentNode.style='display:""'))}}function Ta(){document.querySelectorAll("div#setSearcher>div#skillSelect>div").forEach(a=>a.remove())}function Ja(a){let b=/Sub-Lv|Explosion| Procs|\(RF\+\d\)/g.test(a.attackName)?a.attackName.replace(/Sub-| Explosion| \(RF\+\d\) Procs| Procs| \(RF\+\d\)/g,""):a.attackName;b=/(?<!Lv)\d/.test(b)?`${b.slice(0,b.length-1)}Lv${b.slice(-1)}`:b;const c={};
c.ammoIncrease=e.ammo.AmmoUp[b][document.getElementById("AmmoUp").selectedIndex];c.recoilSpeed=e.ammo.recoil[b][Math.max(0,Math.min(5,a.recoil-1+document.getElementById("RecoilDown").selectedIndex+(0<e.skills.BowgunBarrel[document.getElementById("BowgunBarrel").selectedIndex??0].Silencer?document.getElementById("Tune-Up").selectedIndex+e.skills.BowgunBarrel[document.getElementById("BowgunBarrel").selectedIndex??0].Silencer:0)-(0<document.getElementById("CriticalFirePower").selectedIndex?2:0)))];c.recoilSpeed=
/\(RF\+\d\)/.test(a.attackName)?`${c.recoilSpeed} ${a.attackName.match(/\(RF\+\d\)/)[0]}`:c.recoilSpeed;c.recoilFrames=e.ammo.recoil.frames[c.recoilSpeed];c.reloadSpeed=e.ammo.reload[b][Math.max(0,Math.min(8,a.reload+document.getElementById("ReloadSpeed").selectedIndex+e.skills.BowgunBarrel[document.getElementById("BowgunBarrel").selectedIndex??0].reload+(0===document.getElementById("BowgunBarrel")?.selectedIndex&&0<document.getElementById("Tune-Up").selectedIndex?1:0)-(0<document.getElementById("ElementalReload").selectedIndex?
2:0)))];c.reloadFrames=e.ammo.reload.frames[c.reloadSpeed];c.clipSize=a.clipSize[a.isUsed]+c.ammoIncrease;c.spareShot=Math.max(0,e.skills.SpareShot[document.getElementById("SpareShot").selectedIndex]+Number(document.getElementById("spareAdjust").value));/(?<!snipe.*)explosion/.test(b)&&0<document.getElementById("Bombardier").selectedIndex&&(c.spareShot+=e.skills.Bombardier[b.match(/Sticky|Wyvern/)[0]][2]);c.shotsPerMinBase=Aa(c.recoilFrames/30,c.reloadFrames/30,a.clipSize[a.isUsed],60);c.shotsPerMin=
Aa(c.recoilFrames/30,c.reloadFrames/30,c.clipSize,60,100/c.spareShot);c.shotsPerGain=`${Number.parseFloat(100*(c.shotsPerMin/c.shotsPerMinBase-1)).toFixed(2)}%`;const d={PierceEle:3,Pierce1:1.5,Pierce2:1.1,Pierce3:1};b=b.replace(/ Lv/,"");c.ticsAdjust=a.ticsPer+=1;/Pierc/.test(b)&&"Toadversary"!==G.value&&(a.ticsPer=Math.min(a.ticsPer,Math.ceil(e.monster[G.value].size.base_size*e.monster[G.value].size.king_boarder/100/d[/Pierce[1-3]/.test(b)?b:"PierceEle"])*(a.attackName.includes("RF+")?+a.attackName.trim().slice(-2,
-1):1)));return c}function ia(){document.getElementsByClassName("inputs").length&&!/BowGun/.test(document.getElementById("previousWeaponType").value)&&""!==document.getElementById("previousWeaponType").value&&(document.querySelectorAll(".comboHits").forEach(a=>a.remove()),document.querySelectorAll("#dpsBody>tr:nth-child(1)>td:nth-child(n+3)").forEach(a=>a.value=0),document.querySelectorAll(".inputs").forEach(a=>a.value=0),document.querySelectorAll(".inputComboRepeat").forEach(a=>a.value=1),M=[])}
function Ua(){document.querySelectorAll(".inputs").forEach((a,b)=>{/blue/.test(document.getElementById("filterCombo").className)&&(0==a.value||a.style.display.includes("none"))?document.getElementsByClassName([b]).style.display="none":document.getElementsByClassName([b]).style.display=""})}function ja(){Object.values(K.children).forEach(b=>b.remove());let a=[];a=document.getElementById("weaponFilter").className.includes("blue")?Object.entries(e[n.value].weapons).filter(b=>10===b[1].rank):Object.entries(e[n.value].weapons);
a.forEach(b=>{const c=document.createElement("option");c.value=b[0];c.textContent=b[1].weapon;K.append(c)})}function ba(){const a=[],[...b]=e[n.value].weapons[K.value].decos;b.forEach((c,d)=>{0<c&&a.push(d+1);1<b[d-1]?a.push(d):1<b[d+1]?(a.push(d+2),--b[d+1]):2<b[d-2]?(a.push(d-1),--b[d-2]):2<b[d+2]&&(a.push(d+3),--b[d+2])});ka("weapon",a.reverse());document.querySelectorAll("#weaponRampage>*").forEach(c=>c.style.display="none");document.getElementById("weaponRampage0").style.display="";if(z().rampageSlots){const c=
[];document.getElementById("rampImg").src=document.getElementById("rampImg").src.replace(/ramp\d/,`ramp${Math.min(3,z().rampageSlots+e.augIndex.rampageAug)}`);Object.keys(e.rampage.rampageDecos).forEach(d=>{Number(d.slice(-1))<=Math.min(3,z().rampageSlots+e.augIndex.rampageAug)&&c.push(e.rampage.rampageDecos[d])});Y(c,document.getElementById("weaponRampage0"))}else document.querySelectorAll("#weaponRampage>*").forEach(c=>{c.selectedIndex=0;c.style.display="none"}),document.getElementById("weaponRampage0").style.display=
"",/Rampage/.test(z().weapon)?e.rampage[z().weapon].Rampage.forEach((c,d)=>{document.querySelector("#weaponRampage").children[d].style.display="";Y(Object.values(c),document.querySelector("#weaponRampage").children[d])}):z().rampage.forEach(c=>{const d=document.createElement("option");d.value=e.rampage.keys2[c];d.textContent=e.rampage.keys2[c];document.getElementById("weaponRampage0").append(d)})}function Y(a,b,c=a){let d="";a.forEach((f,h)=>{d+=`<option value=${c[h]}>${f}</option>`});b.innerHTML=
d}function oa(a){return void 0===e.monster[G.value].parts[W.selectedIndex][O(a)]?100:document.getElementById("WaterBlight").checked?Math.min(100,~~(Math.max(e.monster[G.value].parts[W.selectedIndex][O(a)],.63*e.monster[G.value].parts[W.selectedIndex][O(a)]+22.2)+3)):e.monster[G.value].parts[W.selectedIndex][O(a)]}function Ba(){document.querySelectorAll("#dropHZ>option").forEach(b=>b.remove());const a=[];e.monster[G.value].parts.forEach(b=>{a.push([`${b.part} ${b.state}`])});Y(a,W)}function Va(){document.querySelectorAll("#HR>option").forEach(a=>
a.remove());document.querySelectorAll("#MR>option").forEach(a=>a.remove());Object.values(e.quest).filter(a=>{if(a.target.some(b=>b.name===G.selectedOptions[0].textContent))return a}).forEach(a=>{a.target.forEach((b,c)=>{b.name===G.value&&(b=document.createElement("option"),b.value=a.quest,b.textContent=a.quest,document.getElementById(a.rank).append(b))})});Ca(0<document.querySelectorAll("#MR>option")?.length?document.querySelectorAll("#MR>option")[0].textContent:document.querySelectorAll("#HR>option")[0].textContent);
document.querySelectorAll("MR>option")?.length?document.getElementById("MR")?.classList.remove("augInvis"):document.getElementById("MR")?.classList.add("augInvis");document.querySelectorAll("HR>option")?.length?document.getElementById("HR")?.classList.remove("augInvis"):document.getElementById("HR")?.classList.add("augInvis")}function ca(){let a=1;switch(document.getElementById("players").selectedOptions[0].value){case "1p":a=1;break;case "2p":a=1.35;break;case "3p":a=1.7;break;case "4p":a=2}e.quest[ha.value].target.forEach(b=>
{b.name===G.value&&(b=b.hp.map(c=>c*a),Y(b,document.getElementById("health")))})}function Wa(){document.querySelectorAll(".menu").forEach(b=>b.classList.remove("augInvis"));var a=0<document.querySelectorAll("#MR>option").length;document.getElementById("MR").parentElement.classList.toggle("augInvis",!a);a=0<document.querySelectorAll("#HR>option").length;document.getElementById("HR").parentElement.classList.toggle("augInvis",!a)}function Ca(a){document.getElementById("dropQuest").selectedOptions[0].value=
a;document.getElementById("dropQuest").selectedOptions[0].textContent=a;document.getElementById("questDiv")?.classList.add("augInvis")}function Aa(a,b,c,d=60,f=0){let h;h=0+f;let p=0,l=0;for(;p<=d;){for(let g=0;g<c;++g)p+=a,l+=l+p<=d?1:0,l>=h&&0!==f&&Infinity!==f&&(--g,h+=f);p+=b}return l}function Da(){if(""!==I&&(I!==document.getElementById("BowCoating")||"Bow"===n.value)){var a=[];Object.values(I.children).some(b=>"OPTGROUP"===b.tagName)?(a=document.querySelectorAll(`${I.id}>*>*`),a.splice(-2),
a.splice(0,0,I[0])):a=Object.values(I.children);a.forEach((b,c)=>{if(I===document.getElementById("BowCoating"))var d=z().coatings[c];else I===document.getElementById("BowgunBarrel")?d=["----","Long","Power","Silencer","Guard-Up"][c]:I===document.getElementById("Dereliction")?d="---- Lv-1-1 Lv-1-2 Lv-1-3 Lv-2-1 Lv-2-2 Lv-2-3 Lv-3-1 Lv-3-2 Lv-3-3".split(" ")[c]:(d=c+0,"OPTGROUP"===I.children[1].tagName&&0!==c&&(d="Burst"===I.id&&2<=c?c-1:0===c%3?3:c%3),d="Burst"===I.id&&1===c?"Base Bonus":`Lv-${d}`);
b.textContent=0===c?"----":d});I=""}}function Xa(a){a.classList.contains("skill")&&Array.isArray(e.skills[a.id])&&(e.skills[a.id].forEach((b,c)=>{if(0!==c)if("RecoilDown"===a.id||"ReloadSpeed"===a.id)var d=`${a.id.slice(0,6)} ${a.id.slice(6)} +${c}`;else if("AmmoUp"===a.id||"SpareShot"===a.id)d=`${c}: ${("AmmoUp"===a.id?["No Change","Lv2 & Ele Ammo","Lv3 & Dragon Ammo"]:["Spare Shot +5%","Spare Shot +10%","Spare Shot +20%"])[c-1]}`;else if("Marksman"===a.id)d=`${c}: ${["Chance 20% Raw  + 5% EFR +1%",
"Chance 20% Raw+10% EFR +2%","Chance 60% Raw  + 5% EFR +3% ","Chance 40% Raw+10% EFR +4%"][c-1]}`;else if("Bombardier"===a.id)d="HeavyBowGun"!==n.value?`${c}: Raw +${e.skills.Bombardier[c][0]}% EFR +${e.skills.Bombardier[c][1]}`:["Bombardier","1: Raw + 10% EFR + 10%","2: Sticky+10% Wyvern+15%","3: Raw + 20% EFR + 16%","4: Raw + 25% EFR + 17%"][c];else if("BowgunBarrel"===a.id)d=["Barrels","Long: Raw + 5%","Power: Raw + 12.5%","Silencer: Recoil Down +1","Shield: Guard Up"][c];else if("CriticalFirePower"===
a.id)d=["-","Normal +30% Spread +20% Pierce +10% Recoil -2"][c];else{d="";if(0<b.BR||1<b.PRM||1<b.BRM){d="Raw";0<b.BR&&(d+=/\d\.?\d/.test(b.BR)?`+${b.BR}`:` + ${b.BR}`);if(1<b.BRM){var f=/\.[1-8]/.test(100*(b.BRM-1))?(100*(b.BRM-1)).toFixed(1):(100*(b.BRM-1)).toFixed(0);d+=/\d\.?\d/.test(f)?`+${f}%`:` + ${f}%`}1<b.PRM&&(f=/\.[1-8]/.test(100*(b.PRM-1))?(100*(b.PRM-1)).toFixed(1):(100*(b.PRM-1)).toFixed(0),d+="CriticalBoost"===a.id&&/\d\.?\d/.test(f-25)?`+${f-25}%`:"CriticalBoost"===a.id?` + ${f-25}%`:
/\d\.?\d/.test(f)?`+${f}%`:` + ${f}%`)}f="";if(0<b.BE||1<b.PEM||1<b.BEM){f="Ele";0<b.BE&&(f+=/\d\.?\d/.test(b.BE)?`+${b.BE}`:` + ${b.BE}`);if(1<b.BEM){var h=/\.[1-8]/.test(100*(b.BEM-1))?(100*(b.BEM-1)).toFixed(1):(100*(b.BEM-1)).toFixed(0);f+=/\d\.?\d/.test(h)?`+${h}%`:` + ${h}%`}1<b.PEM&&(h=/\.[1-8]/.test(100*(b.PEM-1))?(100*(b.PEM-1)).toFixed(1):(100*(b.PEM-1)).toFixed(0),f+=/\d\.?\d/.test(h)?`+${h}%`:` + ${h}%`)}h=0<b.aff&&/\d\.?\d/.test(b.aff)?`Aff+${b.aff}`:0<b.aff?`Aff + ${b.aff}`:"";d=Object.prototype.hasOwnProperty.call(b,
"Sharp")&&1>b.Sharp?`Sharp +${100*b.Sharp}%`:d;d=Object.prototype.hasOwnProperty.call(b,"Sharp")&&1<b.Sharp?`Sharp +${b.Sharp}`:d;d=""===d&&""===f&&""===h?"No Change":d;a===document.getElementById("BowCoating")?d=`${z().coatings[c]}: ${[d,f,h].join(" ")}`:(b=c+0,"OPTGROUP"===a.children[1].tagName&&0!==c&&(b="Burst"===a.id&&2<=c?c-1:0===c%3?3:c%3),d=`${b}: ${[d,f,h].join(" ")}`)}else d=a.id;e.description||(e.description={});e.description[a.id]||(e.description[a.id]=[]);e.description[a.id].push(d);
document.getElementById(a.id)[c].textContent=d}),I=a)}function na(a){a.getSkills.forEach(b=>{a.BRM*=+b.BRM;a.BR+=+b.BR;a.PRM*=+b.PRM;a.BEM*=+b.BEM;a.BE+=+b.BE;a.PEM*=+b.PEM;a.aff+=+b.aff});return{...a}}function Ya(){document.querySelectorAll("dropHZ>*").forEach((a,b)=>{a.textContent===(0<e[n.value].weapons[K.selectedIndex].rampageSlots?z():F()).eleType&&(document.getElementById("dropHZ").selectedIndex=b)})}function A(a){return a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function Za(){if(e.armor)for(const [a,
b]of Object.entries(e.armor)){let c="",d=-1;for(const f of b)c+=`<option value=${++d}>${f.name}</option>`;document.getElementById(a).innerHTML=c}}let I="",M=[],Z=0,qa="";const W=document.getElementById("dropHZ"),K=document.getElementById("dropWeapon"),n=document?.getElementById("dropWeaponType"),G=document.getElementById("dropMonster"),ha=document.getElementById("dropQuest"),la=[["LightBowGun"],["GreatSword"],["ChargeBlade"],["InsectGlaive"],["SwordNShield"],["DualBlades"],["SwitchAxe"],["LongSword"],
["Lance"],["HeavyBowGun"],["Bow"],["HuntingHorn"],["Gunlance"],["Hammer"]],Ea=()=>{var a=$a();a=ab(a);a=Object.entries(a).sort();const b=document.querySelector("#EquippedSkillDisplay output");let c="";for(const [d,f]of a)c+=`<output textContent="${d}">${d.replace(/(?<=[a-z])([A-Z])(!=[A-Z])/g," $1")}: ${+f}</output>`;b.innerHTML=c},da=a=>a.replace(/(?<=[a-z])([A-Z])(?![A-Z])/g," $1"),Fa=(a,b)=>a.includes("S")||b.includes("S")?"S":b<=a?b:a,e={time:{}};(async function(){try{const a=window.location.href.slice(0,
window.location.href.lastIndexOf("/"));Y(la,n);const b=fetch(`${window.location.href.slice(0,window.location.href.lastIndexOf("/"))}/json/monster.json`).then(k=>k.json()).then(k=>{e.monster=k}),c=fetch(`${a}/json/rampage.json`).then(k=>k.json()).then(k=>{e.rampage=k}),d=fetch(`${a}/json/types.json`).then(k=>k.json()).then(k=>{e.types=k}),f=fetch(`${a}/json/skills.json`).then(k=>k.json()).then(k=>{e.skills=k}),h=fetch(`${a}/json/quest.json`).then(k=>k.json()).then(k=>{e.quest=k}),p=fetch(`${a}/json/armor.json`).then(k=>
k.json()).then(k=>{e.armor=k}),l=fetch(`${a}/json/LightBowGun.json`).then(k=>k.json()).then(k=>{e.LightBowGun=k}),g=fetch(`${a}/json/ammo.json`).then(k=>k.json()).then(k=>{e.ammo=k}),m=await Promise.all([l,d,c]).then(()=>{ja();ba()});await Promise.all([b,f,h,g,m,p]).then(async()=>{pa();Y([].concat(["Select Skills For Set Builder"],Object.keys(e.types.maxLevel).sort()),document.getElementById("dropSkills"));await Za();Y(Object.keys(e.monster),G);G.selectedIndex=Object.keys(e.monster).indexOf("Toadversary");
await void 0;document.querySelectorAll("#dropMonster>option").forEach((k,x)=>{"Toadversary"===k.textContent&&(document.getElementById("dropMonster").selectedIndex=x)});ra();Ba();ca();aa();y()}).then(()=>e);la.push("descriptions");Object.values(document.getElementsByTagName("SCRIPT")).some(k=>k.src.includes("backup.js"))&&la.push("mhrice");fetch(`${a}/json/charms.json`).then(k=>k.json()).then(k=>{k=Object.fromEntries(Object.entries(k).sort((q,u)=>q[0].localeCompare(u[0])));const x=[];let r='<Option value="c">---</Option>',
C='<Option value="c">---</Option>';for(let q=0,u=0;;){0===q&&(r+=`<option value="${Object.values(k)[u][0]?.grade}">${da(Object.keys(k)[u])} +${Object.values(k)[u][1]}</option>`,C+=`<option value="${Object.values(k)[u][0]?.grade}">${da(Object.keys(k)[u])} +${Object.values(k)[u][2]}</option>`);if(++u===Object.keys(k).length)if(u=0,++q===Object.keys(k).length)break;else 1===q&&(document.getElementById("charmSkill1").innerHTML=r,document.getElementById("charmSkill2").innerHTML=C);q!==u&&"Bludgeoner"!==
Object.keys(k)[q]&&"Bludgeoner"!==Object.keys(k)[u]&&(!e.types.lvl4[Object.keys(k)[q]]||9<=e.types.qurious[Object.keys(k)[q]]||!e.types.qurious[Object.keys(k)[q]]||2>e.types.lvl4[Object.keys(k)[q]])&&(null===e.types.lvl4[Object.keys(k)[u]]||9<=e.types.qurious[Object.keys(k)[u]]||!e.types.qurious[Object.keys(k)[u]]||3>e.types.lvl4[Object.keys(k)[u]])&&!e.types.decoLevels[0].some(T=>Object.keys(T)[0]===Object.keys(k)[q])&&!e.types.decoLevels[0].some(T=>Object.keys(T)[0]===Object.keys(k)[u])&&3<=Object.values(k)[q][1]&&
2<=Object.values(k)[u][2]&&x.push({skills:{[Object.keys(k)[q]]:Object.values(k)[q][1],[Object.keys(k)[u]]:Object.values(k)[u][2]},grade:Fa(Object.values(k)[q][0]?.grade,Object.values(k)[u][0]?.grade)})}e.charms=x;document.getElementById("slot1").selectedIndex=3;document.getElementById("slot2").selectedIndex=1;document.getElementById("slot3").selectedIndex=1;ka("charm",[3,1,1])});la.slice(1).forEach(k=>{fetch(`${a}/json/${k}.json`).then(x=>x.json()).then(x=>{e[k]=x}).then(()=>{})})}catch(a){console.error(a)}})();
const S=(a,b=M,c=0)=>{b.forEach(d=>{d==a&&++c});return c},z=()=>{const a={...e[n.value].weapons[K.value]};/Bow/.test(n.value)?"HeavyBowGun"===n.value?(10===a.rank&&document.getElementById("augUpgrades").checked&&(a.baseRaw+=15),"Power"===document.getElementById("BowgunBarrel")?.selectedOptions[0]?.textContent&&(a.baseRaw=~~(a.baseRaw*(2>document.getElementById("Tune-Up").selectedIndex?1.125:1.15)))):"LightBowGun"===n.value?(10===a.rank&&document.getElementById("augUpgrades").checked&&(a.baseRaw+=
7),"Long"===document.getElementById("BowgunBarrel")?.selectedOptions[0]?.textContent&&(a.baseRaw=~~(a.baseRaw*(2>document.getElementById("Tune-Up").selectedIndex?1.05:1.075)))):"Bow"===n.value&&10===a.rank&&document.getElementById("augUpgrades").checked&&(a.baseRaw+=10):10===a.rank&&document.getElementById("augUpgrades").checked&&!/Water|Ice|Thunder|Fire|Dragon/.test(a.eleType)?a.baseRaw+=30:10===a.rank&&document.getElementById("augUpgrades").checked&&(a.baseRaw+=15,a.baseEle="GreatSword"===n.value?
a.baseEle+30:"lance"===n.value||"Gunlance"===n.value?a.baseEle+21:a.baseEle+18);a.baseRaw+=+document.querySelector("output.attackAug + output").value.slice(-2);var b=+document.querySelector("output.affinityAug + output").value.slice(-2);a.elementalAug+=+document.querySelector("output.elementalAug + output").value.slice(-2);a.aff=a.aff?a.aff+b:b;"None"!==a.eleType?(b="GreatSword"===n.value?[0,5,10,15,20,25,33,43][e.augIndex.elementalAug]:"lance"===n?.value||"Gunlance"===n?.value?[0,3,6,10,14,18,24,
32][e.augIndex.elementalAug]:[0,3,6,9,12,15,20,27][e.augIndex.elementalAug],a.baseEle+=b,document.getElementById("elementalResult").value=`+ ${b}`):document.querySelector("output.elementalAug").value=0;a.baseAff=a.aff;return JSON.parse(JSON.stringify(a))},Ma=a=>{/Pierc/.test(a.attackName)?a.getSkills.push(e.skills.PierceUp[document.getElementById("PierceUp").selectedIndex]):/Spread/.test(a.attackName)?a.getSkills.push(e.skills.SpreadUp[document.getElementById("SpreadUp").selectedIndex]):/Normal|Rapid/.test(a.attackName)&&
a.getSkills.push(e.skills.NormalRapidUp[document.getElementById("NormalRapidUp").selectedIndex]);/RF+/.test(a.attackName)&&a.getSkills.push(e.skills.RapidFireUp[document.getElementById("RapidFireUp").selectedIndex]);/Wyvern|Dragon Piercer/.test(a.attackName)&&a.getSkills.push(e.skills.SpecialAmmoBoost[document.getElementById("SpecialAmmoBoost").selectedIndex]);/BowGun/.test(n.value)&&("HeavyBowGun"===n.value&&(/Sticky|Wyvern/.test(a.attackName)&&(a.augEFR*=e.skills.Bombardier[document.getElementById("Bombardier").selectedIndex][a.attackName.match("Sticky|Wyvern")[0]][1],
a.augPRM*=e.skills.Bombardier[document.getElementById("Bombardier").selectedIndex][a.attackName.match("Sticky|Wyvern")[0]][0]),/snipe|heart|Cluster/.test(a.attackName)||(a.PRM*=e.skills.ChargeLevel[document.getElementById("ChargeLevel").selectedIndex].PRM,a.NoEleBuff?a.baseEle*=e.skills.ChargeLevel[document.getElementById("ChargeLevel").selectedIndex].PEM:a.PEM*=e.skills.ChargeLevel[document.getElementById("ChargeLevel").selectedIndex].PEM)),"LightBowGun"===n.value&&/Pierce|Spread|Normal/.test(a.attackName)&&
0<document.getElementById("CriticalFirePower").selectedIndex&&(/Normal/.test(a.attackName)?a.PRM*=1.3:/Spread/.test(a.attackName)?a.PRM*=1.2:/Pierce/.test(a.attackName)&&(a.PRM*=1.1)));"Bow"!==n.value||/Stake/.test(a.attackName)||a.getSkills.push(e.skills.BowCoating[document.getElementById("BowCoating").selectedIndex]);return na(a)},Na=a=>{"LongSword"!==n.value||/Helm Breaker|Serene/.test(a.attackName)?/Helm Breaker|Serene/.test(a.attackName)&&a.getSkills.push(/Helm Breaker/.test(a.attackName)?a.getSkills.push(e.skills.Helmbreaker[document.getElementById("Helmbreaker").selectedIndex]):
a.getSkills.push(e.skills.SerenePose[document.getElementById("SerenePose").selectedIndex])):a.getSkills.push(e.skills.SpiritGauge[document.getElementById("SpiritGauge").selectedIndex]);if("GreatSword"===n.value){const b=a.attackName.match(/Charged Slash|Rising Slash|Wide Slash|Strong Charged Slash|True Charged Slash|Rage Slash/);b&&0<document.getElementById("StrongarmStance").selectedIndex&&(a.PRM*=e.skills.StrongarmStance[b][0],a.PEM*=e.skills.StrongarmStance[b][1]);/(?<!Tackle )Lv[1-3]/.test(a.attackName)&&
(a.rawMV*=Number(`1.${a.attackName.match(/(?<=Lv)[1-3]/)[0]}`))}"ChargeBlade"===n.value&&(/3rd|(?<!Midair |Axe: )UED|(?<!Charged )Sword(?!.*Shield)/.test(a.attackName)||a.getSkills.push(e.skills.savageAxe[document.getElementById("savageAxe").selectedIndex]),"Impact Phial"===a.phialType?a.getSkills.push(e.skills.impShieldCharge[document.getElementById("impShieldCharge").selectedIndex]):a.getSkills.push(e.skills.eleShieldCharge[document.getElementById("eleShieldCharge").selectedIndex]));return na(a)},
Oa=a=>45<=a?e.skills.WeaknessExploit[Math.min(0,document.getElementById("WeaknessExploit").selectedIndex)].aff:0,Pa=()=>{let a=10*document.getElementById("Handicraft").selectedIndex;const {sharpness:b,handicraft:c,rank:d}=z();var f=10*(e.augIndex.sharpnessAug+(10===d&&document.getElementById("augUpgrades").checked?1:0));b.orange-=Math.max(0,f-(b.red-10));b.red=Math.max(10,b.red-f);let h=-1===Object.values(document.getElementById("Sharpness")).indexOf(0)?6:Object.values(document.getElementById("Sharpness")).indexOf(0)-
1;for(0!==b[Object.keys(b)[h]]?b[Object.keys(b)[h]]+=f:b[Object.keys(b)[h-1]]+=f;a;)f=Math.min(a,c.shift()),b[Object.keys(b)[h]]+=f,++h,a-=f;return b},Sa=()=>{document.querySelectorAll("#spawnArea>output").forEach(a=>a.remove());e.quest[ha.value].target.forEach(a=>{a.name===G.value&&a.spawn.forEach(b=>{const c=document.createElement("output");c.textContent=`Spawn Area ${b.block} ${b.lot}%`;document.getElementById("spawnArea").append(c)})})};document.querySelectorAll("select.demon").forEach(a=>{a.addEventListener("change",
b=>{0<b?.target.selectedIndex&&(document.querySelectorAll(`.demon:not(#${b?.target.id})`)[0].selectedIndex=0,document.querySelectorAll(`.demon:not(#${b?.target.id})`)[1].selectedIndex=0)})});document.querySelectorAll(`#${K.id}, #${n.id}`).forEach(a=>{a.addEventListener("change",b=>{b.target!==n&&"ChargeBlade"!==n.value||pa()})});document.querySelectorAll(`#${K.id}, #${n.id}`).forEach(a=>{a.addEventListener("change",()=>{if("Bow"===n.value){document.querySelectorAll("#BowCoating>option").forEach(c=>
c.remove());const b=[];z().coatings.forEach(c=>{const d=document.createElement("option");d.textContent=c;document.getElementById("BowCoating").append(d);b.push(e.skills[c])});e.skills.BowCoating=b}})});document.addEventListener("keypress",a=>{a.key===["t","e","s","t"][Math.min(3,Z)]&&3>++Z||("Enter"===a.key&&3<=Z?(build("f"!==qa),qa="",Z=0):/t|f/.test(a.key)&&3<=Z?qa=a.key:3>Z&&(Z=0))});document.getElementById("BowChargePlus").addEventListener("change",()=>{ia();N()});document.querySelectorAll(".scroll").forEach(a=>
{"IMG"!==a.tagName&&"BUTTON"!==a.tagName||a.addEventListener("mousedown",()=>{Object.values(document.querySelectorAll("img.scroll")).forEach(b=>{b.classList.toggle("vis");b.classList.toggle("invis")});document.querySelector("img#redScroll")?.classList.contains("invis")?(e.skills.MailofHellfire=e.skills.MailofHellfireSource.blue,e.skills.Dereliction=e.skills.DerelictionSource.blue):(e.skills.MailofHellfire=e.skills.MailofHellfireSource.red,e.skills.Dereliction=e.skills.DerelictionSource.red)})});n.addEventListener("change",
()=>{ja()});document.getElementById("weaponFilter").addEventListener("click",a=>{a.target.classList.toggle("blue");a.target.classList.toggle("gray");ja()});document.querySelectorAll("input.check").forEach(a=>a.addEventListener("mousedown",b=>{/DemonDrug/.test(b?.target.id)&&("DemonDrug"===b?.target.id?document.getElementById("MegaDemonDrug").checked=!1:document.getElementById("DemonDrug").checked=!1);"filterCombo"!==b?.target.id?"WaterBlight"===b?.target.id&&(b=W.selectedIndex,aa(),W.selectedIndex=
b):b?.target===filterCombo&&Ua()}));e.augs={attackAug:[[0,0],[2,5],[4,10],[6,15],[8,20]],affinityAug:[[0,0],[3,5],[6,10],[8,15]],elementalAug:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0]],rampageAug:[[0,0],[3,1],[7,2]],sharpnessAug:[[0,0],[3,1],[5,2],[7,3]]};e.augIndex={attackAug:0,affinityAug:0,elementalAug:0,rampageAug:0,sharpnessAug:0};document.addEventListener("click",a=>{"BUTTON"===a?.target.tagName&&y(a)});document.getElementById("setBuilder").addEventListener("change",a=>{"SELECT"===a?.target.tagName&&
y(a)});document.getElementById("damageTable").addEventListener("mousedown",a=>{if(a.target.classList.contains("inputButton")){if(a.target?.classList.contains("dec")){if("0"===a?.target.id&&1<Number(document.querySelectorAll(".inputs")[a?.target.id].value)||0<Number(a?.target.id)&&0<Number(document.querySelectorAll(".inputs")[a?.target.id].value))--document.querySelectorAll(".inputs")[a?.target.id].value,y()}else 20>Number(document.querySelectorAll(".inputs")[a?.target.id].value)&&(++document.querySelectorAll(".inputs")[a?.target.id].value,
y());document.getElementById("comboCountContainer")?.classList.remove("augInvis")}});const bb=a=>{let b=e.augIndex[a.className.match(/\w+Aug/)[0]];if(e.augs[a.className.match(/\w+Aug/)[0]]&&!("rampageAug"===a.className.match(/\w+Aug/)[0]&&2<+document.querySelector("#rampImg").src.slice(-5,-4))){var c=0;Object.entries(e.augs).forEach(([h,p])=>c+=p[e.augIndex[h]][0]);var d=c+(e.augs[a.className.match(/\w+Aug/)[0]][b+1][0]-e.augs[a.className.match(/\w+Aug/)[0]][b][0]);if(!(9<d)){var f=a.parentElement.querySelector("output.label");
b=++e.augIndex[a.className.match(/\w+Aug/)[0]];f.textContent=e.augs[a.className.match(/\w+Aug/)[0]][b][0];f.nextElementSibling.textContent=`+${e.augs[a.className.match(/\w+Aug/)[0]][b][1]}`;document.getElementById("weaponQurious").textContent=`Remaining Augments ${9-d}/9`}}};document.querySelectorAll(".augButton.inc").forEach(a=>a.addEventListener("mousedown",b=>bb(b.target)));document.querySelectorAll(".augButton.dec").forEach(a=>a.addEventListener("mousedown",b=>{{b=b.target;var c=+document.getElementById("weaponQurious").value.slice(-3,
-2);const d=b.parentElement.querySelector("output.label");let f=e.augIndex[b.className.match(/\w+Aug/)[0]];0!==f&&(c-=e.augs[b.className.match(/\w+Aug/)[0]][f-1][0]-e.augs[b.className.match(/\w+Aug/)[0]][f][0],f=--e.augIndex[b.className.match(/\w+Aug/)[0]],d.textContent=e.augs[b.className.match(/\w+Aug/)[0]][f][0],d.nextElementSibling.textContent=`+${e.augs[b.className.match(/\w+Aug/)[0]][f][1]}`,document.getElementById("weaponQurious").textContent=`Remaining Augments ${9-c}/9`)}}));const cb=a=>{const b=
document.createElement("textarea");b.value=a;document.body.appendChild(b);b.select();document.execCommand("copy");document.body.removeChild(b)},db=()=>{const a=[K.selectedIndex,n.selectedIndex];document.querySelectorAll("#skillSelect label").forEach(b=>{a.push([b.textContent,+b.nextElementSibling.textContent.slice(-1)])});cb(JSON.stringify([[a],Object.values(document.querySelectorAll("section.armorDisplay")).map(b=>[].concat(Object.values(b.querySelectorAll(".armor,select.augmentType,select.augment")).map(c=>
c.selectedIndex),Object.values(b.querySelectorAll("select.armorDisplay")).map(c=>c.selectedIndex)))]))},eb=()=>{navigator.clipboard.readText().then(async a=>{a=await JSON.parse(a).shift()[0];K.selectedIndex=await a.shift();n.selectedIndex=await a.shift();await ba();await a.forEach(b=>sa(b[0],b[1]));getSetBuilds(15)})};document.getElementById("saveState")?.addEventListener("click",()=>db());document.getElementById("loadState")?.addEventListener("click",()=>eb());N();document.querySelectorAll("#weaponFilter,button.rampageAug").forEach(a=>
a.addEventListener("click",()=>{ba()}));const fa=a=>e.monster[G.value].parts[W.selectedIndex][O(a)],ma=(a=n.value)=>{let b={};if("InsectGlaive"===n.value)return b=Object.fromEntries(Object.entries(e.InsectGlaive.attacks).filter(d=>!/Sever|Blunt|Kinsect|Dust|Powder|Mark/.test(d))),{...b};if("ChargeBlade"===n.value){var c="Impact Phial"===z().phialType?"Element Phial|Elemental Phial":"Impact Phial";const d=new RegExp(`${c}`);b=Object.fromEntries(Object.entries(e.ChargeBlade.attacks).filter(f=>!d.test(f)));
return{...b}}if("Bow"===n.value){let d="";const f=1===document.getElementById("BowChargePlus").selectedIndex&&4>z().baseCharge?z().baseCharge+1:z().baseCharge;z().bowShot.forEach((p,l)=>{l<f&&(d+=`|Lv${p.match("[1-5]")[0]} ${p.match("Normal|Rapid|Pierce|Spread")[0]}`)});const h=new RegExp([d.slice(1)]);c=Object.entries(e.Bow.attacks).filter(p=>h.test(p[0]));c=[].concat(Object.entries(e.Bow.attacks).splice(0,1),c);c=c.concat(Object.entries(e.Bow.attacks).splice(136));b=Object.fromEntries(c);return{...b}}if("Gunlance"===
n.value)return b=Object.fromEntries(Object.entries(e.Gunlance.attacks).splice(0,27)),{...b};if("LightBowGun"===n.value||"HeavyBowGun"===n.value){const {isRapidFire:d,clipSize:f}=e[n.value].weapons[K.value];let h=[];a=0;for(c of e.ammo.keys)f[++a]&&h.push(0<=d?.indexOf(c[0])?c[1]:c[0]);h=h.concat(Object.keys(e.ammo).filter(p=>"LightBowGun"===n.value?/lbg|Wyvern Blast(?! before)/.test(p):/hbg|Wyverns/.test(p)));b=Object.fromEntries(Object.entries(e.ammo).filter(p=>0<S(p[0],h)));return{...b}}return{...e[a].attacks}},
za=(a=n.value)=>({...e[a].attacks}),La=(a,b=0)=>a[b].toUpperCase()+a.slice(1),O=a=>a[0].toLowerCase()+a.slice(1);document.querySelectorAll(".buildSkills").forEach(a=>a.addEventListener("mousedown",b=>{if(""===I||I!==b?.target||b.target.className.includes("augment"))""!==I&&Da(),b.target.classList.contains("skill")&&Xa(b?.target),"INPUT"===b.target.tagName&&b.target.className.includes("skillInput")&&(I=b.target)}));document.querySelectorAll("select.skill").forEach(a=>a.addEventListener("change",b=>
{Da();b?.target.blur()}));const sa=(a,b=0,c)=>{if("Skill Selector"!==a)if(null!==document.getElementById(`${a}Select`))document.getElementById("dropSkills").after(document.getElementById(`${a}Select`));else{c=document.createElement("div");var d=document.createElement("label");d.className=`label ${a} skillInput`;d.textContent=a;var f=document.createElement("output");f.className=`skillInput ${a}`;f.setAttribute("max",e.types.maxLevel[a]);f.setAttribute("min","0");f.textContent=`Lv-${b}`;b=document.createElement("button");
b.type="button";b.setAttribute("aria-pressed","false");b.id=`${a}Dec`;b.className=`skillInput ${a} dec`;b.dataset.tooltip="Decrease Skill Level";b.innerHTML+="&#8681";var h=document.createElement("button");h.type="button";h.setAttribute("aria-pressed","false");h.id=`${a}Inc`;h.className=`skillInput ${a} inc`;h.dataset.tooltip="Increase Skill Level";h.innerHTML+="&#8679";c.appendChild(d);c.appendChild(f);c.appendChild(b);c.appendChild(h);c.id=`${a}Select`;document.getElementById("dropSkills").after(c)}};
document.getElementById("dropSkills")?.addEventListener("change",a=>{document.getElementById(a.target.value)?.className.includes("classSpecific")&&!document.getElementById(a.target.value)?.className.includes(n.value)||sa(a.target.value,e.types.maxLevel[a.target.value])});document.getElementById("otherButton").addEventListener("click",()=>{document.getElementById("boxes").classList.toggle("augInvis")});document.querySelector(".boxes.close").addEventListener("click",()=>{document.getElementById("boxes").classList.add("augInvis");
document.getElementById("otherButton").checked=""});document.getElementById("dangoSkillsButton").addEventListener("click",()=>{document.getElementById("dango").classList.toggle("augInvis")});document.querySelector(".dango.close").addEventListener("click",()=>{document.getElementById("dango")?.classList.add("augInvis");document.getElementById("dangoSkillsButton").checked=""});document.getElementById("uniqueSkillsButton").addEventListener("click",()=>{document.getElementById("unique").classList.toggle("augInvis")});
document.querySelector(".unique.close").addEventListener("click",()=>{document.getElementById("unique").classList.add("augInvis");document.getElementById("uniqueSkillsButton").checked=""});document.getElementById("quriousButton").addEventListener("click",()=>{document.querySelectorAll(".armorAugment").forEach(a=>a.classList.toggle("augInvis"))});document.getElementById("extraCharmDeco").addEventListener("click",a=>{document.getElementById("charmSlots").classList.toggle("augInvis",!a.target.checked)});
document.getElementById("skillSelect").addEventListener("mousedown",a=>{if(a.target.classList.contains("skillInput")){const b=a.target.className.split(" ")[1];let c=+document.querySelector(`output.${b}`)?.textContent.match(/(?<=Lv-)\d/)[0];"BUTTON"===a.target.tagName&&(a.target.classList.contains("dec")?0===c?a.target.parentElement.remove():document.querySelector(`output.${b}`).textContent=`Lv-${c-1}`:a.target.classList.contains("inc")&&(document.querySelector(`output.${b}`).textContent=`Lv-${c<e.types.maxLevel[b]?
c+1:c}`));document.getElementById("chest")}});const fb=([a,b])=>{const c=document.querySelector(`output.${a.replace(/['-/#.:()[\]]/g,"\\$&")}`);c?c.textContent=`Lv-${Math.min(e.types.maxLevel[a]||e.skills[a].length-1,c.textContent.slice(-1)+ +b)}`:sa(a,b)},ab=(a={})=>{Object.keys(e.armor).forEach(b=>{Object.values(document.querySelectorAll(`#${b}Skills>output`)).forEach(c=>{const d=c.textContent?.slice(0,-2).trim();(c=+c.textContent.slice(-2))&&(a[d]=a[d]?a[d]+c:c)})});return a},$a=(a={})=>{Object.values(document.querySelectorAll("select.armorDisplay,select.charm")).map(b=>
{if(b.selectedOptions[0]){var c=b.selectedOptions[0].textContent?.slice(0,-2).trim();b=+b.selectedOptions[0].textContent?.slice(-2);0<b&&(a[c]=a[c]?a[c]+b:b)}});return a},ta=()=>{e.armor&&Object.values(document.querySelector("#EquippedSkillDisplay").firstElementChild.children).forEach(a=>{a=a.textContent.split(":");document.getElementById(a[0].replace(/\s/g,""))&&(document.getElementById(a[0].replace(/\s/g,"")).selectedIndex=+a[1])})},Ga=a=>{var b=document.getElementById("charmSkill1");const c=document.getElementById("charmSkill2");
b.selectedOptions[0].textContent.slice(0,-3)===c.selectedOptions[0].textContent.slice(0,-3)&&(c.selectedIndex=0);b=Fa(c?.value,b?.value);if(a?.value){if(b===a.value)return;document.getElementById(`${a.id.slice(0,5)}Decos`).value=b}if(4===document.getElementById("slot1").selectedIndex)a=[4,0,0];else switch(b){case "S":a=[Math.min(2,document.getElementById("slot1").selectedIndex),Math.min(1,document.getElementById("slot2").selectedIndex),Math.min(1,document.getElementById("slot3").selectedIndex)];break;
case "A":a=[Math.min(3,document.getElementById("slot1").selectedIndex),Math.min(1,document.getElementById("slot2").selectedIndex),Math.min(1,document.getElementById("slot3").selectedIndex)];break;default:a=[Math.min(3,document.getElementById("slot1").selectedIndex),Math.min(2,document.getElementById("slot2").selectedIndex),Math.min(1,document.getElementById("slot3").selectedIndex)]}ka("charm",a)},Ha=(a,b=0)=>{var c=a.id.slice(0,-7);c={...e.armor[c][document.getElementById(c).value]};b+=c.quriousPoints;
const d=a.querySelectorAll("select.augment"),f=a.querySelectorAll("select.augmentType");for(let h=0;6>h;h++)0>b+ +d[h].value.match(/[+-]\d+/)&&(d[h].selectedIndex=0,f[h].selectedIndex=0),b+=+d[h].value.match(/[+-]\d+/);a.firstElementChild.textContent=`Remaining Points ${`${b}/${c.quriousPoints}`}`;return b},ra=(a=["helm","chest","arm","waist","leg"])=>{const b=[0,0,0];Object.values(a).forEach(c=>{if(""!==c){var d=document.getElementById(c);if(d){var f={...e.armor[c][document.getElementById(c).value]},
h=document.querySelectorAll(`#${c}Qurious>select.augmentType`);const k=document.querySelectorAll(`#${c}Qurious>select.augment`);for(var p={...f.skills},l=5,g=0;4>g&&l--;)for(var m=f.decos[l];0<=--m;)b[g]=l+1,++g;for(f=0;6>f;++f)if(0<k[f]?.selectedIndex&&0<k[f]?.selectedIndex)if(2===h[f].selectedIndex||4===h[f].selectedIndex)l=k[f].selectedOptions[0].textContent.match(/^([\S\s]+?)(?=\s+[+-1-9])/)[0],p[l]=p[l]?p[l]+(h[f].selectedIndex-3):1;else if(3===h[f].selectedIndex){l=k[f].selectedIndex;for(g=
0;3>g&&l;++g)0===b[g]&&(++b[g],--l);for(g=0;3>g&&l&&(m=Math.min(l,4-b[g]),0<m&&(b[g]+=m,l-=m),l);++g);for(let x=0,r=-1;0<l&&3>r;)2>r&&!b[r+1]&&(b[r+1]=0),0===x?3===++r?(x=1,r=0):0===b[r]&&(++b[r],--l):(1===x&&4>b[r]&&(g=Math.min(l,4-b[r]),b[r]+=g,l-=g),++r)}h=document.createElement("output");h.id=`${c}Skills`;for(const [x,r]of Object.entries(p))console.log({skillName:x,skillPoints:r}),p=document.createElement("img"),p.src="./icons/skill.png",p.className="armorImg armorDeco rampage",h.appendChild(p),
p=document.createElement("output"),p.textContent=`${x} +${r}`,p.innerHTML=`${x.replace(/(?<=[a-z])([A-Z])(?![A-Z])/g," $1")} +${r}`,h.appendChild(p);d.nextElementSibling.replaceWith(h);ka(c,b)}}})},gb=a=>{var b=a.classList.contains("augmentType")?a:a.previousElementSibling;const c=a.classList.contains("augmentType")?a.nextElementSibling:a;var d=a.parentElement.id.slice(0,-7);const f=c.selectedIndex;for(c.innerHTML="";c.firstChild;)c.removeChild(c?.firstChild);var h=document.createElement("option");
h.value=0;h.textContent=" ---- ";c.appendChild(h);const p=Ha(a.parentElement);switch(b.value){case "-Def":for(b=0;2>=b;++b)d=document.createElement("option"),d.value=["+3","+5"][b],d.innerHTML=["-6 Def +3Pts","-12 Def +5Pts"][b],c.appendChild(d);break;case "-Skill":document.querySelectorAll(`#${d}Skills>output`).forEach(g=>{const m=document.createElement("option");m.value="+10";m.innerHTML=`${g.textContent.split("\n")[0].split(" ")[0]} +10Pts`;m.classList.toggle("augInvis",0>=+g.textContent.slice(-2));
c.appendChild(m)});break;case "+Skill":const l=document.querySelectorAll(`#${d}Skills>output`);Object.entries(e.types.qurious).forEach(g=>{const m=document.createElement("option");m.value=`${g[0]} -${g[1]}`;m.innerHTML=`${da(g[0])} -${g[1]}Pts`;m.classList.toggle("augInvis",g[1]>p||5<=l.length&&!Object.values(l).some(k=>k.textContent.includes(da(g[0]))));c.appendChild(m)});break;case "+Slots":for(b=1;3>=b;b++)d=-6*b,h=document.createElement("option"),h.value=d,h.innerHTML=`+${b} Slot${1!==b?"s":""} ${d}Pts`,
h.classList.toggle("augInvis",p<d),c.appendChild(h)}a.className.includes("Type")?c.selectedIndex=0:c.selectedIndex=f},Ia=a=>{var b=a.classList.contains("augmentType")?a:a.previousElementSibling;const c=a.classList.contains("augmentType")?a.nextElementSibling:a;a=a.parentElement.id.slice(0,-7);const d=Ha(c.parentElement),f=Object.values(document.querySelectorAll(`#${a}Skills>output`));switch(b.value){case "-Skill":f.forEach((h,p)=>{c.children[p+1]&&(h=0>=+h.textContent.split(" ")[1]&&p+1!==c.selectedIndex,
c.children[p+1]?.classList.toggle("augInvis",h),c.children[p+1].disabled=h)});break;case "+Slots":for(b=1;3>=b;b++)a=d-(isNaN(+c.value)?0:+c.value)<[0,6,12,18][b],c.children[b].classList.toggle("augInvis",a),c.children[b].disabled=a;break;case "+Skill":Object.values(c.children).forEach(h=>{const p=0<=+h.value+(d-(isNaN(+c.value)?0:+c.value))&&(5>f.length||f.some(l=>l.textContent.includes(h.textContent.splice(0,-3).trim())));h.classList.toggle("augInvis",!p);h.disabled=!p})}},ka=(a,b)=>{document.querySelectorAll(`section.${a} .decoDisplay img`).forEach((c,
d)=>{const f=b[d];d=c.nextElementSibling;d.classList.toggle("augInvis",!f);c.classList.toggle("augInvis",!f);if(f&&(0===d.options.length||!c.classList.contains(`lvl${f}`))){c.className=c.className.replace(/(?<=lvl)\d/,f);c.src=`./icons/lvl${f}.png`;for(var h="<option value=0>---</option>",p=f;p--;)h+=`<option class="optTitle" value="${p+1}" disabled ${f<=p?'style="display:none"':""}>lvl-${p+1} Decos</option>`,e.types.decoLevels[p].forEach(l=>{const [g,m]=Object.entries(l)[0];h+=`<option value="${p+
1}" ${f<=p?'style="display:none"':""}>${da(g)} +${m}</option>`});d.innerHTML=h}})},hb=(a,b=0)=>{const c=a.id.slice(0,-7),d={...e.armor[c][document.getElementById(c).value]};Object.values(document.querySelectorAll(`#${c}Skills>output`)).map(f=>{if(0>+f.textContent.slice(-3))return Object.values(document.querySelectorAll(`#${c}Qurious>select.augment`)).filter(h=>!h.selectedOptions[0]?.textContent.includes(f.textContent.slice(0,-3).trim()))}).forEach(f=>{f&&(f[f.length-1].selectedIndex=-1,f[f.length-
1].previousSibling.selectedIndex=-1)});b+=d.quriousPoints;for(let f=0;6>f;f++){const h=document.querySelectorAll(`#${a.id}>select.augment`)[f];0>b+ +h.value&&(h.selectedIndex=-1,document.querySelectorAll(`#${a.id}>select.augmentType`)[f].selectedIndex=-1);b+=+h.value}a.firstElementChild.textContent=`Remaining Points ${`${b}/${d.quriousPoints}`}`;ra([c]);return b};Object.values(document.querySelectorAll(".augmentType, .augment")).forEach(a=>a.addEventListener("change",b=>{.1<e.time?.augments-performance.now()?
e.time.augments=performance.now():(e.time.augments=performance.now(),b.target?.className.includes("augment")&&(b.target.classList.contains("augmentType")?gb(b.target):Ia(b.target),hb(b.target.parentElement)))}));document.querySelectorAll("button").forEach(a=>a.addEventListener("click",b=>{"startSearch"!==b.target.id&&"searchAgain"!==b.target.id&&"extendedSearch"!==b.target.id&&y(b)}));document.querySelectorAll("select,input").forEach(a=>a.addEventListener("change",b=>y(b)));document.querySelectorAll("section.armorDisplay").forEach(a=>
a.addEventListener("change",b=>{"SELECT"===b.target.tagName&&Ea()}));document.querySelectorAll("select.augment,select.augmentType").forEach(a=>{a.addEventListener("mousedown",b=>{b.target.classList.contains("augmentType")||Ia(b.target);1>b.target.previousElementSibling?.selectedIndex?Object.values(b.target.children).forEach(c=>c.disabled=!0):Object.values(b.target.children).forEach(c=>c.disabled=!1);Ea()})});document.querySelectorAll("select.armor").forEach(a=>{a.addEventListener("change",b=>{b=b.target.className.split(" ").filter(d=>
"armor"!==d)[0];const c={...e.armor[b][document.getElementById(b).value]};document.querySelector(`section#${b}Qurious>output.currentPoints`).textContent=`Remaining Points ${c.quriousPoints}/${c.quriousPoints}`;ra([b])})});document.addEventListener("dragstart",a=>{var b=a.dataTransfer,c=b.setData;a=a.target;a=Object.values(document.getElementById("comboCountDisplay").children).indexOf(a);c.call(b,"text/plain",a)});document.addEventListener("dragover",a=>{a.preventDefault();a.dataTransfer.dropEffect=
"move"});document.addEventListener("drop",a=>{a.preventDefault();const b=a.dataTransfer?.getData("text/plain");"comboCountDisplay"===a.target.parentElement.id&&a.target.before(Object.values(a.target.parentElement.children)[+b]);M=Object.values(document.getElementById("comboCountDisplay").children).map(c=>c.className.split(" ")[0])});document.querySelectorAll("input, button:not(#setReturn button), select:not(#setReturn select)").forEach(a=>{a.addEventListener("change",()=>ta(a))});document.querySelector("#weaponSelects>#Qurious")?.addEventListener("mousedown",
()=>{document.getElementById("augToggle")?.classList.remove("augInvis")});document.querySelectorAll(".charmSlot, #charm>select").forEach(a=>a.addEventListener("change",b=>{4===document.getElementById("slot1").selectedIndex&&(document.getElementById("slot2").selectedIndex=0,document.getElementById("slot3").selectedIndex=0);Ga()}));n.addEventListener("change",()=>{ja();pa();ba();aa();Ya();ia()});K.addEventListener("change",()=>ba());document.querySelectorAll("select.menu").forEach(a=>a.addEventListener("change",
b=>{Ca(b.target.selectedOptions[0].value);aa();ca()}));document.getElementById("players")?.addEventListener("change",()=>ca());ha.addEventListener("change",()=>{aa();ca()});G.addEventListener("change",()=>{Ba();Va();ca();aa()});document.querySelector("#questButton").addEventListener("mousedown",()=>Wa());Object.values(document.querySelectorAll("#searchAgain, #startSearch")).forEach(a=>a.addEventListener("click",()=>getSetBuilds(12)));Object.values(document.querySelectorAll("#charm select")).forEach(a=>
a.addEventListener("change",b=>Ga(b.target)));document.querySelector(".extraSkills").addEventListener("mousedown",a=>{"BUTTON"!==a.target.tagName||a.target.classList.includes("close")||(fb(a.target.textContent.split(" +")),a.target.remove())});document.getElementById("setSearcher").addEventListener("mouseover",a=>{"OUTPUT"===a.target.tagName&&e.descriptions[a.target.classList[1]]&&!a.target.dataset.tooltip&&(a.target.dataset.tooltip=e.descriptions[a.target.classList[1]].join("\n"))});document.getElementById("setReturn").addEventListener("mouseover",
a=>{"BUTTON"===a.target.tagName&&e.descriptions[a.target.textContent.split(" ")[0]]&&!a.target.dataset.tooltip&&(a.target.dataset.tooltip=e.descriptions[a.target.textContent.split(" ")[0]].join("\n"))});document.getElementById("resetCombo").addEventListener("click",()=>ia());document.getElementById("resetSkills").addEventListener("click",()=>Ta());document.getElementById("ammoChange").addEventListener("click",()=>{const a=document.getElementById("dpsTable").classList.contains("augInvis");document.getElementById("dpsTable").classList.toggle("augInvis",
!a);document.getElementById("ammoTable").classList.toggle("augInvis",a)});document.getElementById("normalSearch").addEventListener("click",()=>getSetBuilds(12));document.getElementById("startSearch").addEventListener("click",()=>getSetBuilds(12));document.getElementById("extendedSearch").addEventListener("click",()=>getSetBuilds(15));document.querySelector(".grid").addEventListener("mousedown",a=>{if("BUTTON"===a.target.tagName){const b=Object.values(document.querySelectorAll("div.grid > div.setResult")).indexOf(a.target.parentElement);
a=GlobalMap.get(b)[a.target.parentElement.lastElementChild.selectedIndex];const c={};a.usedSkills.slice(-2).forEach(f=>{c[f[0]]=f[1]});equipBuild(a,c);const d={};a.usedSkills.forEach(f=>{const h=f[3]?f[1]*f[3]:f[1];d[f[0]]=d[f[0]]?d[f[0]]+h:h});console.log({build:a,charm:c,buildTest:d});document.getElementById("setReturn").classList.add("augInvis");y();document.querySelectorAll(".extraSkills>button").forEach(f=>f.remove());document.querySelectorAll(".grid>div").forEach(f=>f.remove());GlobalMap.clear()}});
D.exports=e},{}]},{},[1])},{}]},{},[1]);(function(){function L(P,Q,E){function D(t,w){if(!Q[t]){if(!P[t]){var F="function"==typeof require&&require;if(!w&&F)return F(t,!0);if(J)return J(t,!0);w=Error("Cannot find module '"+t+"'");throw w.code="MODULE_NOT_FOUND",w;}w=Q[t]={exports:{}};P[t][0].call(w.exports,function(v){return D(P[t][1][v]||v)},w,w.exports,L,P,Q,E)}return Q[t].exports}for(var J="function"==typeof require&&require,y=0;y<E.length;y++)D(E[y]);return D}return L})()({1:[function(L,P,Q){(function(){function E(D,J,y){function t(v,
B){if(!J[v]){if(!D[v]){const H="function"===typeof L&&L;if(!B&&H)return H(v,!0);if(w)return w(v,!0);B=Error(`Cannot find module '${v}'`);throw B.code="MODULE_NOT_FOUND",B;}B=J[v]={exports:{}};D[v][0].call(B.exports,H=>t(D[v][1][H]||H),B,B.exports,E,D,J,y)}return J[v].exports}for(var w="function"===typeof L&&L,F=0;F<y.length;F++)t(y[F]);return t}return E})()({1:[function(E,D,J){(function(){function y(t,w,F){function v(R,N){if(!w[R]){if(!t[R]){const X="function"===typeof E&&E;if(!N&&X)return X(R,!0);
if(B)return B(R,!0);N=Error(`Cannot find module '${R}'`);throw N.code="MODULE_NOT_FOUND",N;}N=w[R]={exports:{}};t[R][0].call(N.exports,X=>v(t[R][1][X]||X),N,N.exports,y,t,w,F)}return w[R].exports}for(var B="function"===typeof E&&E,H=0;H<F.length;H++)v(F[H]);return v}return y})()({1:[function(y,t,w){new Map;document.createDocumentFragment()},{}]},{},[1])},{}]},{},[1])},{}]},{},[1]);

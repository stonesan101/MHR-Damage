(()=>{var e={382:(e,t,i)=>{i.d(t,{p:()=>a});const s=(e,t)=>{let i="";for(let s=0;s<5;++s)i+=e[s]+t[s];return i},r=(e,t)=>{let[i,s,r]=t,a=s?s[0]?r?"standard":"qurious":"deco":"charmNeeded";return"charmNeeded"===a?[i,a,e,[0,0,0,0,i]]:(s[4]="standard"===a?0:r,[i,a,r,s])},a=(e,t={})=>{const{charmSkills:i,skill1Names:a,skill2Names:n}=e;for(let e of a){let[a,l,c,u]=r(e,i[e][0]);for(let d of n){if(e===d)continue;let n,f,g,[h,p,S,k]=r(d,i[d][1]);"charmNeeded"===l||"charmNeeded"===p?(f="charmNeeded"===l&&"charmNeeded"===p?[c,S]:"charmNeeded"===l?c:S,n="charmNeeded"):(f=c+S,n="deco"===l||"deco"===p?"deco":"qurious"===l||"qurious"===p?"qurious":"standard"),g=s(u,k),t[n]||(t[n]={}),o(t[n],f,g,[[e,a],[d,h]])}}for(let e in t){for(let i in t[e])t[e][i]=Object.entries(t[e][i]).reverse();t[e]=Object.entries(t[e]).reverse()}return Object.entries(t)};function o(e,t,i,s){e[i]||(e[i]={}),e[i][t]||(e[i][t]=[]),e[i][t].push(s)}},41:(e,t,i)=>{const s=JSON.parse('{"decos":{"AffinitySliding":1,"BlastResistance":1,"Bombardier":1,"Botanist":1,"CarvingPro":1,"ChameleosBlessing":1,"DefenseBoost":1,"Defiance":1,"Diversion":1,"DragonAttack":1,"DragonResistance":1,"FireAttack":1,"FireResistance":1,"FlinchFree":1,"FreeMeal":1,"Geologist":1,"HornMaestro":1,"HungerResistance":1,"IceAttack":1,"IceResistance":1,"Inspiration":1,"IntrepidHeart":1,"KushalaBlessing":1,"LeapofFaith":1,"MuckResistance":1,"ParalysisResistance":1,"PoisonAttack":1,"PoisonResistance":1,"RecoilDown":1,"RecoverySpeed":1,"ReloadSpeed":1,"ShockAbsorber":1,"SleepResistance":1,"SpeedSharpening":1,"SpiribirdsCall":1,"StaminaThief":1,"Steadiness":1,"StunResistance":1,"TeostraBlessing":1,"ThunderAttack":1,"ThunderResistance":1,"WallRunnerBoost":1,"WaterAttack":1,"WaterResistance":1,"Windproof":1,"AdrenalineRush":2,"Agitator":2,"Artillery":2,"AttackBoost":2,"Ballistics":2,"BladescaleHone":2,"BlastAttack":2,"BlightResistance":2,"Bludgeoner":2,"BubblyDance":2,"Burst":2,"ChargeMaster":2,"Coalescence":2,"Constitution":2,"Counterstrike":2,"CriticalBoost":2,"CriticalElement":2,"CriticalEye":2,"DivineBlessing":2,"ElementExploit":2,"Embolden":2,"EvadeExtender":2,"EvadeWindow":2,"Focus":2,"Foray":2,"Fortify":2,"Guard":2,"GuardUp":2,"Heroics":2,"ItemProlonger":2,"LatentPower":2,"LoadShells":2,"MarathonRunner":2,"MasterMounter":2,"MastersTouch":2,"MaximumMight":2,"MindsEye":2,"ParalysisAttack":2,"Partbreaker":2,"PeakPerformance":2,"PowerProlonger":2,"ProtectivePolish":2,"PunishingDraw":2,"QuickSheathe":2,"RapidMorph":2,"RazorSharp":2,"RecoveryUp":2,"Resentment":2,"Resuscitate":2,"SleepAttack":2,"Slugger":2,"SneakAttack":2,"SpareShot":2,"SpecialAmmoBoost":2,"SpeedEating":2,"StaminaSurge":2,"TremorResistance":2,"WallRunner":2,"WeaknessExploit":2,"Wide-Range":2,"WirebugWhisperer":2,"AmmoUp":3,"BloodRite":3,"CriticalDraw":3,"Earplugs":3,"GoodLuck":3,"GrinderS":3,"Handicraft":3,"HellfireCloak":3,"JumpMaster":3,"Mushroomancer":3,"NormalRapidUp":3,"OffensiveGuard":3,"PierceUp":3,"QuickBreath":3,"RapidFireUp":3,"Redirection":3,"SpreadUp":3,"StatusTrigger":3,"Tune-Up":3,"Bloodlust":4,"BowChargePlus":4,"Dragonheart":4},"maxLevel":{"AdrenalineRush":3,"AffinitySliding":1,"Agitator":5,"AmmoUp":3,"Artillery":3,"AttackBoost":7,"Ballistics":3,"Berserk":2,"BladescaleHone":3,"BlastAttack":3,"BlastResistance":3,"BlightResistance":3,"BloodAwakening":3,"Bloodlust":3,"BloodRite":3,"Bludgeoner":3,"Bombardier":3,"Botanist":4,"BowChargePlus":1,"BubblyDance":3,"BuildupBoost":3,"Burst":3,"CaptureMaster":1,"CarvingMaster":1,"CarvingPro":1,"ChameleosBlessing":4,"ChargeMaster":3,"Coalescence":3,"Constitution":5,"Counterstrike":3,"CriticalBoost":3,"CriticalDraw":3,"CriticalElement":3,"CriticalEye":7,"DefenseBoost":7,"Defiance":5,"Dereliction":3,"Diversion":1,"DivineBlessing":3,"DragonAttack":5,"DragonConversion":3,"Dragonheart":5,"DragonResistance":3,"Earplugs":5,"ElementExploit":3,"Embolden":3,"EvadeExtender":3,"EvadeWindow":5,"FireAttack":5,"FireResistance":3,"FlinchFree":3,"Focus":3,"Foray":3,"Fortify":1,"FreeMeal":3,"FrenziedBloodlust":3,"Frostcraft":3,"Furious":3,"Geologist":3,"GoodLuck":3,"GrinderS":3,"Guard":5,"GuardUp":3,"Guts":3,"Handicraft":5,"Heaven-Sent":3,"HellfireCloak":4,"Heroics":5,"HornMaestro":1,"HungerResistance":3,"IceAttack":5,"IceResistance":3,"Inspiration":1,"IntrepidHeart":2,"ItemProlonger":3,"JumpMaster":1,"KushalaBlessing":4,"LatentPower":5,"LeapofFaith":1,"LoadShells":2,"MailofHellfire":3,"MarathonRunner":3,"MasterMounter":1,"MastersTouch":3,"MaximumMight":3,"MindsEye":3,"MuckResistance":2,"Mushroomancer":3,"NormalRapidUp":3,"OffensiveGuard":3,"ParalysisAttack":3,"ParalysisResistance":3,"Partbreaker":3,"PeakPerformance":3,"PierceUp":3,"PoisonAttack":3,"PoisonResistance":3,"PowderMantle":3,"PowerProlonger":3,"ProtectivePolish":3,"PunishingDraw":3,"QuickBreath":1,"QuickSheathe":3,"RapidFireUp":3,"RapidMorph":3,"RazorSharp":3,"RecoilDown":3,"RecoverySpeed":3,"RecoveryUp":3,"Redirection":2,"ReloadSpeed":3,"Resentment":5,"Resuscitate":3,"ShockAbsorber":1,"SleepAttack":3,"SleepResistance":3,"Slugger":3,"SneakAttack":3,"SpareShot":3,"SpecialAmmoBoost":2,"SpeedEating":3,"SpeedSharpening":3,"SpiribirdsCall":1,"SpreadUp":3,"StaminaSurge":3,"StaminaThief":3,"StatusTrigger":3,"Steadiness":3,"Stormsoul":5,"Strife":3,"StunResistance":3,"TeostraBlessing":4,"ThunderAlignment":5,"ThunderAttack":5,"ThunderResistance":3,"TremorResistance":3,"Tune-Up":2,"WallRunner":3,"WallRunnerBoost":1,"WaterAttack":5,"WaterResistance":3,"WeaknessExploit":3,"Wide-Range":5,"WindAlignment":5,"WindMantle":3,"Windproof":3,"WirebugWhisperer":3},"qurious":{"AmmoUp":15,"AttackBoost":15,"CriticalBoost":15,"CriticalEye":15,"Guts":15,"MastersTouch":15,"NormalRapidUp":15,"PierceUp":15,"RapidFireUp":15,"RazorSharp":15,"SpareShot":15,"SpreadUp":15,"WeaknessExploit":15,"Agitator":12,"Artillery":12,"BloodRite":12,"Bloodlust":12,"BuildupBoost":12,"Burst":12,"Coalescence":12,"DragonConversion":12,"Frostcraft":12,"GoodLuck":12,"Handicraft":12,"LatentPower":12,"MaximumMight":12,"PeakPerformance":12,"RapidMorph":12,"Resentment":12,"Resuscitate":12,"SneakAttack":12,"Tune-Up":12,"AdrenalineRush":9,"Ballistics":9,"BladescaleHone":9,"ChargeMaster":9,"CriticalDraw":9,"CriticalElement":9,"Dragonheart":9,"Earplugs":9,"ElementExploit":9,"Focus":9,"Foray":9,"FrenziedBloodlust":9,"Furious":9,"GrinderS":9,"HellfireCloak":9,"Heroics":9,"MailofHellfire":9,"MindsEye":9,"Mushroomancer":9,"OffensiveGuard":9,"PowderMantle":9,"PowerProlonger":9,"ProtectivePolish":9,"Redirection":9,"StatusTrigger":9,"Strife":9,"WindMantle":9,"WirebugWhisperer":9,"BlastAttack":6,"BubblyDance":6,"ChameleosBlessing":6,"Constitution":6,"Counterstrike":6,"Defiance":6,"Embolden":6,"EvadeExtender":6,"EvadeWindow":6,"Guard":6,"GuardUp":6,"IntrepidHeart":6,"KushalaBlessing":6,"LoadShells":6,"MarathonRunner":6,"ParalysisAttack":6,"Partbreaker":6,"PoisonAttack":6,"PunishingDraw":6,"QuickSheathe":6,"RecoilDown":6,"ReloadSpeed":6,"SleepAttack":6,"Slugger":6,"SpecialAmmoBoost":6,"SpeedEating":6,"StaminaSurge":6,"Steadiness":6,"TeostraBlessing":6,"TremorResistance":6,"WallRunner":6,"AffinitySliding":3,"BlastResistance":3,"BlightResistance":3,"DefenseBoost":3,"Diversion":3,"DivineBlessing":3,"DragonAttack":3,"FireAttack":3,"FlinchFree":3,"Fortify":3,"FreeMeal":3,"HornMaestro":3,"HungerResistance":3,"IceAttack":3,"ItemProlonger":3,"LeapofFaith":3,"MasterMounter":3,"MuckResistance":3,"ParalysisResistance":3,"PoisonResistance":3,"RecoverySpeed":3,"RecoveryUp":3,"SleepResistance":3,"SpeedSharpening":3,"SpiribirdsCall":3,"StaminaThief":3,"StunResistance":3,"ThunderAttack":3,"WallRunnerBoost":3,"WaterAttack":3,"Wide-Range":3,"Windproof":3},"pointsPerSlot":[{"ChameleosBlessing":1,"Defiance":1,"IntrepidHeart":1,"KushalaBlessing":1,"PoisonAttack":1,"RecoilDown":1,"ReloadSpeed":1,"Steadiness":1,"TeostraBlessing":1,"AffinitySliding":1,"BlastResistance":1,"DefenseBoost":1,"Diversion":1,"DragonAttack":1,"FireAttack":1,"FlinchFree":1,"FreeMeal":1,"HornMaestro":1,"HungerResistance":1,"IceAttack":1,"LeapofFaith":1,"MuckResistance":1,"ParalysisResistance":1,"PoisonResistance":1,"RecoverySpeed":1,"SleepResistance":1,"SpeedSharpening":1,"SpiribirdsCall":1,"StaminaThief":1,"StunResistance":1,"ThunderAttack":1,"WallRunnerBoost":1,"WaterAttack":1,"Windproof":1,"Bombardier":1,"Botanist":1,"CarvingPro":1,"DragonResistance":1,"FireResistance":1,"Geologist":1,"IceResistance":1,"Inspiration":1,"ShockAbsorber":1,"ThunderResistance":1,"WaterResistance":1},{"AttackBoost":1,"CriticalBoost":1,"CriticalEye":1,"MastersTouch":1,"RazorSharp":1,"SpareShot":1,"WeaknessExploit":1,"Agitator":1,"Artillery":1,"Burst":1,"Coalescence":1,"LatentPower":1,"MaximumMight":1,"PeakPerformance":1,"RapidMorph":1,"Resentment":1,"Resuscitate":1,"SneakAttack":1,"AdrenalineRush":1,"Ballistics":1,"BladescaleHone":1,"ChargeMaster":1,"CriticalElement":1,"ElementExploit":1,"Focus":1,"Foray":1,"Heroics":1,"MindsEye":1,"PowerProlonger":1,"ProtectivePolish":1,"WirebugWhisperer":1,"BlastAttack":1,"BubblyDance":1,"Constitution":1,"Counterstrike":1,"Embolden":1,"EvadeExtender":1,"EvadeWindow":1,"Guard":1,"GuardUp":1,"LoadShells":1,"MarathonRunner":1,"ParalysisAttack":1,"Partbreaker":1,"PunishingDraw":1,"QuickSheathe":1,"SleepAttack":1,"Slugger":1,"SpecialAmmoBoost":1,"SpeedEating":1,"StaminaSurge":1,"TremorResistance":1,"WallRunner":1,"ChameleosBlessing":1,"DefenseBoost":2,"Defiance":1,"DragonAttack":2,"FireAttack":2,"IceAttack":2,"IntrepidHeart":1,"KushalaBlessing":1,"PoisonAttack":1,"RecoilDown":1,"ReloadSpeed":1,"Steadiness":1,"TeostraBlessing":1,"ThunderAttack":2,"WaterAttack":2,"BlightResistance":1,"DivineBlessing":1,"Fortify":1,"ItemProlonger":1,"MasterMounter":1,"RecoveryUp":1,"Wide-Range":1,"AffinitySliding":1,"BlastResistance":1,"Diversion":1,"FlinchFree":1,"FreeMeal":1,"HornMaestro":1,"HungerResistance":1,"LeapofFaith":1,"MuckResistance":1,"ParalysisResistance":1,"PoisonResistance":1,"RecoverySpeed":1,"SleepResistance":1,"SpeedSharpening":1,"SpiribirdsCall":1,"StaminaThief":1,"StunResistance":1,"WallRunnerBoost":1,"Windproof":1,"Bludgeoner":1,"Bombardier":1,"Botanist":1,"CarvingPro":1,"DragonResistance":1,"FireResistance":1,"Geologist":1,"IceResistance":1,"Inspiration":1,"ShockAbsorber":1,"ThunderResistance":1,"WaterResistance":1},{"AmmoUp":1,"NormalRapidUp":1,"PierceUp":1,"RapidFireUp":1,"SpreadUp":1,"AttackBoost":1,"CriticalBoost":1,"CriticalEye":1,"MastersTouch":1,"RazorSharp":1,"SpareShot":1,"WeaknessExploit":1,"BloodRite":1,"GoodLuck":1,"Handicraft":1,"Tune-Up":1,"Agitator":1,"Artillery":1,"Burst":1,"Coalescence":1,"Guard":2,"LatentPower":1,"MaximumMight":1,"PeakPerformance":1,"RapidMorph":1,"Resentment":1,"Resuscitate":1,"SneakAttack":1,"IntrepidHeart":2,"CriticalDraw":1,"Earplugs":1,"GrinderS":1,"HellfireCloak":1,"Mushroomancer":1,"OffensiveGuard":1,"Redirection":1,"StatusTrigger":1,"AdrenalineRush":1,"Ballistics":1,"BladescaleHone":1,"ChargeMaster":1,"CriticalElement":1,"ElementExploit":1,"Focus":1,"Foray":1,"Heroics":1,"MindsEye":1,"PowerProlonger":1,"ProtectivePolish":1,"Wide-Range":3,"WirebugWhisperer":1,"DefenseBoost":3,"DragonAttack":3,"FireAttack":3,"IceAttack":3,"ThunderAttack":3,"WaterAttack":3,"BlastAttack":1,"BubblyDance":1,"Constitution":1,"Counterstrike":1,"Embolden":1,"EvadeExtender":1,"EvadeWindow":1,"GuardUp":1,"LoadShells":1,"MarathonRunner":1,"ParalysisAttack":1,"Partbreaker":1,"PunishingDraw":1,"QuickSheathe":1,"SleepAttack":1,"Slugger":1,"SpecialAmmoBoost":1,"SpeedEating":1,"StaminaSurge":1,"TremorResistance":1,"WallRunner":1,"ChameleosBlessing":1,"Defiance":1,"KushalaBlessing":1,"PoisonAttack":1,"RecoilDown":1,"ReloadSpeed":1,"Steadiness":1,"TeostraBlessing":1,"BlightResistance":1,"DivineBlessing":1,"Fortify":1,"ItemProlonger":1,"MasterMounter":1,"RecoveryUp":1,"AffinitySliding":1,"BlastResistance":1,"Diversion":1,"FlinchFree":1,"FreeMeal":1,"HornMaestro":1,"HungerResistance":1,"LeapofFaith":1,"MuckResistance":1,"ParalysisResistance":1,"PoisonResistance":1,"RecoverySpeed":1,"SleepResistance":1,"SpeedSharpening":1,"SpiribirdsCall":1,"StaminaThief":1,"StunResistance":1,"WallRunnerBoost":1,"Windproof":1,"JumpMaster":1,"QuickBreath":1,"Bludgeoner":1,"Bombardier":1,"Botanist":1,"CarvingPro":1,"DragonResistance":1,"FireResistance":1,"Geologist":1,"IceResistance":1,"Inspiration":1,"ShockAbsorber":1,"ThunderResistance":1,"WaterResistance":1},{"AmmoUp":2,"NormalRapidUp":2,"PierceUp":2,"SpreadUp":2,"AttackBoost":2,"CriticalEye":2,"MastersTouch":2,"RazorSharp":2,"SpareShot":2,"BloodRite":2,"GoodLuck":2,"Handicraft":2,"Tune-Up":2,"Agitator":2,"Artillery":2,"Burst":2,"Coalescence":2,"LatentPower":2,"MaximumMight":2,"PeakPerformance":2,"RapidMorph":2,"Resentment":2,"Resuscitate":2,"SneakAttack":2,"CriticalDraw":2,"Earplugs":2,"GrinderS":2,"HellfireCloak":2,"Mushroomancer":2,"OffensiveGuard":2,"Redirection":2,"StatusTrigger":2,"AdrenalineRush":2,"Ballistics":2,"BladescaleHone":2,"ChargeMaster":2,"CriticalElement":2,"ElementExploit":2,"Focus":2,"Foray":2,"Heroics":2,"MindsEye":2,"PowerProlonger":2,"ProtectivePolish":2,"WallRunner":3,"WirebugWhisperer":2,"Defiance":3,"PoisonAttack":3,"Steadiness":3,"RapidFireUp":1,"CriticalBoost":1,"WeaknessExploit":1,"DefenseBoost":5,"Bloodlust":1,"BlastAttack":2,"BubblyDance":2,"Constitution":2,"Counterstrike":2,"Embolden":2,"EvadeExtender":2,"EvadeWindow":2,"Guard":2,"GuardUp":2,"LoadShells":2,"MarathonRunner":2,"ParalysisAttack":2,"Partbreaker":2,"PunishingDraw":2,"QuickSheathe":2,"SleepAttack":2,"Slugger":2,"SpecialAmmoBoost":2,"SpeedEating":2,"StaminaSurge":2,"TremorResistance":2,"Wide-Range":4,"DragonAttack":4,"FireAttack":4,"IceAttack":4,"IntrepidHeart":2,"ThunderAttack":4,"WaterAttack":4,"Dragonheart":1,"ItemProlonger":3,"BlastResistance":3,"FlinchFree":3,"FreeMeal":3,"HungerResistance":3,"ParalysisResistance":3,"PoisonResistance":3,"RecoverySpeed":3,"SleepResistance":3,"SpeedSharpening":3,"StaminaThief":3,"StunResistance":3,"Windproof":3,"BlightResistance":2,"DivineBlessing":2,"RecoveryUp":2,"ChameleosBlessing":1,"KushalaBlessing":1,"RecoilDown":1,"ReloadSpeed":1,"TeostraBlessing":1,"Fortify":1,"MasterMounter":1,"AffinitySliding":1,"Diversion":1,"HornMaestro":1,"LeapofFaith":1,"MuckResistance":1,"SpiribirdsCall":1,"WallRunnerBoost":1,"BowChargePlus":1,"JumpMaster":1,"QuickBreath":1,"Bludgeoner":1,"Bombardier":3,"Botanist":3,"CarvingPro":1,"DragonResistance":3,"FireResistance":3,"Geologist":3,"IceResistance":3,"Inspiration":1,"ShockAbsorber":1,"ThunderResistance":3,"WaterResistance":3}]}');var r=i(382);let a=!self.origin.includes("github");const o=new Map,n=new Map,l=new Map,c=new Map,u=new Map,d=[],f=["helm","chest","arm","waist","leg"],g=["leg","waist","arm","chest","helm"];let h={},p={0:[],3:[],2:[],1:[]},S=[];for(let e=0,t=0;e<60;e++)!e||e%3||++t,S[e]=t;const k=(e,t)=>e>=t?e:t,R=(e,t)=>e<=t?e:t,m=(e,t)=>{for(let i=0;i<4;i++)t.remainingSlots[i]=k(t.remainingSlots[i]||0,e.remainingSlots[i]);for(let i=0;i<5;i++)t.quriousSkills[i]=k(t.quriousSkills[i]||0,e.quriousSkills[i]);for(const[i,s]of Object.entries(e.armorSkills))t.armorSkills[i]=k(t.armorSkills[i]||0,s)};function B(e,t){let i=0;if(e){for(let i of u.values())i[0]+=-e.decos[i[1]]+t.decos[i[1]];for(let t of e.requestedSkills)l.get(t)[0]+=e.skills[t]}else for(let e of u.values())e[0]+=t.decos[e[1]];h[t.type]=t;for(let e of t.requestedSkills)(l.get(e)[0]-=t.skills[e])>c.get(e).maxLevel&&++i;return i}function P(e,t){if(e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[3]>=t[3]&&e[4]>=t[4])return!0}self.onmessage=e=>{a&&(a=performance.now());const t={sets:[],count:{sets:0,combos:0},stats:{quriousSkills:[0,0,0,0,0],armorSkills:{},remainingSlots:[0,0,0,0]}};let{decos:i,maxLevel:n,qurious:k,pointsPerSlot:R}=s,{skills:v,armors:y}=e.data;for(let[e,t]of v)o.set(e,[-t]),l.set(e,[-t,e]),c.set(e,{qurious:S[k[e]],maxLevel:n[e]});R.forEach(((e,t)=>{let s=[];for(let t in e)o.has(t)&&(s[s.length]=[t,e[t]]);p[t]=s.sort(((e,t)=>k[t[0]]*t[1]-k[e[0]]*e[1]||i[t[0]]-i[e[0]]))}));for(let t=0;t<4;++t)u.set(t,[e.data.charmSlots[t],t]);const D=[0,0,0,0],{setLimiter:b,setBonus:E,charmNeeded:T}=e.data.skillInfo,H=(0,r.p)(e.data.theseCharms);let U=new Map;for(const i of y.helm){B(h.helm,i);for(const i of y.chest)if(!B(h.chest,i))for(const i of y.arm)if(!B(h.arm,i))for(const i of y.waist)if(!B(h.waist,i))e:for(const i of y.leg){if(B(h.leg,i))continue;if(E)for(let e in E)if(!(l.get(e)[0]>=E[e]))continue e;U=new Map;for(let e of f)if(h[e].needsRequestedSkill)for(let t of h[e].requestedSkills)U.has(t)||U.set(t,1);const[...s]=l;let r;g.sort(((e,t)=>h[t].skillLimitation-h[e].skillLimitation||h[t].unBloatedPoints-h[e].unBloatedPoints));t:for(const t of H){if(T)for(let i in T){if("charmNeeded"!==t[0]&&!(l.get(i)[0]>=T[i]))continue t;if(l.get(i)[0]+e.data.theseCharms.charmSkills[i][0][0]<T[i])continue e}let i=[!1,0,"00000"];for(const e of t[1]){let t=!1;for(const a of e[1]){if(i[0]&&i[1]>=a[0]&&P(i[2],e[0]))break;for(let n=0;n<a[1].length;++n){if(M(a[1][n]))continue;let c=a[1][n];const d={decos:[],augments:{},armorSkills:s,charm:[c]};for(const e of l.values())o.get(e[1])[0]=e[0];o.get(c[0][0])[0]-=c[0][1],o.get(c[1][0])[0]-=c[1][1];for(let e of u.values())D[e[1]]=e[0];if(!A(D,d.decos)&&!C(d.augments,b)){if(!r){t=!0;let e=W(d.augments);r={usedSkills:[d],quriousSkills:e,armorSkills:w(d.augments,h),decoArr:u,count:0,remainingSlots:F(D,d.decos,e.slice())}}for(t||(r.usedSkills.push(d),t=!0),++n;n<a[1].length;++n)M(a[1][n])||r.usedSkills[r.usedSkills.length-1].charm.push(a[1][n]);break}if(!U.has(c[0][0])&&!U.has(c[1][0])){i[0]=!0,i[1]=a[0],i[2]=e[0];break}}}}}if(!r)continue e;for(let e of r.usedSkills)r.count+=e.charm.length;++t.count.sets,t.count.combos+=r.count,m(r,t.stats);let a=t.sets.length;if(!(20===a&&t.sets[--a].count>=r.count)){for(;a>0&&t.sets[a-1].count<r.count;)t.sets[a]=t.sets[--a];t.sets[a]=r}}}a&&(console.log(0,(performance.now()-a)/1e3),d.length&&console.log(structuredClone(d))),postMessage({final:t})};const A=(e,t)=>{for(let i of[0,3,2,1])for(const[s,r]of p[i]){if(o.get(s)[0]<r)continue;if(!e[i])break;const a=R(e[i],~~(o.get(s)[0]/r));o.get(s)[0]-=a*r,e[i]-=a,t[t.length]=[s,r,"Slot lvl"+(+i+1),a]}if(n.size)for(let e of n.keys())n.delete(e);for(let e of o.keys())if(o.get(e)[0]>0){if(!c.get(e).qurious)return!0;const t=c.get(e).qurious;n.has(t)||n.set(t,{total:0,skills:new Set}),n.get(t).total+=o.get(e)[0],n.get(t).skills.add(e)}};function M(e){return l.get(e[0][0])[0]+e[0][1]<0||l.get(e[1][0])[0]+e[1][1]<0}const C=(e,t)=>{let i=0;for(let e of n.values())i+=e.total;let[...s]=n.keys(),r=5*t-i;if(r<0)return!0;for(const t of f){let i=h[t];e[i.name]={augs:[i.augs[0],i.augs[1],i.augs[2]],innateSkills:new Set,skillsRemovedCount:-1,quriousPoints:i.startingQuriousPoints,unBloatedPoints:S[i.quriousPoints],type:i.type};for(let t in i.skills)e[i.name].innateSkills.add(t)}e:for(let t of g){let a,l=h[t],u=e[l.name];if(i<=0)continue;let d=6-u.augs.length,f=5-u.innateSkills.size,g=R(d,i),p=d-i;for(;--p>=0||b(g)>u.unBloatedPoints&&--g>0;){if(p<0&&--r<0)return!0;let e=l.fodderSkills[++u.skillsRemovedCount];D(u,e)}if(g){if(f<g)for(let e of l.requestedSkills){if(o.get(e)[0]<=0)continue;const t=c.get(e).qurious;for(;f<g&&o.get(e)[0]>0&&t+b(g-1,t)<=u.unBloatedPoints;)E(e,u,s)||(--g,--i)}if(f<g)for(;g>f;){let e=y(g,u.unBloatedPoints,1===f?0:s[0]);if(e){for(;e[1]--&&!E(e[0],u,s);)--i,--g;if(!g)continue e}else{if(--r<0)return!0;--g,D(u,l.fodderSkills[++u.skillsRemovedCount])}}if(a=v(g,s,u.unBloatedPoints),a[0])for(const e of a[0])E(n.get(e).skills.values().next().value,u,s)||--i}}e:for(const r of g){if(!i||t<4||!s.length)break;let a=e[h[r].name];if(!(a.unBloatedPoints<+s[0]))for(let e=a.augs.length-1;e>=0&&a.unBloatedPoints>0;e--){if(6===a.augs.length&&a.quriousPoints<3||a.quriousPoints<8&&!a.augs[e]["-Skill"]||!a.augs[e]["-Def"])continue e;let t,r,o=a.augs,l=o.length<6?0:o[e]["-Def"]?1:o[e]["-Skill"]?2:void 0;if(void 0===l)continue;let c=s.length-1;t:for(;c>=0;c--)if(!(S[a.quriousPoints-5*l]<s[c]))for(let e of n.get(s[c]).skills)if(a.innateSkills.size<5||a.innateSkills.has(e)){t=s[c],r=e;break t}if(!t)continue e;l&&(a.quriousPoints-=5*l,a.unBloatedPoints=S[a.quriousPoints],o.splice(e,1)),E(r,a,s)||--i}}return s.length};function v(e,t,i){return 2===e?function(e,t){let i=[[],0],s=!1,r=0,a=e.length;for(;!s;){if(++r>=a){if(i[1])return i;s=!0,r=0}const o=e[r];for(let s=r;s<a;s++){const r=e[s];if(o+r>t)break;if(!(o+r<=i[1]||n.get(r).total<1+(o===r))&&(i=[[o,r],o+r],i[1]===t))return i}}return i}(t,i>10?10:i):3===e?function(e,t){let i=[[],0],s=!1,r=0,a=e.length;for(;!s;){if(++r>=a){if(i[1])return i;s=!0,r=0}let o=+e[r];for(let s=r;s<a;s++){let r=+e[s];if(!(n.get(r).total<1+(o===r)))for(let l=s;l<a;l++){let s=e[l];if(o+r+s>t)break;if(!(o+r+s<=i[1]||n.get(s).total<1+(s===o)+(s===r))&&(i=[[o,r,s],o+r+s],i[1]===t))return i}}}return i}(t,i>15?15:i):function(e,t){for(let i=e.length-1;i>=0;--i)if(e[i]<=t)return[[e[i]],e[i]];return[[],0]}(t,i)||[[0],1]}function y(e,t,i){let s=R(5,~~(t/e))-i;for(;s>=i;){if(n.has(s)&&n.get(s).total-n.get(s).skills.size>=e-1)for(let t of n.get(s).skills)if(o.get(t)[0]>=e-(i>0))return 0===i?[t,e]:[t,2];--s}}function D(e,t){t?(e.augs.push({"-Skill":t}),e.quriousPoints+=10):(e.augs.push({"-Def":5}),e.quriousPoints+=5),e.unBloatedPoints=S[e.quriousPoints]}function b(e,t=!1){let i=0;for(let s of n.keys()){const r=R(n.get(s).total-(t==s),e);i+=r*s,e-=r}return i}function E(e,t,i){let s=c.get(e).qurious;if(!t.innateSkills.has(e)){if(5===t.innateSkills.size)return!0;t.innateSkills.add(e)}if(t.unBloatedPoints<s)return a&&console.log(t,t.augs,e),!0;t.quriousPoints-=3*s,t.unBloatedPoints-=s,--o.get(e)[0],0==--n.get(s).total?(n.delete(s),i.splice(i.indexOf(s),1)):0===o.get(e)[0]&&n.get(s).skills.delete(e),t.augs.push({"+Skill":e})}function F(e,t,i){let s=[0,0,0,0];for(let[e,r,a,o]of t){const t=c.get(e).qurious;if(i[t-1]<r)continue;const n=R(o,~~(i[t-1]/r));s[+a[8]-1]<n&&(s[+a[8]-1]=n)}for(let t=3;t>=0;--t)3!==t&&s[t]<s[t+1]?e[t]+=s[t+1]:e[t]+=s[t];return e}function W(e){const t=[0,0,0,0,0];for(const i in e){let s=e[i];if(s.quriousPoints<(6===s.augs.length?8:3)||s.innateSkills?.size>4)continue;let r=0,a=0;const o=5-s.innateSkills.size;for(let e of s.augs)e["-Def"]?++r:e["-Skill"]&&++a;let n=6-s.augs.length,l=--n>=0?0:--r>=0?5:--a>=0?10:"continue";if("continue"===l)continue;let c=1;for(;s.quriousPoints>=l+3*c&&c<=o;){let e=R(5,S[(s.quriousPoints-l)/c]);for(;e--;)++t[e];if(l+=--n>=0?0:--r>=0?5:--a>=0?10:"continue","continue"===l)break;++c}}return t}function w(e,t,i={}){for(const s in e){let r=e[s],a=t[r.type],n=0;for(let e of r.augs)e["-Skill"]&&++n;if(!n||n===a.fodderCount&&r.quriousPoints<5)continue;let l=a.fodderCount-n+R(~~(r.quriousPoints/5),a.fodderCount);for(let e in a.skills)o.has(e)||(i[e]=(i[e]||0)+R(r[e],l))}return i}}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(41);i(382)})();
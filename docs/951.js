(self.webpackChunkmhrdamage=self.webpackChunkmhrdamage||[]).push([[951],{951:(e,t,o)=>{o.r(t),o.d(t,{getSetBuilds:()=>w,getSetRequirements:()=>y,getSkillReq:()=>E,testBuild:()=>C});var s=o(16),i=o(552),r=o(923);const n=JSON.parse('{"AttackBoost":[[3,[2,2,1,1],15],[2,[1,1,1,1],10]],"Agitator":[[4,[2,2,2,2],16],[3,[2,2,1,1],12]],"PeakPerformance":[[3,[2,2,1,1],12],[2,[1,1,1,1],8]],"Resentment":[[4,[2,2,2,2],16],[3,[2,2,1,1],12]],"Resuscitate":[[3,[2,2,1,1],12],[2,[1,1,1,1],8]],"CriticalEye":[[3,[2,2,1,1],15],[2,[1,1,1,1],10]],"CriticalBoost":[[3,[3,3,0,0],15],[2,[2,2,0,0],10]],"WeaknessExploit":[[3,[3,3,0,0],15],[2,[2,2,0,0],10]],"LatentPower":[[5,[3,3,2,2],20],[4,[2,2,2,2],16]],"MaximumMight":[[3,[2,2,1,1],12],[2,[1,1,1,1],8]],"CriticalElement":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"MastersTouch":[[3,[2,2,1,1],15],[2,[1,1,1,1],10]],"FireAttack":[[5,[2,1,1,1],5],[3,[1,1,1,0],3]],"WaterAttack":[[5,[2,1,1,1],5],[3,[1,1,1,0],3]],"IceAttack":[[5,[2,1,1,1],5],[3,[1,1,1,0],3]],"ThunderAttack":[[5,[2,1,1,1],5],[3,[1,1,1,0],3]],"DragonAttack":[[5,[2,1,1,1],5],[3,[1,1,1,0],3]],"PoisonAttack":[[3,[1,1,1,1],6],[3,[1,1,1,1],6]],"ParalysisAttack":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"SleepAttack":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"BlastAttack":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"Handicraft":[[4,[2,2,2,2],16],[3,[2,2,2,1],12]],"RazorSharp":[[3,[2,2,1,1],15],[2,[1,1,1,1],10]],"SpareShot":[[3,[2,2,1,1],15],[2,[1,1,1,1],10]],"ProtectivePolish":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"MindsEye":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"Ballistics":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"Bludgeoner":[[3,[3,3,0,0],0],[2,[2,2,0,0],0]],"Focus":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"PowerProlonger":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"MarathonRunner":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"Constitution":[[5,[3,3,2,2],10],[4,[2,2,2,2],8]],"StaminaSurge":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"Guard":[[5,[3,3,2,0],10],[4,[2,2,2,0],8]],"GuardUp":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"OffensiveGuard":[[3,[2,2,2,1],9],[2,[1,1,1,1],6]],"CriticalDraw":[[3,[2,2,2,1],9],[2,[1,1,1,1],6]],"PunishingDraw":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"QuickSheathe":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"Slugger":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"StaminaThief":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"AffinitySliding":[[1,[1,0,0,0],1],[1,[1,0,0,0],1]],"HornMaestro":[[1,[1,0,0,0],1],[1,[1,0,0,0],1]],"Artillery":[[3,[2,2,1,1],12],[2,[1,1,1,1],8]],"LoadShells":[[2,[1,1,1,1],4],[2,[1,1,1,1],4]],"SpecialAmmoBoost":[[2,[1,1,1,1],4],[2,[1,1,1,1],4]],"NormalRapidUp":[[3,[2,2,2,1],15],[2,[1,1,1,1],10]],"PierceUp":[[3,[2,2,2,1],15],[2,[1,1,1,1],10]],"SpreadUp":[[3,[2,2,2,1],15],[2,[1,1,1,1],10]],"AmmoUp":[[3,[2,2,2,1],15],[2,[1,1,1,1],10]],"ReloadSpeed":[[3,[3,0,0,0],6],[2,[2,0,0,0],4]],"RecoilDown":[[3,[3,0,0,0],6],[2,[2,0,0,0],4]],"Steadiness":[[3,[1,1,1,1],6],[2,[2,0,0,0],4]],"RapidFireUp":[[3,[3,3,3,0],15],[2,[2,2,2,0],10]],"DefenseBoost":[[7,[2,2,1,1],7],[6,[2,1,1,1],6]],"DivineBlessing":[[3,[2,2,1,1],3],[3,[2,2,1,1],3]],"RecoveryUp":[[3,[2,2,1,1],3],[3,[2,2,1,1],3]],"RecoverySpeed":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"SpeedEating":[[3,[2,2,1,1],6],[3,[2,2,1,1],6]],"Earplugs":[[5,[3,3,3,2],15],[4,[2,2,2,2],12]],"Windproof":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"TremorResistance":[[3,[2,2,1,1],6],[3,[2,2,1,1],6]],"BubblyDance":[[3,[2,2,1,1],6],[3,[2,2,1,1],6]],"EvadeWindow":[[5,[3,3,2,2],10],[4,[2,2,2,2],8]],"EvadeExtender":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"FireResistance":[[3,[1,1,1,1],0],[3,[1,1,1,1],0]],"WaterResistance":[[3,[1,1,1,1],0],[3,[1,1,1,1],0]],"IceResistance":[[3,[1,1,1,1],0],[3,[1,1,1,1],0]],"ThunderResistance":[[3,[1,1,1,1],0],[3,[1,1,1,1],0]],"DragonResistance":[[3,[1,1,1,1],0],[3,[1,1,1,1],0]],"BlightResistance":[[3,[2,2,1,1],3],[2,[1,1,1,1],2]],"PoisonResistance":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"ParalysisResistance":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"SleepResistance":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"StunResistance":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"MuckResistance":[[2,[2,0,0,0],2],[2,[2,0,0,0],2]],"BlastResistance":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"Botanist":[[4,[2,1,1,1],0],[4,[2,1,1,1],0]],"Geologist":[[3,[1,1,1,1],0],[3,[1,1,1,1],0]],"Partbreaker":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"GoodLuck":[[3,[2,2,2,1],12],[2,[1,1,1,1],8]],"SpeedSharpening":[[3,[1,1,1,1],3],[2,[2,0,0,0],2]],"Bombardier":[[3,[1,1,1,1],0],[3,[1,1,1,1],0]],"Mushroomancer":[[3,[2,2,2,1],9],[2,[1,1,1,1],6]],"ItemProlonger":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"Wide-Range":[[5,[2,2,1,1],5],[4,[1,1,1,1],4]],"FreeMeal":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"Heroics":[[4,[2,2,2,2],12],[3,[2,2,1,1],9]],"Fortify":[[1,[1,1,0,0],1],[1,[1,1,0,0],1]],"FlinchFree":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"JumpMaster":[[1,[1,1,1,0],0],[1,[1,1,1,0],0]],"CarvingPro":[[1,[1,0,0,0],0],[1,[1,0,0,0],0]],"HungerResistance":[[3,[1,1,1,1],3],[3,[1,1,1,1],3]],"LeapofFaith":[[1,[1,0,0,0],1],[1,[1,0,0,0],1]],"Diversion":[[1,[1,0,0,0],1],[1,[1,0,0,0],1]],"MasterMounter":[[1,[1,1,0,0],1],[1,[1,1,0,0],1]],"WirebugWhisperer":[[3,[2,1,0,0],6],[3,[2,1,0,0],6]],"WallRunner":[[3,[1,1,1,1],6],[3,[1,1,1,1],6]],"Counterstrike":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"RapidMorph":[[3,[2,2,1,1],12],[2,[1,1,1,1],8]],"HellfireCloak":[[4,[2,2,2,2],12],[3,[2,2,2,1],9]],"Coalescence":[[3,[2,2,1,1],12],[2,[1,1,1,1],8]],"Redirection":[[2,[1,1,1,1],6],[1,[1,1,1,0],3]],"SpiribirdsCall":[[1,[1,0,0,0],1],[1,[1,0,0,0],1]],"ChargeMaster":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"Foray":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"Tune-Up":[[2,[1,1,1,1],8],[1,[1,1,1,0],4]],"GrinderS":[[3,[2,2,2,1],9],[2,[1,1,1,1],6]],"BladescaleHone":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"WallRunnerBoost":[[1,[1,0,0,0],1],[1,[1,0,0,0],1]],"Burst":[[3,[2,2,1,1],12],[2,[1,1,1,1],8]],"ChameleosBlessing":[[4,[4,0,0,0],8],[3,[3,0,0,0],6]],"KushalaBlessing":[[4,[4,0,0,0],8],[3,[3,0,0,0],6]],"TeostraBlessing":[[4,[4,0,0,0],8],[3,[3,0,0,0],6]],"Dragonheart":[[4,[4,4,4,4],12],[3,[3,3,3,3],9]],"BloodRite":[[3,[2,2,2,1],12],[2,[1,1,1,1],8]],"Bloodlust":[[3,[3,3,3,3],12],[2,[2,2,2,2],8]],"Dereliction":[[2],[1]],"Furious":[[3,[0,0,0,0],9],[2,[0,0,0,0],6]],"MailofHellfire":[[3,[0,0,0,0],9],[2,[0,0,0,0],6]],"SneakAttack":[[3,[2,2,1,1],12],[2,[1,1,1,1],8]],"AdrenalineRush":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"ElementExploit":[[3,[2,2,1,1],9],[2,[1,1,1,1],6]],"StatusTrigger":[[3,[2,2,2,1],9],[2,[1,1,1,1],6]],"Defiance":[[5,[3,1,1,1],10],[4,[2,1,1,1],8]],"Guts":[[2,[0,0,0,0],10],[1,[0,0,0,0],5]],"Embolden":[[3,[2,2,1,1],6],[2,[1,1,1,1],4]],"IntrepidHeart":[[2,[1,1,1,0],4],[1,[1,0,0,0],2]],"BuildupBoost":[[3,[0,0,0,0],12],[2,[0,0,0,0],8]],"Berserk":[[2],[1]],"Strife":[[3,[0,0,0,0],9],[2,[0,0,0,0],6]],"WindMantle":[[3,[0,0,0,0],9],[2,[0,0,0,0],6]],"PowderMantle":[[3,[0,0,0,0],9],[2,[0,0,0,0],6]],"Frostcraft":[[3,[0,0,0,0],12],[2,[0,0,0,0],8]],"DragonConversion":[[3,[0,0,0,0],12],[2,[0,0,0,0],8]],"FrenziedBloodlust":[[3,[0,0,0,0],9],[2,[0,0,0,0],6]]}');let l={};const a=document.getElementById("dropWeapon"),c=document.getElementById("dropWeaponType");let u=0,d=0,m=[];var f=0;let h=0,g=new Map,p=!window.location.origin.includes("github"),k=0;const S=e=>{const t=[];for(let o of e)for(let e of o.charm)t.push(`${e[0][0]}: ${e[0][1]} & ${e[1][0]}: ${e[1][1]}`);return t},E=(e=[])=>(document.querySelectorAll(".buildSkills>div>.skill").forEach((t=>{t.selectedIndex>0&&e.push([t.id,t.selectedIndex])})),e),y=(e=window.info.types)=>{const t={},o={};return document.querySelectorAll("#searcherSkills>div>output").forEach((s=>{const i=s.className.split(" ")[1];t[i]=-s.textContent.match(/(?<=Lv-)\d/)[0],o[i]={lvl:e.decos[i]??5,lvl4:e.lvl4[i]??0,qurious:~~((e.qurious[i]??(window.info.charms[i]||e.decos[i]?30:60))/3)};let r=0;5===o[i].lvl&&++r,o[i].qurious>5&&++r,window.info.charms[i]&&++r,3===r||2===r&&!n[i]?(o.setBonus||(o.setBonus={}),o.setBonus[i]=-t[i]):2===r&&(o.charmNeeded||(o.charmNeeded={}),o.charmNeeded[i]=-t[i],o.charmSkillPoints=n[i][0])})),{skills:Object.fromEntries(Object.entries(t).sort(((e,t)=>o[t[0]].lvl-o[e[0]].lvl||o[e[0]].qurious-o[t[0]].qurious))),skillInfo:o}},B=(e,t)=>e>=t?e:t;function v(){for(let e=0;e<5;e++)m[e]=new Worker("./setBuildWorker.js");m.forEach((e=>{e.addEventListener("message",(e=>{--h,e.data.final.sets.length&&(u+=e.data.final.count.combos,k+=e.data.final.count.sets,g.size<100&&(e=>{for(const t of e){if(g.size<100){g.set(g.size,t);const e=S(t.usedSkills);let o='<button type="button" aria-pressed="false" class="equipBuild">Equip Build</button>';const s=Object.keys(t.usedSkills[0].augments);for(let e=0;e<5;e++)o+=`<output class="armorImg ${(0,r.VW)()[e]}"></output><span>${s[e]}</span>`;let i="";e.forEach((e=>{i+=`<option value="${e}">${e}</option>`})),o+=`<output class="armorImg charm"></output><select class="armorCharm" title="charmSkill1">${i}</select>`;const n=document.createElement("div");n.classList.add("setResult"),n.innerHTML+=o,o="",document.querySelector(".grid").appendChild(n)}let e=0;for(let t of g.values())t.count&&(e+=t.count);document.getElementById("setOutput").textContent=`Displayed ${Math.min(100,g.size)} Builds / ${e.toLocaleString()} Combinations`}})(e.data.final.sets));let t=e.data.final.stats;for(let e=0;e<4;e++)l.remainingSlots[e]=B(l.remainingSlots[e]||0,t.remainingSlots[e]);for(let e=0;e<5;e++)l.quriousSkills[e]=B(l.quriousSkills[e]||0,t.quriousSkills[e]);for(const[e,o]of Object.entries(t.armorSkills))l.armorSkills[e]=B(l.armorSkills[e]||0,o);h||((e=>{let t="";e.forEach((e=>{0!=e[1]&&(t+=`<button textContent="${e[0]}">${e[0].replace(/(?<=[a-z])([A-Z])(?![A-Z])/g," $1")} +${+e[1]}</button>`)})),document.getElementById("temp")&&document.getElementById("temp").remove(),document.querySelector(".extraSkills").innerHTML+=t,document.getElementById("extraOutput").textContent=`Found ${k.toLocaleString()} Builds / ${u.toLocaleString()} Combinations`,window.location.href.includes("github")||(console.log((performance.now()-d)/1e3),console.log(g))})(((e=window.info.types)=>{const{skills:t}=y(),{armorSkills:o,remainingSlots:s,quriousSkills:i}=l;for(let t=0;t<4;++t)if(s[t])for(const[i,r]of Object.entries(e.decoLevels[t]))o[i]=Math.max(o[i]||0,r*s[t]);Object.entries(e.qurious).forEach((([e,t])=>{i[t/3-1]&&(o[e]=Math.max(o[e]||0,i[t/3-1]))}));const r=[];return Object.entries(o).forEach((([o,s])=>{if(isNaN(o))if(t[o]+ +s>0&&e.maxLevel[o]>0){const i=(e.maxLevel[o]||window.info.skills[o].length-1)+t[o];r.push([o,Math.min(+s,i)])}else t[o]||!e.maxLevel[o]&&!window.info.skills[o]||r.push([o,Math.min(+s,e.maxLevel[o]||window.info.skills[o].length-1)])})),r.sort()})()),u||(document.getElementById("setOutput").textContent="No Results Found",document.querySelectorAll(".grid>div").forEach((e=>e.remove()))))}))}))}const w=(e=10)=>{if((h||p)&&(d=performance.now(),m.length))for(let e of m)e.terminate();h=5,v();const t=y();t.charmSlots=window.info[c.value].weapons[a.value].decos.slice(),document.querySelectorAll(".charmSlot").forEach((e=>{e.selectedIndex>0&&++t.charmSlots[e.selectedIndex-1]})),t.theseCharms={charms:{},charmSkills:{},skill1Names:[],skill2Names:[]};for(let e of Object.entries(t.skills))if(window.info.charms[e[0]]){t.theseCharms.charmSkills[e[0]]=window.info.charms[e[0]];for(let o=0;o<2;++o)(window.info.charms[e[0]][o][0]<=-e[1]&&(!window.info.types.qurious[e[0]]||!window.info.types.decos[e[0]])||-e[1]>2-o&&window.info.types.qurious[e[0]]>3)&&t.theseCharms[`skill${o+1}Names`].push(e[0])}t.armors=function(e,t,o){let s=JSON.parse(JSON.stringify(window.info.armor));const i={helm:[],waist:[],chest:[],arm:[],leg:[]},n=[2.5,4.25,4.25,7];for(let e=0;e<5;++e)(0,r.VW)().forEach((e=>{s[e]=s[e].filter((e=>"MaleOnly"!==e.sex))}));return(0,r.VW)().forEach((r=>{s[r].forEach((s=>{if(!s)return;const l={},a=s.skills;if(13!==s.quriousTable){let e,t=-1;for(let[o,i]of Object.entries(s.decoAugments)){if(++t,o>3)break;0==o||3===o&&t<2||(e=[+o,i[1]])}if(e){const[t,o]=e;l.decos=o,l.augs=[{"+Slots":-6*+t}],l.quriousPoints=s.quriousPoints-6*t}}else 13===s.quriousTable&&(l.decos=[1,1,0,1],l.quriousPoints=0,l.augs=[{def:5},{def:5},{def:5},{def:5},{"+Slots":-18},{"+Slots":-12}]);if(l.augs||(l.decos=s.decos,l.augs=[],l.quriousPoints=s.quriousPoints),e.StormSoul>3){const e=4===document.getElementById("StormSoul").selectedIndex?1:2;for(const o of a)t[o].qurious<6&&(a[o]+=e)}l.fodderSkills=[],l.fodderCount=0;let c=l.decos[0]*n[0]+l.decos[1]*n[1]+l.decos[2]*n[2]+l.decos[3]*n[3];for(const[o,i]of Object.entries(a))if(e[o])e[o]?((t[o].setBonus||t[o].charmNeeded)&&(c+=15*Math.min(-1*e[o],a[o])),c+=Math.min(-e[o],a[o])*(20===t[o].qurious?4:t[o].qurious/3)):13===s.quriousTable||l.fodderCount||(l.fodderCount=0);else{l.fodderCount+=i;for(let e=0;e<i;e++)l.fodderSkills.push(o)}if(13===s.quriousTable)l.unBloatedPoints=0,l.armorRating=c;else{let e=[],t=3;for(;t--;)l.augs[t]?e=e.concat(l.augs[0]):l.fodderCount-t>0?(e.push({"-Skill":l.fodderSkills.pop()}),l.quriousPoints+=10):(e.push({"-Def":5}),l.quriousPoints+=5);l.augs=e,l.unBloatedPoints=~~(l.quriousPoints/3),l.armorRating=c,l.armorRating=c+l.unBloatedPoints}const u=(e,t=!0)=>{l.name=s.name,l.type=r,l.skills=s.skills,t?(i[r].pop(),i[r].splice(e,0,l)):i[r].push(l)};for(let e=0;e<i[r].length;e++)if(l.armorRating>i[r][e].armorRating)return void u(e);i[r].length<o&&u(i[r].length-1,!1)}))})),Object.values(i).forEach((t=>t.forEach((t=>{t.skillLimitation=5-Object.keys(t.skills).length-(6-t.augs.length),t.requestedSkills=Object.keys(t.skills).filter((t=>e[t])),t.skillsRemovedCount=t.fodderCount<3?t.fodderCount:3,t.startingQuriousPoints=t.quriousPoints,delete t.armorRating})))),i}(t.skills,t.skillInfo,e),t.skillInfo={charmNeeded:t.skillInfo.charmNeeded,charmSkillPoints:t.skillInfo.charmSkillPoints,setBonus:t.skillInfo.setBonus,setLimiter:4-document.getElementById("skillsLimit").selectedIndex},t.skills=Object.entries(t.skills).sort(((e,t)=>window.info.types.qurious[e[0]]-window.info.types.qurious[t[0]]));let o=t.armors.helm.splice(0),s=~~(o.length/5);g.clear();for(const e of m)t.armors.helm=o.splice(0,s),e.postMessage(t);document.getElementById("setReturn").classList.remove("augInvis"),document.querySelectorAll(".extraSkills>button").forEach((e=>e.remove())),document.getElementById("temp")&&document.getElementById("temp").remove(),document.querySelector(".extraSkills").innerHTML+="<P2 id='temp' style='font-size:18px !important; height:15em !important;'>Searching...</P2>",document.getElementsByClassName("grid")[0].innerHTML="",l={remainingSlots:[0,0,0,0],armorSkills:{},quriousSkills:[0,0,0,0,0]},u=0,k=0};let b=0,R="";document.addEventListener("keypress",(e=>{e.key===["t","e","s","t"][Math.min(3,b)]&&++b<3||("Enter"===e.key&&b>=3?(C("f"!==R),R="",b=0):/t|f/.test(e.key)&&b>=3?R=e.key:b<3&&(b=0))})),document.addEventListener("keypress",(e=>{e.key===["b","u","i","l","d"][Math.min(5,f)]&&++f<5||("Enter"===e.key&&f>=5?(q(),f=0):f<5&&(f=0))}));const q=()=>{[["AdrenalineRush",3],["Bloodlust",3],["BloodRite",3],["Burst",3],["ChargeMaster",3],["Coalescence",1],["CriticalBoost",3],["CriticalElement",3],["Defiance",3],["DragonAttack",5],["ElementExploit",3],["Focus",2],["Frostcraft",3],["IntrepidHeart",2],["MailofHellfire",3],["MindsEye",3],["Partbreaker",3],["ProtectivePolish",3],["Slugger",1],["StunResistance",3],["WeaknessExploit",3],["WindMantle",1],["WirebugWhisperer",3]].forEach((e=>(0,i.Nb)(e[0],e[1]))),w(15),console.log(g)},C=(e=!0)=>([["PeakPerformance",3],["Coalescence",3],["CriticalEye",7],["CriticalBoost",3],["MaximumMight",3],["RecoilDown",3],["ReloadSpeed",3],["RapidFireUp",3],["PierceUp",3],["Burst",1],["Agitator",5],["AttackBoost",7],["AmmoUp",2],["SpareShot",3],["WeaknessExploit",3],["Tune-Up",1],["Bloodlust",1]].forEach((e=>(0,i.Nb)(e[0],e[1]))),w(15),g);document.getElementById("startSearch").addEventListener("click",(()=>w(10))),document.getElementById("normalSearch").addEventListener("click",(()=>w())),document.getElementById("extendedSearch").addEventListener("click",(()=>w(15))),document.querySelector(".grid").addEventListener("mousedown",(e=>{if("BUTTON"!==e.target.tagName)return;const t=Object.values(document.querySelectorAll("div.grid > div.setResult")).indexOf(e.target.parentElement);if(!g.has(t))return;const o=g.get(t);let r=e.target.parentElement.lastElementChild.selectedIndex,n=0;for(let e of o.usedSkills){if(r<e.charm.length)break;++n,r-=e.charm.length}let l=o.usedSkills[n],a=l.charm[r];if((0,s.dj)(a),0!==r){let e=Object.fromEntries(l.charm[0]);if(e[a[0][0]]){let t=Math.min(e[a[0][0]],a[0][1]);e[a[0][0]]-=t,a[0][1]-=t}if(e[a[1][0]]){let t=Math.min(e[a[1][0]],a[0][1]);e[a[1][0]]-=t,a[1][1]-=t}for(let[t]of a)if(a[1])for(let o of l.decos){if(!a[1])break;if(o[0]===t&&o[1]<=a[1])for(let t in e)if(e[t]>=o[1]){let s=t;o[0]=s,e[s]-=o[1],a[1]-=o[1];break}}for(let[t,o]of a){if(!o)continue;let s=[];for(let e of Object.values(l.usedSkills.augments))s=s.concat(e);for(;o-- >0;){let i=s.find((e=>e["-Skill"]===t));i||console.log("error finding augment to replace");for(let t in e)if(e[t]>0){i["-Skill"]=t,--e[t],--o;break}}}}(0,s.qy)(l.augments),(0,s.Cj)((0,s.G_)(l.decos)),document.getElementById("setReturn").classList.add("augInvis"),(0,i.TG)(),document.querySelectorAll(".extraSkills>button").forEach((e=>e.remove())),document.querySelectorAll(".grid>div").forEach((e=>e.remove())),(0,s.to)(),(0,i.TG)(),p&&console.log(JSON.parse(JSON.stringify(l))),g.clear()}))}}]);
{"version":3,"file":"index.js","mappings":"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","sources":["webpack://MHRDamage/./srcfiles/armorFunctions.js","webpack://MHRDamage/./srcfiles/addSkills.js","webpack://MHRDamage/./srcfiles/backup.js","webpack://MHRDamage/./srcfiles/eventListener.js","webpack://MHRDamage/./srcfiles/setCreation.js","webpack://MHRDamage/webpack/bootstrap","webpack://MHRDamage/webpack/runtime/define property getters","webpack://MHRDamage/webpack/runtime/hasOwnProperty shorthand","webpack://MHRDamage/webpack/startup"],"sourcesContent":["import {\n  getSelectedDecoSkills,\n  getCurrentArmorSkills,\n  getArmorTypes,\n  dataCompile,\n  addSpaces,\n  getGrade,\n  updateOldDropdownSelectedIndex\n} from \"./backup.js\";\nexport function armorSelect() {\n  if (!window.info.armor) return;\n  for (const [armorType, armors] of Object.entries(window.info.armor)) {\n    let option = \"\";\n    let index = -1;\n    for (const piece of armors) {\n      option += `<option value=${++index}>${piece.name}</option>`;\n    }\n    document.getElementById(armorType).innerHTML = option;\n  }\n}\nexport const updateSelectedSkillsDisplay = () => {\n  const selectedSkills = getSelectedDecoSkills();\n  const currentArmorSkills = getCurrentArmorSkills(selectedSkills);\n  const sortedArmorSkills = Object.entries(currentArmorSkills).sort();\n  const equippedSkillDisplay = document.querySelector(\"#EquippedSkillDisplay>output\");\n  let skillsString = \"\";\n  for (const [name, value] of sortedArmorSkills) {\n    skillsString += `<button type=\"button\" aria-pressed=\"false\" onclick=\"this.textContent = this.textContent === \n'Active' ? 'Inactive' : 'Active'\">Active</button><output>${addSpaces(name)}: ${+value}</output>`;\n    if (document.querySelector(`select#${name}`)) {\n      document.querySelector(`select#${name}`).selectedIndex = +value;\n    }\n  }\n  equippedSkillDisplay.innerHTML = skillsString;\n};\ndocument.querySelectorAll(\"select.augmentType\").forEach(select => {\n  // updates available augment selections when .augType is changed\n  select.addEventListener(\"change\", e => {\n    // if (e.target !== window.event?.target) return;\n    changeDropdownOptions(e.target);\n    e.target.nextElementSibling.selectedIndex = 0;\n    startValidation(e.target);\n\n    // } else {\n    // let tempVal = e.target.selectedIndex;\n    // updateAugmentOptions(e.target);\n    // if (tempVal > e.target.selectedIndex && e.target.selectedIndex <= 0) {\n    // e.target.selectedIndex = tempVal;\n    // e.target.selectedOptions[0]?.classList?.remove(\"augInvis\");\n    // e.target.selectedOptions[0].disabled = false;\n    // }\n  });\n});\nexport const startValidation = target => {\n  if (target.previousElementSibling?.selectedIndex < 1) {\n    Object.values(target.children).forEach(x => (x.disabled = true));\n    // if()e.target.nextElementSibling.selectedIndex = 0;\n  } else {\n    Object.values(target.children).forEach(x => (x.disabled = false));\n  }\n  // validator(target.parentElement);\n  updateSelectedSkillsDisplay();\n\n  // console.table({ out: [target.selectedOptions[0].textContent, target.selectedIndex] });\n  // } else {\n  // updateAugmentOptions(e.target);\n  // }\n  const type = target.parentElement.id\n    ? target.parentElement.id.slice(0, -7)\n    : target.parentElement.parentElement.id.slice(0, -7);\n  validator(type);\n  getArmorsDecoArrNSkillsObj([type]);\n  updateSelectedSkillsDisplay();\n};\nexport function augmentEventHandler(target, temp, pass = false) {\n  // console.log(performance.now() - window.info.time?.augments);\n  if (!pass && performance.now() - window.info.time?.augments < 100) {\n    console.log(performance.now() - window.info.time?.augments);\n    window.info.time.augments = performance.now();\n    return;\n  }\n  window.info.time.augments = performance.now();\n  // if (e.target.classList.contains(\"augmentType\")) {\n  changeDropdownOptions(target, temp);\n  let i = -1;\n  for (let option of Object.values(target.options)) {\n    ++i;\n    if (option.textContent.includes(temp)) {\n      target.selectedIndex = i;\n      break;\n    }\n  }\n}\n\nexport const validator = (armorType, value = 0) => {\n  // setArmorSkillsDisplay([armorType]);\n  const armor = getArmor(armorType);\n  let outputs = Object.values(document.querySelectorAll(`section.${armorType} .skillDiv>output`)).filter(\n    el => el.textContent\n  );\n\n  const skillOutput = outputs.map(thisOutput => {\n    if (+thisOutput.textContent.slice(-3) < 0) {\n      return Object.values(document.querySelectorAll(`#${armorType}Qurious .augment`)).filter(\n        augSelect => !augSelect.selectedOptions[0]?.textContent.includes(thisOutput.textContent.slice(0, -3).trim())\n      );\n    }\n  });\n\n  skillOutput.forEach(el => {\n    if (el) {\n      el[el.length - 1].selectedIndex = -1;\n      el[el.length - 1].previousSibling.selectedIndex = -1;\n      // setArmorSkillsDisplay([armorType]);\n    }\n  });\n  value = armor.quriousPoints;\n  for (let i = 0; i < 6; i++) {\n    const thisAugment = document.querySelectorAll(`section.${armorType} .augment`)[i];\n    if (value + +thisAugment.value < 0) {\n      thisAugment.selectedIndex = -1;\n      document.querySelectorAll(`section.${armorType} select.augmentType`)[i].selectedIndex = -1;\n    }\n    value += +thisAugment.value;\n  }\n  updateAugmentPointsRemaining(armorType, value, armor.quriousPoints);\n\n  getArmorsDecoArrNSkillsObj([armorType]);\n  getRemainingPoints(armorType);\n  checkArmorsDef(armorType);\n  return value;\n};\n\nconst getUsedDecoArr = usedAugments => {\n  const decos = [[], [], [], []];\n  for (let [skillName, pointsPer, augmentType, timesUsed] of usedAugments) {\n    if (!augmentType.includes(\"Slot lvl\")) break;\n    const level = augmentType.slice(-1) - 1;\n    while (timesUsed--) {\n      decos[level].push(addSpaces(skillName));\n    }\n  }\n  return decos;\n};\nexport const setAugmentAuto = (armor, augTypeDropdowns) => {\n  let dropdownPointer = 0;\n  armor.augs.forEach(augment => {\n    const augTypeDropdown = augTypeDropdowns[dropdownPointer];\n    const augmentDropdown = augTypeDropdown.nextElementSibling;\n    let [augType, aug] = Object.entries(augment)[0];\n    switch (augType) {\n      case \"-Def\":\n        augTypeDropdown.selectedIndex = 1;\n        aug = \" -12 Def\";\n        break;\n      case \"-Skill\":\n        augTypeDropdown.selectedIndex = 2;\n        break;\n      case \"+Skill\":\n        augTypeDropdown.selectedIndex = 4;\n        break;\n      case \"+Slots\":\n        augTypeDropdown.selectedIndex = 3;\n        aug = `+${aug / -6} Slot`;\n        break;\n      default:\n        return;\n    }\n    augmentEventHandler(augmentDropdown, addSpaces(aug), true);\n    dropdownPointer++;\n  });\n  validator(armor.type);\n};\n\nconst setUsedDecorations = decos => {\n  for (let j = 0; j < 4; ++j) {\n    let lvl = Object.values(document.querySelectorAll(`.lvl${j + 1}:not(.augInvis)+select`));\n    for (let i = 0; i < decos[j].length; ++i) {\n      lvl[i].selectedIndex = Object.values(lvl[i].options)\n        .map(x => x.text.slice(0, -3))\n        .indexOf(decos[j][i]);\n      // for (let k = 0; k < elDeco.length; k++) {\n      // if (elDeco[k].textContent.includes(decos[j][i]) && +elDeco[k].value === j + 1) {\n      // elDeco[k].selectedIndex = k;\n      // break;\n      // }\n      // }\n    }\n\n    // document.querySelectorAll(\".decoDisplay img\").forEach((img) => {\n    // const slot = img.nextElementSibling;\n    // const slotLvl = img.className.match(/(?<=lvl)\\d/)[0] - 1;\n    // let skillIndex = decos[slotLvl].length;\n    // while (skillIndex--) {\n    // for (let i = 0; i < slot.childElementCount && decos[slotLvl][0]; ++i) {\n    // if (!slot.options[i].textContent.includes(decos[slotLvl][skillIndex])) continue;\n    // slot.selectedIndex = i;\n    // decos[slotLvl].pop();\n    // break;\n    // }\n    // }\n    // });\n  }\n};\nexport const setAugmentDropdown = (select, text) => {\n  if (select === null) return;\n  for (let i = 0; i < select.childElementCount; i++) {\n    if (select.children[i].textContent.includes(text)) {\n      select.selectedIndex = i;\n      getArmorsDecoArrNSkillsObj([select.id]);\n      return;\n    }\n  }\n};\nconst setCharmSelects = charm => {\n  const skillArray = Object.keys(charm);\n\n  const charmSelects = document.querySelectorAll(\"select.charm\");\n  for (let i = 0; i < skillArray.length; i++) {\n    const select = charmSelects[i];\n    for (let j = 0; j < select.options.length; j++) {\n      if (select.options[j].textContent.includes(addSpaces(skillArray[i]))) {\n        select.selectedIndex = j;\n        setCharmsAvailableDecoSlots(select);\n        break;\n      }\n    }\n  }\n};\nconst resetAugmentSelections = armorType => {\n  document\n    .querySelectorAll(`#${armorType}Qurious select`)\n    .forEach(select => (select.selectedIndex = select.classList.contains(\"augmentType\") ? 0 : -1));\n  updateOldDropdownSelectedIndex();\n};\ndocument.querySelectorAll(\"section.armorDisplay\").forEach(x =>\n  x.addEventListener(\"change\", e => {\n    if (e.target.tagName === \"SELECT\") {\n      updateSelectedSkillsDisplay();\n    }\n  })\n);\nexport const equipBuild = (set, charm) => {\n  const { armors: theseArmors, usedSkills: usedSlots } = set;\n  // sets both the charms selected Skills, and usable slots\n  setCharmSelects(charm);\n  for (const [armorName, armorStats] of theseArmors) {\n    if (armorName < 0) continue;\n    // sets the selected armors and resets the skills skills and decos\n    setAugmentDropdown(document.getElementById(armorStats.type), armorName);\n    resetAugmentSelections(armorStats.type);\n    getArmorsDecoArrNSkillsObj([armorStats.type]);\n    getRemainingPoints(armorStats.type);\n  }\n  for (const armor of theseArmors) {\n    const augmentTypeDropdown = document.querySelectorAll(`#${armor[1].type}Qurious .augmentType`);\n    // resets and sets the augmented type dropdown and augment dropdown\n    setAugmentAuto(armor[1], augmentTypeDropdown);\n    // validate this card and update the skills and points displayed\n    validator(armor[1].type);\n  }\n  // }\n  // document.getElementById(\"damage\").classList.remove(\"augInvis\");\n  setUsedDecorations(getUsedDecoArr(usedSlots));\n  updateSelectedSkillsDisplay();\n  dataCompile();\n  // getArmorsDecoArrNSkillsObj();\n  // setTimeout(async() => {\n};\n// export const getBuildInfo = (target) => {\n// retrieves information for\n// const index = Object.values(document.querySelectorAll(\"div.grid>div\")).indexOf(target.parentElement);\n// const index2 = document.querySelector(`div.grid>div:nth-child(${index + 1})>div>select`).selectedIndex;\n// return {\n// setSkills: GlobalMap.get(index).newSkills,\n// set: GlobalMap.get(index).sets[index2],\n// };\n// };\n\nexport function setUsedDecos(target) {\n  [\"lvl4\", \"lvl3\", \"lvl2\", \"lvl1\"].forEach(lvl => {\n    const decosUsed = target.usedSkills.filter(skills => skills[2].includes(lvl));\n    const theseSelects = document.querySelectorAll(`.${lvl}:not(\".augInvis\")`);\n    for (let j = 0; j < decosUsed.length; j++) {\n      for (let k = 0; k < Object.values(theseSelects[j].children).length; ) {\n        if (\n          theseSelects[j].children[k].value <= lvl &&\n          theseSelects[j].children[k].textContent.includes(\n            decosUsed[j][0].replace(/(?<=[a-z])([A-Z])(?![A-Z])/g, \" $1\")\n          )\n        ) {\n          theseSelects[j].selectedIndex = k;\n          break;\n        }\n      }\n    }\n  });\n}\n\n// document\n// .querySelectorAll(`#${parent.id}>select:nth-child(n+${startIndex})`)\n// .forEach(x => (x.selectedIndex = -1));\nexport const hideShowMenu = target => {\n  // augment/skill menus\n  const id = target.className.split(\" \")[0];\n  if (target.className.includes(\"inc\")) {\n    document.getElementById(`${id}Qurious`)?.classList.remove(\"augInvis\");\n  } else {\n    document.getElementById(`${id}Qurious`).classList.add(\"augInvis\");\n  }\n};\nexport const setCharmsAvailableDecoSlots = (target = undefined) => {\n  const skill1 = document.getElementById(\"charmSkill1\");\n  const skill2 = document.getElementById(\"charmSkill2\");\n  // prevents the same skill from being selected twice\n  if (skill1.selectedOptions[0].textContent.slice(0, -3) === skill2.selectedOptions[0].textContent.slice(0, -3)) {\n    skill2.selectedIndex = 0;\n  }\n  let decoArr;\n  const grade = getGrade(skill2?.value, skill1?.value);\n  if (target?.value) {\n    if (grade === target.value) return;\n    document.getElementById(`${target.id.slice(0, 5)}Decos`).value = grade;\n  }\n  if (document.getElementById(\"slot1\").selectedIndex === 4) {\n    decoArr = [4, 0, 0];\n  } else {\n    switch (grade) {\n      case \"S\":\n        decoArr = [\n          Math.min(2, document.getElementById(\"slot1\").selectedIndex),\n          Math.min(1, document.getElementById(\"slot2\").selectedIndex),\n          Math.min(1, document.getElementById(\"slot3\").selectedIndex)\n        ];\n\n        break;\n      case \"A\":\n        decoArr = [\n          Math.min(3, document.getElementById(\"slot1\").selectedIndex),\n          Math.min(1, document.getElementById(\"slot2\").selectedIndex),\n          Math.min(1, document.getElementById(\"slot3\").selectedIndex)\n        ];\n\n        break;\n      default:\n        decoArr = [\n          Math.min(3, document.getElementById(\"slot1\").selectedIndex),\n          Math.min(2, document.getElementById(\"slot2\").selectedIndex),\n          Math.min(1, document.getElementById(\"slot3\").selectedIndex)\n        ];\n\n        break;\n    }\n  }\n  setDecoDisplay(\"charm\", decoArr);\n};\n// const onChangeQurious = target => {\n// if (target.className === 'augmentType') {\n// \tsetAugmentPt1(target);\n// \tgetRemainingPoints(target.parentElement);\n// \treturn;\n// }\n// \tif (target.className.includes('augment')) {\n// \t\tgetRemainingPoints(target.parentElement);\n// \t\tsetAugmentPt1(target);\n// \t}\n// };\n// document.addEventListener('change', e => {\n// \tif (e.target.className === `${e.target.id} armor`) {\n// \t\tsetSkillsDisplay(window.info.armor[e.target.id]);\n// \t\tresetPoints(helm.parentElement.lastElementChild);\n// \t}\n// });\nconst getArmor = type => ({\n  ...window.info.armor[type][document.getElementById(type).value]\n});\nexport const getRemainingPoints = (type, value = 0) => {\n  if (!type) return;\n  const armor = getArmor(type);\n  let parent = document.getElementById(`${type}Qurious`);\n\n  value += armor.quriousPoints;\n  const augmentDropdowns = document.querySelectorAll(`#${type}Qurious .augment`);\n  const augmentTypeDropdowns = document.querySelectorAll(`#${type}Qurious .augmentType`);\n  for (let i = 0; i < 6; i++) {\n    if (value + +augmentDropdowns[i].value.match(/[+-]\\d+/) < 0) {\n      augmentDropdowns[i].selectedIndex = 0;\n      augmentTypeDropdowns[i].selectedIndex = 0;\n    }\n    value += +augmentDropdowns[i].value.match(/[+-]\\d+/);\n  }\n  updateAugmentPointsRemaining(type, value, armor.quriousPoints);\n\n  return value;\n};\nexport const setArmorsDisplayedSkills = (armorType, skillsObj) => {\n  [2, 3, 4, 0, 1].forEach((order, index) => {\n    const output = document.querySelectorAll(`section.${armorType} .skillDiv>output`)[order];\n    const newIndex = order[index];\n    if (!Object.keys(skillsObj)[index]) {\n      output.textContent = \"\";\n      output.parentElement.style.display = \"none\";\n      output.nextElementSibling.style.display = \"none\";\n      return;\n    }\n    output.textContent = addSpaces(Object.entries(skillsObj)[index].join(\" +\"));\n    output.parentElement.style.display = \"grid\";\n    output.nextElementSibling.style.display = \"\";\n  });\n}; // sets the Skills displayed for the armors.\n\nexport const getArmorsDecoArrNSkillsObj = (armorTypes = getArmorTypes()) => {\n  const decoArr = [0, 0, 0];\n  Object.values(armorTypes).forEach(armorType => {\n    if (armorType === \"\") return;\n    if (!document.getElementById(armorType)) {\n      return;\n    }\n    const thisArmor = getArmor(armorType);\n    const augSkills = { ...thisArmor.skills };\n    const augmentTypeSelects = document.querySelectorAll(`#${armorType}Qurious select.augmentType`);\n    const augmentSelects = document.querySelectorAll(`#${armorType}Qurious select.augment`);\n    let k = 5;\n    let i = 0;\n    // reformat decoArr from highest to lowest and use the index+1 for the value\n    while (i < 4 && k--) {\n      // starting at the end of the array\n      let temp = thisArmor.decos[k];\n      // for each marker found\n      while (--temp >= 0) {\n        // sets the index to k+1 since 0 needs to be accommodated for in the new arr\n        decoArr[i] = k + 1;\n        ++i;\n      }\n    }\n    // parent[i]=== this.augmentType parent[i+1]=== this.augment\n    for (let k = 0; k < 6; ++k) {\n      if (augmentSelects[k]?.selectedIndex > 0 && augmentTypeSelects[k]?.selectedIndex > 0) {\n        if (augmentTypeSelects[k].selectedIndex === 2 || augmentTypeSelects[k].selectedIndex === 4) {\n          // applies + and - skill augments\n          const skillName = augmentSelects[k].selectedOptions[0].textContent\n            .match(/^([\\S\\s]+?)(?=\\s+[+-1-9])/)[0]\n            .replace(/\\s/g, \"\");\n\n          if (augSkills[skillName]) {\n            // augmentTypeSelects[i].selectedIndex - 3 will -1 if -Skill or +1 if +Skill\n            augSkills[skillName] += augmentTypeSelects[k].selectedIndex - 3;\n          } else {\n            augSkills[skillName] = 1;\n          }\n        } else if (\n          // applies deco augments\n          augmentTypeSelects[k].selectedIndex === 3\n        ) {\n          let points = augmentSelects[k].selectedIndex;\n          // every index if at 0 must first get to 1 before any other progress\n          for (let i = 0; i < 3 && points; ++i) {\n            if (decoArr[i] === 0) {\n              ++decoArr[i];\n              --points;\n            }\n          }\n\n          // upgrade the deco array using the specified points\n          for (let i = 0; i < 3 && points; ++i) {\n            const minUpgrade = Math.min(points, 4 - decoArr[i]);\n            if (minUpgrade > 0) {\n              decoArr[i] += minUpgrade;\n              points -= minUpgrade;\n            }\n            if (!points) break;\n          }\n\n          for (let k = 0, j = -1; points > 0 && j < 3; ) {\n            if (j < 2 && !decoArr[j + 1]) decoArr[j + 1] = 0;\n            if (k === 0) {\n              if (++j === 3) {\n                k = 1;\n                j = 0;\n              } else if (decoArr[j] === 0) {\n                ++decoArr[j];\n                --points;\n              }\n              continue;\n            } else if (k === 1 && decoArr[j] < 4) {\n              const min = Math.min(points, 4 - decoArr[j]);\n              decoArr[j] += min;\n              points -= min;\n            }\n            ++j;\n          }\n        }\n      }\n    }\n    document\n      .querySelectorAll(`section.${armorType} .eleDiv`)\n      .forEach(el => (el.children[1].textContent = thisArmor[el.classList[0]]));\n    setArmorsDisplayedSkills(armorType, augSkills);\n    setDecoDisplay(armorType, decoArr);\n  });\n};\n/*  // dropArmor.nextElementSibling.innerHTML = \"\";\n      let elString = \"\";\n      for (const [skillName, skillPoints] of Object.entries(augSkills)) {\n        console.log({ skillName, skillPoints });\n        elString += `<img class=\"armorImg armorDeco rampage\" src=\"./icons/skill.png\"><output textContent=\"${skillName} +${skillPoints}\">${skillName.replace(\n          /(?<=[a-z])([A-Z])(?![A-Z])/g,\n          \" $1\",\n        )} +${skillPoints}</output>`;\n      }\n      dropArmor.nextElementSibling.innerHTML = elString;\n      dropArmor.nextElementSibling.id = `${armorType}Skills`;\n\n      setDecoDisplay(armorType, decoArr);\n    }\n  });\n}; */\n// export const setAugmentPt2 = (target, propArr) => {\n// \tObject.values(target.children).forEach(child => child.remove());\n// \tpropArr.forEach(\n// \t\tvals =>\n// \t\t\t(target.innerHTML += `<option value='${Object.values(\n// \t\t\t\tvals\n// \t\t\t)}'>${Object.keys(vals)}</option>`)\n// \t);\n// };\n// updates available augment selections on change\nexport const changeDropdownOptions = (target, temp = \"\") => {\n  const augmentType = target.classList.contains(\"augmentType\") ? target : target.previousElementSibling;\n  const augment = target.classList.contains(\"augmentType\") ? target.nextElementSibling : target;\n  const type = target.parentElement.parentElement.id.slice(0, -7);\n  const budget = getRemainingPoints(type) - +augment.value;\n  let elString = \"<option value=0> ---- </option>\";\n\n  switch (augmentType.value) {\n    case \"-Def\":\n      elString += \"<option option value ='+3'> -6 Def + 3Pts </option> <option value='+5'> -12 Def + 5Pts </option >\";\n      break;\n    case \"-Skill\":\n      Object.values(document.querySelectorAll(`section.${type} .skillDiv>output`))\n        .filter(el => el.textContent)\n        .forEach(skill => {\n          if (+skill.textContent?.slice(-3) <= 0 && !temp.includes(skill.textContent?.replace(/\\s+\\+\\d+/g, \"\"))) {\n            return;\n          }\n          elString += `<option value=\"+10\">${addSpaces(skill.textContent?.replace(/\\s+\\+\\d/g, \"\"))} +10Pts </option>`;\n        });\n      break;\n\n    case \"+Skill\":\n      const skillOutputs = Object.values(document.querySelectorAll(`section.${type} .skillDiv>output`)).filter(\n        el => el.textContent\n      );\n      Object.entries(window.info.types.qurious).forEach(([attackName, qurious], index) => {\n        if (\n          temp === attackName ||\n          (qurious <= budget &&\n            (skillOutputs.length < 5 ||\n              skillOutputs.some(skills => skills.textContent.includes(addSpaces(attackName)))))\n        ) {\n          elString += `<option value=\"-${qurious}\">${addSpaces(attackName)} -${qurious}Pts </option>`;\n        }\n      });\n      break;\n    case \"+Slots\":\n      let limit = ~~Math.min(3, ~~(budget / 6));\n      let i = 0;\n      while (++i <= limit) {\n        const cost = -6 * i;\n        elString += `<option value='${cost}'> +${i} Slot${i > 1 ? \"s\" : \"\"} ${cost}Pts </option>`;\n      }\n\n      break;\n    default:\n      break;\n  }\n  augment.innerHTML = elString;\n  // if (target.classList.contains(\"augment\") && augment.selectedIndex <= 0) augment.selectedIndex = temp;\n};\n// };\n// const option = augment.querySelector(`option[value=\"${temp}\"]`);\n// if (option) {\n// option.selected = true;\n// }\n// setAugmentPt2(augment, arr);\n// };\n// //\n// export const updateAugmentOptions = (target) => {\n// // const augmentType = target.classList.contains(\"augmentType\") ? target : target.previousElementSibling;\n// // const augment = target.classList.contains(\"augmentType\") ? target.nextElementSibling : target;\n// const type = target.parentElement.id.slice(0, -7);\n// const budget = getRemainingPoints(type);\n// const skillOutputs = Object.values(document.querySelectorAll(`#${type}Skills>output`));\n//\n// switch (augmentType.value) {\n// case \"-Skill\":\n// skillOutputs.forEach((x, index) => {\n// if (!augment.children[index + 1]) return;\n// // const enabled = +x.textContent.split(\" \")[1] <= 0 && index + 1 !== augment.selectedIndex;\n// augment.children[index + 1]?.classList.toggle(\"augInvis\", enabled);\n// augment.children[index + 1].disabled = enabled;\n// });\n// break;\n// case \"+Slots\":\n// for (let i = 1; i <= 3; i++) {\n// // const check = budget - (isNaN(+augment.value) ? 0 : +augment.value) < [0, 6, 12, 18][i];\n// augment.children[i].classList.toggle(\"augInvis\", check);\n// augment.children[i].disabled = check;\n// }\n//\n// break;\n// case \"+Skill\":\n// Object.values(augment.children).forEach((option) => {\n// const shouldDisplay =\n// +option.value + (budget - (isNaN(+augment.value) ? 0 : +augment.value)) >= 0 &&\n// (skillOutputs.length < 5 ||\n// skillOutputs.some(\n// (skills) =>\n// !option.textContent.includes(\"---\") &&\n// skills.textContent.includes(option.textContent.splice(0, -3).trim())\n// ));\n//\n// option.classList.toggle(\"augInvis\", !shouldDisplay);\n// option.disabled = !shouldDisplay;\n// });\n// break;\n// default:\n// break;\n// }\n// };\n// document.querySelectorAll(\".decoDisplay select\").forEach((select) =>\n// select.addEventListener(\"change\", (e) => {\n// e.target.children.forEach((option) => (option.disabled = option.style.display === \"none\"));\n// })\n// );\n// const selectElements = document.querySelectorAll(\"select\");\n// selectElements.forEach((select) => {\n// observer.observe(select, { childList: true });\n// });\n// const updateAugmentOptions = augment => {\n// \tconst budget = getRemainingPoints(augment.parentElement);\n// \tconst skillOutputs =\n// \t\t\tdocument.querySelectorAll(`#${augment.parentElement.id.slice(0, -7)}Skills>output`)\n// \tswitch (augment.previousElementSibling.value) {\n// \t\tcase '-Skill':\n// \t\t\tskillOutputs.forEach(\n// \t\t\t\t(x, index) =>\n// \t\t\t\t\taugment.children[index + 1].style.display =\n// \t\t\t\t\t\t(+x.selectedOptions[0].textContent.slice(-1) > 0 || index+1===augment.selectedIndex)\n// \t\t\t\t\t\t\t? ''\n// \t\t\t\t\t\t\t: none)\n// \t\t\tbreak;\n// \t\tcase '+Skill':\n// \t\t\tObject.values(augment.children).forEach(option => {\n// \t\t\t\toption.style.display =\n// \t\t\t\t\toption.value <= budget &&\n// \t\t\t\t\t(skillOutputs.length < 5 ||\n// \t\t\t\t\t\tskillOutputs.some(skills =>\n// \t\t\t\t\t\t\tskills.textContent.includes(option.textContent.slice(0, -5))\n// \t\t\t\t\t\t))\n// \t\t\t\t\t\t? ''\n// \t\t\t\t\t\t: 'none';\n// \t\t\t});\n// \t\t\tbreak;\n// \t\tcase '+Slots':\n// \t\t\tObject.values(augment.children).forEach(option => {\n// \t\t\t\toption.style.display = option.value <= budget ? '' : 'none';\n// \t\t\t});\n// \t\t\tbreak;\n// \t\tdefault:\n// \t\t\tbreak;\n// \t}\n// };\nexport const setDecoDisplay = (armorType, decos) => {\n  const images = document.querySelectorAll(`section.${armorType} .decoDisplay img`);\n  images.forEach((img, index) => {\n    const currentLevel = decos[index];\n    const select = img.nextElementSibling;\n    select.classList.toggle(\"augInvis\", !currentLevel);\n    img.classList.toggle(\"augInvis\", !currentLevel);\n\n    // if no slot or the current deco is already set for this level return\n    if (!currentLevel || (select.options.length !== 0 && img.classList.contains(`lvl${currentLevel}`))) return;\n    // const thisLevel = new RegExp(`lvl${currentLevel}`);\n    img.className = img.className.replace(/(?<=lvl)\\d/, currentLevel);\n    img.src = `./icons/lvl${currentLevel}.png`;\n    let string = \"<option value=0> ---- </option>\";\n    let j = currentLevel;\n    while (j--) {\n      string += `<option class=\"optTitle\" value=\"${j + 1}\" disabled>lvl-${j + 1} Decos</option>`;\n      window.info.types.decoLevels[j].forEach(deco => {\n        const [decoName, decoPoints] = Object.entries(deco)[0];\n        string += `<option value=\"${j + 1}\">${addSpaces(decoName)} +${decoPoints}</option>`;\n      });\n    }\n    select.innerHTML = string;\n    // }\n  });\n};\nexport function updateAugmentPointsRemaining(armorType, currentValue, baseValue) {\n  let pointsDisplay = document.querySelector(`section.${armorType} .currentPoints`);\n  pointsDisplay.textContent = pointsDisplay.textContent\n    .replace(/(?=>\\s)?\\d+(?=[^/]*\\/)/, currentValue)\n    .replace(/(?<=\\/)\\d+/, baseValue);\n}\nexport function checkArmorsDef(type) {\n  // Get base value\n  let newVal = window.info.armor[type][document.getElementById(type).value].def;\n\n  // Query all augmentType elements and process each\n  document.querySelectorAll(`#${type}Qurious .augmentType`).forEach(el => {\n    // If augmentType is not \"-Def\", return early\n    if (el.selectedIndex !== 1) return;\n\n    // Deduct defense lost based on the selectedIndex\n    newVal -= [0, 6, 12][Math.max(0, el.nextElementSibling.selectedIndex)];\n  });\n\n  // Get the current displayed defense element for this armor type\n  const currentDisplayedElement = document.querySelector(`section.${type} .def output`);\n\n  // Calculate the difference\n  const difference = newVal - Number(currentDisplayedElement.textContent);\n\n  // If there is no difference, return early\n  if (difference === 0) return;\n\n  // Update this armor's defense display\n  currentDisplayedElement.textContent = newVal;\n\n  // Update the combined total defense displayed\n  const totalDefElement = document.querySelector(\".def output\");\n  totalDefElement.textContent = Number(totalDefElement.textContent) + difference;\n}\n","import { getStats, getEleHZ, getRawHZ, lower, getWeaponMR } from \"./backup.js\";\nconst dropWeapon = document.getElementById(\"dropWeapon\");\nconst weaponType = document.getElementById(\"dropWeaponType\");\nlet dropMon = document.getElementById(\"dropMonster\");\nexport const applyAllSkills = {\n  DullingStrike(power) {\n    power.stats.augPEM *=\n      document.getElementById(\"weaponRampage0\").value === \"Valstrax Soul\" && power.eleType === \"Dragon\" ? 1.2 : 1;\n    // Applies Dulling Strike to Base raw depending on sharpness and if selected\n    [power.stats.augEFR, power.stats.augPRM] =\n      document.getElementById(\"weaponRampage0\").value === \"Dulling Strike\" &&\n      document.getElementById(\"Sharpness\").selectedIndex < 5\n        ? [1.02, 1.2]\n        : [power.stats.augEFR, power.stats.augPRM];\n    return power.stats;\n  },\n  AntiSpecies(power) {\n    const species = Object.values(window.info.monster[dropMon.value]?.species);\n    if (\n      species &&\n      ((species[1] !== \"Invalid\" && document.querySelector(\"#weaponRampage0\").value === \"Wyvern Exploit\") ||\n        document.querySelector(\"#weaponRampage0\").value.includes(species[2]) ||\n        (species[3] !== \"Invalid\" && document.querySelector(\"#weaponRampage0\").value === \"Fanged Exploit\"))\n    ) {\n      power.stats.PRM *= 1.05;\n    }\n\n    if (/blight Exploit/.test(document.getElementById(\"weaponRampage0\").value)) {\n      power.stats.PRM *= 1.1;\n    }\n    return power.stats;\n  },\n  MagnamaloSoul(power) {\n    if (document.getElementById(\"weaponRampage0\").value === \"Magnamalo Soul\") {\n      power.stats.BR += 12;\n    }\n    return power.stats;\n  },\n\n  ElementExploit(power) {\n    const weaponRampage = window.info[weaponType.value].weapons[dropWeapon.value].rampageSlots;\n\n    // If elemental exploit is selected && power.eleHZV >= 25 applies elemental exploit\n    if (power.eleType !== \"None\") {\n      power.stats.PEM *=\n        weaponRampage === 0 &&\n        document.getElementById(\"weaponRampage0\").value === \"Elemental Exploit\" &&\n        getEleHZ(power.eleType) >= 25\n          ? 1.3\n          : 1;\n      power.stats.PEM *=\n        weaponRampage !== 0 &&\n        document.getElementById(\"weaponRampage0\").value === \"Element Exploit\" &&\n        getEleHZ(power.eleType) >= 25 &&\n        lower(power.eleType) !== \"none\"\n          ? 1.15\n          : 1;\n      power.stats.PEM *=\n        getEleHZ(power.eleType) >= 20 && lower(power.eleType) !== \"none\"\n          ? window.info.skills.ElementExploit[document.getElementById(\"ElementExploit\").selectedIndex].PEM\n          : 1;\n    }\n    return power.stats;\n  },\n  Bludgener(power) {\n    // Applies Bludgeoner to Base raw depending on sharpness and selectedIndex\n    if (\n      document.getElementById(\"Sharpness\").selectedIndex > 0 &&\n      document.getElementById(\"Bludgeoner\").selectedIndex > 0\n    ) {\n      power.stats.BRM *=\n        document.getElementById(\"Bludgeoner\").selectedIndex === 1 &&\n        document.getElementById(\"Sharpness\").selectedIndex < 4\n          ? [1.05]\n          : [1];\n      power.stats.BRM *=\n        document.getElementById(\"Bludgeoner\").selectedIndex === 2 &&\n        document.getElementById(\"Sharpness\").selectedIndex < 4\n          ? [1.1]\n          : [1];\n      power.stats.BRM *=\n        document.getElementById(\"Bludgeoner\").selectedIndex === 3 &&\n        document.getElementById(\"Sharpness\").selectedIndex < 5\n          ? [1.1]\n          : [1];\n    }\n    return power.stats;\n  },\n  ChargeMaster(power) {\n    if (\n      !/Wyvern/.test(power.attackName) &&\n      Object.keys(window.info.skills.ChargeMaster).includes(weaponType.value) &&\n      power.ChargeMaster === true\n    ) {\n      power.stats.BEM *=\n        window.info.skills.ChargeMaster[weaponType.value][document.getElementById(\"ChargeMaster\").selectedIndex].BEM;\n    } else if (power.ChargeMaster === true && power.NoEleBuff === true) {\n      power.baseEle *= /Wyvern/.test(power.attackName)\n        ? window.info.skills.ChargeMaster[\"HeavyBowGun Wyvern\"][document.getElementById(\"ChargeMaster\").selectedIndex]\n            .BEM\n        : window.info.skills.ChargeMaster[weaponType.value][document.getElementById(\"ChargeMaster\").selectedIndex].BEM;\n    }\n    return power.stats;\n  },\n\n  Sharpness(power) {\n    const sharpnessModifier = {};\n    [sharpnessModifier.PRM, sharpnessModifier.PEM] =\n      power.noSharpMod === false && /sever|blunt/.test(lower(power.type))\n        ? [\n            JSON.parse(document.getElementById(\"Sharpness\").value).PRM,\n            JSON.parse(document.getElementById(\"Sharpness\").value).PEM\n          ]\n        : [1, 1];\n    // Adds minds eye\n    power.stats.PRM *=\n      ~~(25 / sharpnessModifier.PRM) >= getRawHZ(power.type)\n        ? window.info.skills.MindsEye[document.getElementById(\"MindsEye\").selectedIndex].PRM\n        : 1;\n    return power.stats;\n  },\n\n  BrutalStrike(power) {\n    const weaponRampage = getWeaponMR().rampageSlots;\n    if (\n      weaponRampage === 0 &&\n      document.getElementById(\"weaponRampage0\").value === \"Brutal Strike\" &&\n      power.stats.aff < 0\n    ) {\n      power.efrMulti = 1 + power.stats.aff * -1 * 0.2 * 1.5 - power.stats.aff * -1 * 0.8 * 0.75;\n      power.critBoost = 1.5;\n    } else if (\n      weaponRampage !== 0 &&\n      document.getElementById(\"weaponRampage0\").value === \"Brutal Strike\" &&\n      power.stats.aff < 0\n    ) {\n      power.efrMulti = 1 + power.stats.aff * -1 * 0.25 * 2 - power.stats.aff * -1 * 0.75 * 0.75;\n      power.critBoost = 1.5;\n    }\n    return power.stats;\n  },\n\n  Marksman(power) {\n    if (power.type === \"Shot\") {\n      power.stats.augPRM *= window.info.skills.Marksman[document.getElementById(\"Marksman\").selectedIndex][0];\n      power.stats.augEFR *= window.info.skills.Marksman[document.getElementById(\"Marksman\").selectedIndex][1];\n    }\n    return power.stats;\n  },\n\n  SneakAttack(power) {\n    if (!power.NoSneak) {\n      power.stats.augPRM *= window.info.skills.SneakAttack[document.getElementById(\"SneakAttack\").selectedIndex].PRM;\n      power.stats.augEFR *= window.info.skills.SneakAttack[document.getElementById(\"SneakAttack\").selectedIndex].PRM;\n    }\n    return power.stats;\n  },\n  HeavyBowGun(power) {\n    if (/Sticky|Wyvern/.test(power.attackName)) {\n      power.stats.augEFR *=\n        window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][\n          power.attackName.match(\"Sticky|Wyvern\")[0]\n        ][1];\n      power.stats.augPRM *=\n        window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][\n          power.attackName.match(\"Sticky|Wyvern\")[0]\n        ][0];\n    }\n    if (!/snipe|heart|Cluster/.test(power.attackName)) {\n      power.stats.PRM *= window.info.skills.ChargeLevel[document.getElementById(\"ChargeLevel\").selectedIndex].PRM;\n      if (power.NoEleBuff) {\n        power.baseEle *= window.info.skills.ChargeLevel[document.getElementById(\"ChargeLevel\").selectedIndex].PEM;\n      } else {\n        power.stats.PEM *= window.info.skills.ChargeLevel[document.getElementById(\"ChargeLevel\").selectedIndex].PEM;\n      }\n    }\n\n    return power.stats;\n  },\n  LightBowGun(power) {\n    if (\n      /Pierce|Spread|Normal/.test(power.attackName) &&\n      document.getElementById(\"CriticalFirePower\").selectedIndex > 0\n    ) {\n      if (/Normal/.test(power.attackName)) {\n        power.stats.PRM *= 1.3;\n      } else if (/Spread/.test(power.attackName)) {\n        power.stats.PRM *= 1.2;\n      } else if (/Pierce/.test(power.attackName)) {\n        power.stats.PRM *= 1.1;\n      }\n    }\n    return power.stats;\n  },\n  Bow(power) {\n    if (!/Stake/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        window.info.skills.BowCoating[document.getElementById(\"BowCoating\").selectedIndex]\n      );\n    }\n    return power.stats;\n  },\n  LongSword(power) {\n    if (!/Helm Breaker|Serene/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        window.info.skills.SpiritGauge[document.getElementById(\"SpiritGauge\").selectedIndex]\n      );\n    } else if (/Helm Breaker|Serene/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        /Helm Breaker/.test(power.attackName)\n          ? window.info.skills.Helmbreaker[document.getElementById(\"Helmbreaker\").selectedIndex]\n          : window.info.skills.SerenePose[document.getElementById(\"SerenePose\").selectedIndex]\n      );\n    }\n    return power.stats;\n  },\n  ChargeBlade(power) {\n    if (/Morph Slash|Condensed Spinning|Up Roundslash/.test(power.attackName)) {\n      power.stats.BRM *= window.info.skills.RapidMorph[document.getElementById(\"RapidMorph\").selectedIndex].BRM;\n    }\n    if (power.type === \"IgnoreHZV\") {\n      power.stats.augEFR *= window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][1];\n      power.stats.augPRM *= window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][0];\n    }\n    if (!/3rd|(?<!Midair |Axe: )UED|(?<!Charged )Sword(?!.*Shield)/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        window.info.skills.SavageAxe[document.getElementById(\"SavageAxe\").selectedIndex]\n      );\n    }\n    power.stats =\n      power.phialType === \"Impact Phial\"\n        ? getStats(\n            power.stats,\n            window.info.skills.ImpactShieldCharge[document.getElementById(\"ImpactShieldCharge\").selectedIndex]\n          )\n        : getStats(\n            power.stats,\n            window.info.skills.EleShieldCharge[document.getElementById(\"EleShieldCharge\").selectedIndex]\n          );\n\n    return power.stats;\n  },\n  GreatSword(power) {\n    const thisAttack = power.attackName.match(\n      /Charged Slash|Rising Slash|Wide Slash|Strong Charged Slash|True Charged Slash|Rage Slash/\n    );\n    if (thisAttack && document.getElementById(\"StrongarmStance\").selectedIndex > 0) {\n      power.stats.PRM *= window.info.skills.StrongarmStance[thisAttack][0];\n      power.stats.PEM *= window.info.skills.StrongarmStance[thisAttack][1];\n    }\n    if (/(?<!Tackle )Lv[1-3]/.test(power.attackName)) {\n      power.rawMV *= Number(`1.${power.attackName.match(/(?<=Lv)[1-3]/)[0]}`);\n    }\n    return power.stats;\n  },\n\n  SwitchAxe(power) {\n    if (power.phialType === \"Impact Phial\") {\n      if (/Sword|ZSD|ED/.test(power.attackName)) {\n        power.stats.BRM *= 1.15;\n      }\n    } else if (power.phialType === \"Elemental Phial\" && /Sword|Elemental|ED/.test(power.attackName)) {\n      power.stats.BEM *= 1.45;\n    }\n    if (/Morph Slash|Condensed Spinning|Up Roundslash/.test(power.attackName)) {\n      power.stats.BRM *= window.info.skills.RapidMorph[document.getElementById(\"RapidMorph\").selectedIndex].BRM;\n    }\n    return power.stats;\n  },\n  Ranged(power) {\n    if (/Pierc/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        window.info.skills.PierceUp[document.getElementById(\"PierceUp\").selectedIndex]\n      );\n    } else if (/Spread/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        window.info.skills.SpreadUp[document.getElementById(\"SpreadUp\").selectedIndex]\n      );\n    } else if (/Normal|Rapid/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        window.info.skills.NormalRapidUp[document.getElementById(\"NormalRapidUp\").selectedIndex]\n      );\n    }\n    if (/RF+/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        window.info.skills.RapidFireUp[document.getElementById(\"RapidFireUp\").selectedIndex]\n      );\n    }\n    if (/Wyvern|Dragon Piercer/.test(power.attackName)) {\n      power.stats = getStats(\n        power.stats,\n        window.info.skills.SpecialAmmoBoost[document.getElementById(\"SpecialAmmoBoost\").selectedIndex]\n      );\n    }\n    return power.stats;\n  }\n};\n","import monster from \"./json/monster.json\";\nimport rampage from \"./json/rampage.json\";\nimport types from \"./json/types.json\";\nimport skills from \"./json/skills.json\";\nimport quest from \"./json/quest.json\";\nimport armor from \"./json/armor.json\";\nimport LightBowGun from \"./json/LightBowGun.json\";\nimport ammo from \"./json/ammo.json\";\nimport charms from \"./json/charms.json\";\n// import mhrice from \"./json/mhrice.json\";\n\nimport { setDecoDisplay, getArmorsDecoArrNSkillsObj, armorSelect } from \"./armorFunctions.js\";\nimport { applyAllSkills } from \"./addSkills.js\";\nwindow.info = {};\nwindow.applySkills = applyAllSkills;\nlet lastEvent = \"\";\nlet comboTracker = [];\n\nconst dropHZ = document.getElementById(\"dropHZ\");\nconst dropWeapon = document.getElementById(\"dropWeapon\");\nconst weaponType = document.getElementById(\"dropWeaponType\");\nconst dropMon = document.getElementById(\"dropMonster\");\nconst dropQuest = document.getElementById(\"dropQuest\");\nconst weaponTypes = [\n  [\"LightBowGun\"],\n  [\"GreatSword\"],\n  [\"ChargeBlade\"],\n  [\"InsectGlaive\"],\n  [\"SwordNShield\"],\n  [\"DualBlades\"],\n  [\"SwitchAxe\"],\n  [\"LongSword\"],\n  [\"Lance\"],\n  [\"HeavyBowGun\"],\n  [\"Bow\"],\n  [\"HuntingHorn\"],\n  [\"Gunlance\"],\n  [\"Hammer\"]\n];\nexport const getArmorTypes = () => [\"helm\", \"chest\", \"arm\", \"waist\", \"leg\"];\nexport const addSpaces = text => text.replace(/(?<=[a-z])([A-Z])(?![A-Z])/g, \" $1\");\n\nconst initCharms = data => {\n  let option1 = '<Option value=\"c\">---</Option>';\n  let option2 = '<Option value=\"c\">---</Option>';\n  for (let k = 0, j = 0; ; ) {\n    if (k === 0) {\n      option1 += `<option value=\"${Object.values(data)[j][0]?.grade}\">${addSpaces(Object.keys(data)[j])} +${\n        Object.values(data)[j][1]\n      }</option>`;\n\n      option2 += `<option value=\"${Object.values(data)[j][0]?.grade}\">${addSpaces(Object.keys(data)[j])} +${\n        Object.values(data)[j][2]\n      }</option>`;\n    }\n    if (++j === Object.keys(data).length) {\n      j = 0;\n      if (++k === Object.keys(data).length) {\n        break;\n      } else if (k === 1) {\n        document.getElementById(\"charmSkill1\").innerHTML = option1;\n        document.getElementById(\"charmSkill2\").innerHTML = option2;\n      }\n    }\n\n    if (\n      k !== j &&\n      Object.keys(data)[k] !== \"Bludgeoner\" &&\n      Object.keys(data)[j] !== \"Bludgeoner\" &&\n      (!window.info.types.lvl4[Object.keys(data)[k]] ||\n        window.info.types.qurious[Object.keys(data)[k]] >= 9 ||\n        !window.info.types.qurious[Object.keys(data)[k]] ||\n        window.info.types.lvl4[Object.keys(data)[k]] < 2) &&\n      (window.info.types.lvl4[Object.keys(data)[j]] === null ||\n        window.info.types.qurious[Object.keys(data)[j]] >= 9 ||\n        !window.info.types.qurious[Object.keys(data)[j]] ||\n        window.info.types.lvl4[Object.keys(data)[j]] < 3) &&\n      !window.info.types.decoLevels[0].some(x => Object.keys(x)[0] === Object.keys(data)[k]) &&\n      !window.info.types.decoLevels[0].some(x => Object.keys(x)[0] === Object.keys(data)[j]) &&\n      Object.values(data)[k][1] >= 3 &&\n      Object.values(data)[j][2] >= 2\n    ) {\n      window.info.charms.push({\n        skills: {\n          [Object.keys(data)[k]]: Object.values(data)[k][1],\n          [Object.keys(data)[j]]: Object.values(data)[j][2]\n        },\n        grade: getGrade(Object.values(data)[k][0]?.grade, Object.values(data)[j][0]?.grade)\n      });\n    }\n  }\n  document.getElementById(\"slot1\").selectedIndex = 3;\n  document.getElementById(\"slot2\").selectedIndex = 1;\n  document.getElementById(\"slot3\").selectedIndex = 1;\n  setDecoDisplay(\"charm\", [3, 1, 1]);\n};\nexport const getGrade = (a, b) => {\n  if (a.includes(\"S\") || b.includes(\"S\")) return \"S\";\n  if (b <= a) return b;\n  return a;\n};\nwindow.info.time = {};\nasync function updateInfo() {\n  await Promise.all([\n    Promise.resolve(monster),\n    Promise.resolve(rampage),\n    Promise.resolve(types),\n    Promise.resolve(skills),\n    Promise.resolve(quest),\n    Promise.resolve(armor),\n    Promise.resolve(LightBowGun),\n    Promise.resolve(ammo),\n    Promise.resolve(charms)\n    // Promise.resolve(mhrice)\n  ])\n    .then(\n      ([\n        monsterData,\n        rampageData,\n        typesData,\n        skillsData,\n        questData,\n        armorData,\n        LightBowGunData,\n        ammoData,\n        charmsData,\n        mhriceData\n      ]) => {\n        window.info.monster = monsterData;\n        window.info.rampage = rampageData;\n        window.info.types = typesData;\n        window.info.skills = skillsData;\n        window.info.quest = questData;\n        window.info.armor = armorData;\n        window.info.LightBowGun = LightBowGunData;\n        window.info.ammo = ammoData;\n        // window.info.mhrice = mhriceData;\n        window.info.charms = [];\n        weaponTypeSelect();\n        classChange();\n        rampageSelect();\n        weaponSelect();\n        populateDropDowns(\n          [].concat([\"Select Skills For Set Builder\"], Object.keys(window.info.types.maxLevel).sort()),\n          document.getElementById(\"dropSkills\")\n        );\n        armorSelect();\n        monsterSelect();\n\n        document.querySelectorAll(\"#dropMonster>option\").forEach((x, i) => {\n          if (x.textContent === \"Toadversary\") {\n            document.getElementById(\"dropMonster\").selectedIndex = i;\n          }\n        });\n        getArmorsDecoArrNSkillsObj();\n        partSelect();\n        healthSelect();\n        monChart();\n        dataCompile();\n\n        initCharms(Object.fromEntries(Object.entries(charmsData).sort((a, b) => a[0].localeCompare(b[0]))));\n      }\n    )\n    .catch(error => {\n      console.error(error);\n    });\n}\nupdateInfo();\nconst importJson = fileName => {\n  const baseURL = window.location.href.slice(0, window.location.href.lastIndexOf(\"/\"));\n\n  fetch(`${baseURL}/json/${fileName}.json`)\n    .then(data => data.json())\n    .then(data => {\n      window.info[fileName] = data;\n    });\n};\n[].concat(weaponTypes.slice(1), [\"descriptions\"]).forEach(fileName => {\n  importJson(fileName);\n});\nexport const timesUsed = (valueToCheck, arr = comboTracker, count = 0) => {\n  arr.forEach(value => {\n    if (value == valueToCheck) ++count;\n  });\n  return count;\n};\nexport function dataCompile(e = window?.event) {\n  updateOldDropdownSelectedIndex();\n  if (/BowGun/.test(weaponType.value)) {\n    rangedDPS(e);\n  } else {\n    meleeDPS(e);\n  }\n}\nconst k = 0;\nconst resetTable = meleeDamage => {\n  let i = 0;\n  let j = 2;\n  const cells = document.querySelectorAll(\"#dpsBody>tr>td:nth-child(n+3)\");\n  while (true) {\n    if (++j === 7) {\n      j = 2;\n      if (++i === meleeDamage.length) break;\n    }\n    cells[k].textContent = meleeDamage[i][j];\n  }\n};\nwindow.info.augs = {\n  attackAug: [\n    [0, 0],\n    [2, 5],\n    [4, 10],\n    [6, 15],\n    [8, 20]\n  ],\n  affinityAug: [\n    [0, 0],\n    [3, 5],\n    [6, 10],\n    [8, 15]\n  ],\n  elementalAug: [\n    [0, 0],\n    [1, 0],\n    [2, 0],\n    [3, 0],\n    [4, 0],\n    [5, 0],\n    [6, 0],\n    [7, 0]\n  ],\n  rampageAug: [\n    [0, 0],\n    [3, 1],\n    [7, 2]\n  ],\n  sharpnessAug: [\n    [0, 0],\n    [3, 1],\n    [5, 2],\n    [7, 3]\n  ]\n};\nwindow.info.augIndex = {\n  attackAug: 0,\n  affinityAug: 0,\n  elementalAug: 0,\n  rampageAug: 0,\n  sharpnessAug: 0\n};\nexport function rangedDPS(e) {\n  document.querySelector(\"output.elementalAug\").value = 0;\n  document.getElementById(\"elementalResult\").value = \"+0\";\n\n  document.querySelector(\"output.sharpnessAug\").value = 0;\n  document.getElementById(\"sharpnessResult\").value = \"+0\";\n\n  const rangedDamage = [];\n  const ammoFrameData = [];\n  let ammo = {};\n  let pass1 = true;\n  // Let attackTypes = {...getWeaponMR() };\n  const baseWeaponStats = getWeaponMR();\n  [\"Shot\", \"Sever\", \"Blunt\", \"IgnoreHZV\"].forEach(type => {\n    baseWeaponStats[type] = getInitialStats(baseWeaponStats, type);\n  });\n\n  const theseAttacks = getUsedAttacks();\n  for (let i = 0; i < Object.keys(theseAttacks).length; i++) {\n    let power = {\n      ...baseWeaponStats,\n      ...Object.values(theseAttacks)[i]\n    };\n    power.baseRaw += power.Draw === true ? Number(document.getElementById(\"PunishingDraw\").value) : 0;\n    power.stats = { ...power[power.type] };\n    power.stats = getDependantSkills(power);\n    power = getRemainingSkills(power);\n    power = damageCalculations(power);\n    if (/Demon|Armor|Wyvern Blast|Glide|Wyvernsn|Guard/.test(power.attackName)) {\n      ammo.ticsAdjust = 1;\n    } else {\n      ammo = calculateAmmoFrames(power);\n    }\n\n    const totalEffective = ~~((~~power.efr + ~~power.efe) * ammo.ticsAdjust);\n    const totalCrit = ~~(~~power.rawCrit + ~~power.eleCrit);\n    const totalNon = ~~(~~power.rawNon + ~~power.eleNon);\n\n    const shotsToKill = (~~(0.99 + document.getElementById(\"health\").value / totalEffective)).toLocaleString();\n    let timeToKill = /Stic|Slic/.test(power.attackName)\n      ? 5 + ~~(0.98 + 60 / ammo.shotsPerMin) * ~~(0.99 + document.getElementById(\"health\").value / totalEffective)\n      : ~~(0.98 + 60 / ammo.shotsPerMin) * ~~(0.99 + document.getElementById(\"health\").value / totalEffective);\n    timeToKill = timeToKill.toLocaleString();\n    const rawBoth = [`${~~power.rawNon} / ${~~power.rawCrit}`];\n    const eleBoth = [`${~~power.eleNon} / ${~~power.eleCrit}`];\n    const total = [`${~~totalNon} / ${~~totalCrit}`];\n    const damage = [\n      power.attackName,\n      rawBoth,\n      eleBoth,\n      total,\n      totalEffective,\n      ammo.shotsPerGain === \"NaN%\" || ammo.shotsPerGain === \"0.00%\" ? \"No Gain\" : ammo.shotsPerGain,\n      /(\\d{2},\\d{3})/.test(shotsToKill) ? \"N / A\" : shotsToKill,\n      /(\\d{2},\\d{3})/.test(timeToKill) ? \"N / A\" : timeToKill\n    ];\n\n    rangedDamage.push(damage);\n\n    const ammoStats = [\n      power.attackName,\n      power.rawMV.toFixed(1),\n      ammo.reloadSpeed === undefined ? \" N / A \" : ammo.reloadSpeed,\n      ammo.recoilSpeed === undefined ? \" N / A \" : ammo.recoilSpeed,\n      isNaN(ammo.clipSize) ? \"N / A\" : ammo.clipSize,\n      power.ticsPer,\n      ammo.shotsPerMinBase === undefined ? \" N / A \" : ammo.shotsPerMinBase,\n      ammo.shotsPerMin === undefined ? \" N / A \" : ammo.shotsPerMin\n    ];\n\n    ammoFrameData.push(ammoStats);\n    if (pass1) {\n      const stats = [\n        [\"Base\", ~~power.baseRaw, ~~(22 * (1 + power.raw / 100))],\n        [\"True\", ~~power.raw, ~~((22 * power.stats.BEM + power.stats.BE) * (1 + power.raw / 100))],\n        [\n          \"eTrue\",\n          ~~(power.raw * getCritBoost(power.stats.aff, power.Crit).PRM * power.stats.PRM * power.stats.augPRM),\n\n          ~~(\n            (22 * power.stats.BEM + power.stats.BE) *\n            (1 + power.raw / 100) *\n            power.stats.PEM *\n            power.stats.augPEM *\n            getCritEle(power.stats.aff, power.Crit).PEM\n          )\n        ],\n        [\n          \"Effective\",\n          ~~(power.raw * getCritBoost(power.stats.aff, power.Crit).EFR * power.stats.PRM * power.stats.augPRM),\n\n          ~~(\n            (22 * power.stats.BEM + power.stats.BE) *\n            (1 + power.raw / 100) *\n            power.stats.PEM *\n            power.stats.augPEM *\n            getCritEle(power.stats.aff, power.Crit).EFE\n          )\n        ],\n        [\"Critical\"].concat(\n          Number(getCritBoost(power.stats.aff).EFR).toFixed(3),\n          Number(getCritEle(power.stats.aff).EFE).toFixed(2)\n        ),\n        [\"Affinity\", ~~(power.stats.aff * 100)]\n      ];\n      createTable(stats, \"ammo\");\n      pass1 = false;\n    }\n  }\n\n  rangedDamage.splice(0, 0, [\n    \"Ammo Type\",\n    \"Raw\",\n    \"Element\",\n    [\"Total\", \"Combined Damage For a Single Tick\"],\n    [\"Effective\", \"Sums Every Tick Using EFE/EFR\"],\n    [\"RPM Gain\", \"The Percentage Increase Of Damage From Both \\nAmmo Up And Spare Shot In 60 seconds.\"],\n    [\"Shots To Kill\", \"Use the Pierce Damage Adjust For Accurate Results\"],\n    [\n      \"Time To Kill\",\n      \"Can Have Variance Due To FPS,\\nBut The Percent Gain Or Loss VS\\nOther Ammo Types Should Stay Constant\"\n    ]\n  ]);\n\n  buildDamageTable(rangedDamage, \"dps\");\n  ammoFrameData.splice(0, 0, [\n    \"Ammo Type\",\n    \"Raw MV\",\n    \"Reload\",\n    \"Recoil\",\n    \"Clip Size\",\n    [\"Procs Per\", \"Maximum Ticks Per Shot Using Optimal FPS, \\nAs Well As The Monsters Smallest Large Gold Crown Size\"],\n    [\"RPM Base\", \"Shots Per Minuite Including Recoil Down And Reload Speed\"],\n    [\"Current RPM\", \"Shots Per Minuite With AmmoUp And Spare Shot\"]\n  ]);\n  buildDamageTable(ammoFrameData, \"ammo\");\n}\n\nexport function meleeDPS(e) {\n  const runTimeStart = performance.now();\n  const meleeDamage = [[\"Combo\", \"Attack Name\", \"MV\", \"Raw\", \"Element\", \"Total\", \"Effective\"]];\n  let comboDamage = [0, 0, 0, 0, 0, 0, 0, 0];\n  let thisIndex = -1;\n  let comboHitsUsed = {};\n  const lastSharp = document.getElementById(\"Sharpness\").selectedIndex;\n  const attackTypes = getWeaponMR();\n  [\"Shot\", \"Sever\", \"Blunt\", \"IgnoreHZV\"].forEach(type => {\n    attackTypes[type] = getInitialStats(attackTypes, type);\n  });\n  let power;\n\n  Object.values(getUsedAttacks()).forEach(attack => {\n    ++thisIndex;\n    power = {\n      ...attack,\n      ...attackTypes\n    };\n    power.baseRaw += power.Draw === true ? Number(document.getElementById(\"PunishingDraw\").value) : 0;\n    power.stats = { ...power[power.type] };\n    power.stats = getDependantSkills(power);\n    if (/input/.test(e?.target?.className) && power.attackName === \"Combo Damage\") {\n      updateComboTracker();\n      updateComboDisplay();\n    }\n\n    if (power.attackName === \"Combo Damage\") {\n      comboHitsUsed =\n        weaponType.value === \"Bow\" ? hitsPerColorSharp()[1] : getComboHitsAndSetSharpness(power.stats.aff);\n    }\n\n    power = getRemainingSkills(power);\n    power = damageCalculations(power);\n    if (comboTracker.includes(thisIndex.toString())) {\n      /* Goes through each color sharpness and filters the recorded attacks for the number of times this current attack was used\n       * then applies the given sharpness modifier to the damage if damage type is sever or blunt then multiplies by the times used\n       * saves results in the comboDamage var and += the totals for every sharpness of every attack\n       * to later be used to update the comboDamage in the dpsTable\n       */\n      const colorsUsed = Object.entries(comboHitsUsed).filter(x => x[1].length > 0);\n      colorsUsed.forEach(sharpness => {\n        if (!timesUsed(thisIndex, sharpness[1])) return;\n        const { PRM, PEM } =\n          power.noSharpMod === false\n            ? window.info.skills.Sharpness[capital(sharpness[0])]\n            : {\n                PRM: 1,\n                PEM: 1\n              };\n        const hitsPerAttackPerSharpness = timesUsed(thisIndex, sharpness[1]);\n        // Combo=[rawMV,rawNon,rawCrit,eleNon,eleCrit,totalNon,TotalCrit,EFR,EFE,totalEffective]\n        comboDamage = [\n          (comboDamage[0] += Number(~~(power.rawMV * hitsPerAttackPerSharpness))),\n          (comboDamage[1] += Number(~~(power.rawNon * PRM) * hitsPerAttackPerSharpness)),\n          (comboDamage[2] += Number(~~(power.rawCrit * PRM) * hitsPerAttackPerSharpness)),\n          (comboDamage[3] += Number(~~(power.eleNon * PEM) * hitsPerAttackPerSharpness)),\n          (comboDamage[4] += Number(~~(power.eleCrit * PEM) * hitsPerAttackPerSharpness)),\n          (comboDamage[5] += Number(\n            ~~(power.rawNon * PRM) * hitsPerAttackPerSharpness + ~~(power.eleNon * PEM) * hitsPerAttackPerSharpness\n          )),\n          (comboDamage[6] += Number(\n            ~~(power.rawCrit * PRM) * hitsPerAttackPerSharpness + ~~(power.eleCrit * PEM) * hitsPerAttackPerSharpness\n          )),\n          (comboDamage[7] += Number(\n            ~~(power.efr * PRM) * hitsPerAttackPerSharpness + ~~(power.efe * PEM) * hitsPerAttackPerSharpness\n          ))\n        ];\n      });\n    }\n\n    // Damage/meleeDamage adds sharpness to the calculations and arranges them in the array to be used for the damageContainer\n    let sharpnessModifier =\n      window.info.skills.Sharpness[document.getElementById(\"Sharpness\").selectedOptions[0].textContent.trim()];\n    if (weaponType.value === \"Bow\" && power.type !== \"Shot\") {\n      switch (document.getElementById(\"BowCoating\").selectedOptions[0].textContent) {\n        case \"Power\":\n          sharpnessModifier = \"1.35\";\n          break;\n        case \"Close Range\":\n          sharpnessModifier = \"1.32\";\n          break;\n        case \"Close Range+\":\n          sharpnessModifier = \"1.39\";\n          break;\n      }\n    }\n\n    const damage = [\n      \"replaceME\",\n      power.attackName,\n      power.rawMV.toFixed(1),\n      `${(~~(power.rawNon * sharpnessModifier.PRM)).toLocaleString()} / ${(~~(\n        power.rawCrit * sharpnessModifier.PRM\n      )).toLocaleString()}`,\n      `${(~~(power.eleNon * sharpnessModifier.PEM)).toLocaleString()} / ${(~~(\n        power.eleCrit * sharpnessModifier.PEM\n      )).toLocaleString()}`,\n      `${(~~(power.rawNon * sharpnessModifier.PRM) + ~~(power.eleNon * sharpnessModifier.PEM)).toLocaleString()} / ${(\n        ~~(power.rawCrit * sharpnessModifier.PRM) + ~~(power.eleCrit * sharpnessModifier.PEM)\n      ).toLocaleString()}`,\n      (\n        (~~(power.efe * sharpnessModifier.PEM) + ~~(power.efr * sharpnessModifier.PRM)) *\n        (power.ticsPer + 1)\n      ).toLocaleString()\n    ];\n\n    meleeDamage.push(damage);\n    // Stats stores calculations to be used for the statsTable\n\n    const ele = lower(power.eleType) === \"none\" ? 0 : power.ele;\n    const stats = [\n      [\"Base\", ~~power.baseRaw, power.baseEle],\n      [\"True\", ~~power.raw, ~~ele],\n      [\n        \"eTrue\",\n        ~~(\n          power.raw *\n          getCritBoost(power.stats.aff, power.Crit).PRM *\n          power.stats.PRM *\n          power.stats.augPRM *\n          sharpnessModifier.PRM\n        ),\n\n        ~~(\n          ele *\n          getCritEle(power.stats.aff, power.Crit).PEM *\n          power.stats.PEM *\n          power.stats.augPEM *\n          sharpnessModifier.PEM\n        )\n      ],\n      [\n        \"Effective\",\n        ~~(\n          power.raw *\n          getCritBoost(power.stats.aff, power.Crit).EFR *\n          power.stats.PRM *\n          power.stats.augEFR *\n          sharpnessModifier.PRM\n        ),\n\n        ~~(\n          ele *\n          getCritEle(power.stats.aff, power.Crit).EFE *\n          power.stats.PEM *\n          power.stats.augPEM *\n          power.stats.augEFR *\n          sharpnessModifier.PEM\n        )\n      ],\n      [\n        \"Critical\",\n        Number(getCritBoost(power.stats.aff).EFR).toFixed(3),\n        Number(getCritEle(power.stats.aff).EFE).toFixed(2)\n      ],\n      [\n        \"Sharp.\",\n        Object.values(window.info.skills.Sharpness)[7 - document.getElementById(\"Sharpness\").selectedIndex].PRM,\n        Object.values(window.info.skills.Sharpness)[7 - document.getElementById(\"Sharpness\").selectedIndex].PEM\n      ],\n      [\"Affinity\", ~~(power.stats.aff * 100)]\n    ];\n\n    createTable(stats, power.eleType);\n  });\n  if (weaponType.value === \"Gunlance\") {\n    gunlanceShelling(meleeDamage, comboDamage, power);\n    // gunlanceShelling(532);\n    // } else if (\n    //   lastSharp === document.getElementById('Sharpness').selectedIndex &&\n    //   !/BowChargePlus|dropWeapon|taWikiSetBuilder/.test(e?.target?.id) // &&!weaponType.value === 'ChargeBlade'\n    // ) {\n    //   if (/input|inputButton/.test(e?.target?.className)) {\n    //     document.getElementById(\"c0\").textContent = `${comboDamage[0].toLocaleString()}`;\n    //     document.getElementById(\"d0\").textContent = `${formatNumbers(\n    //       comboDamage[1]\n    //     )} / ${comboDamage[2].toLocaleString()}`;\n    //     document.getElementById(\"e0\").textContent = `${formatNumbers(\n    //       comboDamage[3]\n    //     )} / ${comboDamage[4].toLocaleString()}`;\n    //     document.getElementById(\"f0\").textContent = `${formatNumbers(\n    //       comboDamage[5]\n    //     )} / ${comboDamage[6].toLocaleString()}`;\n    //     document.getElementById(\"g0\").textContent = `${comboDamage[7].toLocaleString()}`;\n\n    //     console.log((performance.now() - runTimeStart) / 1000);\n    //     console.log(window.event);\n    //   } else {\n    //     meleeDamage.splice(0, 2, [\n    //       \"replaceME\",\n    //       \"Combo Damage\",\n    //       `${comboDamage[0].toLocaleString()}`,\n    //       `${comboDamage[1].toLocaleString()} / ${comboDamage[2].toLocaleString()}`,\n    //       `${comboDamage[3].toLocaleString()} / ${comboDamage[4].toLocaleString()}`,\n    //       `${comboDamage[5].toLocaleString()} / ${comboDamage[6].toLocaleString()}`,\n    //       `${comboDamage[7].toLocaleString()}`,\n    //     ]);\n\n    //     resetTable(meleeDamage);\n    //     const runTimeEnd = performance.now();\n    //     console.log((runTimeEnd - runTimeStart) / 1000);\n    //     console.log(window.event);\n    //   }\n  } else {\n    meleeDamage.splice(1, 1, [\n      \"replaceME\",\n      \"Combo Damage\",\n      `${comboDamage[0].toLocaleString()}`,\n      `${comboDamage[1].toLocaleString()} / ${comboDamage[2].toLocaleString()}`,\n      `${comboDamage[3].toLocaleString()} / ${comboDamage[4].toLocaleString()}`,\n      `${comboDamage[5].toLocaleString()} / ${comboDamage[6].toLocaleString()}`,\n      `${comboDamage[7].toLocaleString()}`\n    ]);\n    buildDamageTable(meleeDamage, \"dps\");\n  }\n\n  console.log((performance.now() - runTimeStart) / 1000);\n}\n\nexport function getRampageSkills(\n  power = {\n    ...window.info[weaponType.value].weapons[dropWeapon.value]\n  }\n) {\n  // Applies rampage any bonuses that effect base stats\n  for (let i = 0; i < 6; i++) {\n    const element = document.querySelectorAll(\"#weaponRampage>select\")[i];\n    if (element.style.display === \"none\") break;\n    const rampageSkill = window.info.rampage[\"Rampage-Up Skill\"][element.value];\n    if (rampageSkill !== undefined) {\n      for (const stat of Object.keys(rampageSkill)) {\n        power[stat] += rampageSkill[stat];\n      }\n    }\n  }\n  // For skills that change the base element\n  if (!/BowGun/.test(weaponType.value)) {\n    power.eleType = /Fire|Water|Thunder|Ice|Dragon|Blase|Sleep|Poison|Para/.test(\n      document.getElementById(\"weaponRampage\").children[1].value\n    )\n      ? document\n          .getElementById(\"weaponRampage\")\n          .children[1].value.match(/Fire|Water|Thunder|Ice|Dragon|Blase|Sleep|Poison|Para/)[0]\n      : power.eleType;\n  }\n\n  return {\n    ...power\n  };\n}\n\nexport const getWeaponMR = () => {\n  const power = {\n    ...window.info[weaponType.value].weapons[dropWeapon.value]\n  };\n  if (/Bow/.test(weaponType.value)) {\n    if (weaponType.value === \"HeavyBowGun\") {\n      if (power.rank === 10 && document.getElementById(\"augUpgrades\").checked) power.baseRaw += 15;\n\n      // Power Barrel\n      if (document.getElementById(\"BowgunBarrel\")?.selectedOptions[0]?.textContent === \"Power\") {\n        power.baseRaw = ~~(power.baseRaw * (document.getElementById(\"Tune-Up\").selectedIndex < 2 ? 1.125 : 1.15));\n      }\n    } else if (weaponType.value === \"LightBowGun\") {\n      if (power.rank === 10 && document.getElementById(\"augUpgrades\").checked) power.baseRaw += 7;\n\n      if (document.getElementById(\"BowgunBarrel\")?.selectedOptions[0]?.textContent === \"Long\") {\n        power.baseRaw = ~~(power.baseRaw * (document.getElementById(\"Tune-Up\").selectedIndex < 2 ? 1.05 : 1.075));\n      }\n    } else if (weaponType.value === \"Bow\" && power.rank === 10)\n      // && document.getElementById(\"augUpgrades\").checked\n      power.baseRaw += 10;\n  } else if (\n    power.rank === 10 &&\n    document.getElementById(\"augUpgrades\").checked &&\n    !/Water|Ice|Thunder|Fire|Dragon/.test(power.eleType)\n  ) {\n    power.baseRaw += 30;\n  } else if (power.rank === 10 && document.getElementById(\"augUpgrades\").checked) {\n    power.baseRaw += 15;\n    // adds appropriate amount of element for different weapons\n    if (weaponType.value === \"GreatSword\") {\n      power.baseEle += 10 + 20;\n    } else if (weaponType.value === \"lance\" || weaponType.value === \"Gunlance\") {\n      power.baseEle += 7 + 14;\n    } else {\n      power.baseEle += 6 + 12;\n    }\n  }\n  power.baseRaw += +document.querySelector(\"output.attackAug + output\").value.slice(-2);\n  const affinityAugVal = +document.querySelector(\"output.affinityAug + output\").value.slice(-2);\n  power.elementalAug = +document.querySelector(\"output.elementalAug + output\").value.slice(-2);\n\n  power.aff = (power.aff || 0) + affinityAugVal;\n  if (power.eleType !== \"None\") {\n    let inc = 0;\n    // adds appropriate amount of element for different weapons\n    if (weaponType.value === \"GreatSword\") {\n      inc = [0, 5, 10, 15, 20, 25, 33, 43][window.info.augIndex.elementalAug];\n    } else if (weaponType?.value === \"lance\" || weaponType?.value === \"Gunlance\") {\n      inc = [0, 3, 6, 10, 14, 18, 24, 32][window.info.augIndex.elementalAug];\n    } else {\n      inc = [0, 3, 6, 9, 12, 15, 20, 27][window.info.augIndex.elementalAug];\n    }\n    power.baseEle += inc;\n    document.getElementById(\"elementalResult\").value = `+ ${inc}`;\n  } else {\n    document.querySelector(\"output.elementalAug\").value = 0;\n  }\n  power.baseAff = power.aff;\n  return power;\n};\nconst getRangedSkills = power => {\n  const statsArr = [];\n  if (/Pierc/.test(power.attackName)) {\n    statsArr.push(window.info.skills.PierceUp[document.getElementById(\"PierceUp\").selectedIndex]);\n  } else if (/Spread/.test(power.attackName)) {\n    statsArr.push(window.info.skills.SpreadUp[document.getElementById(\"SpreadUp\").selectedIndex]);\n  } else if (/Normal|Rapid/.test(power.attackName)) {\n    statsArr.push(window.info.skills.NormalRapidUp[document.getElementById(\"NormalRapidUp\").selectedIndex]);\n  }\n\n  if (/RF+/.test(power.attackName)) {\n    statsArr.push(window.info.skills.RapidFireUp[document.getElementById(\"RapidFireUp\").selectedIndex]);\n  }\n\n  if (/Wyvern|Dragon Piercer/.test(power.attackName)) {\n    statsArr.push(window.info.skills.SpecialAmmoBoost[document.getElementById(\"SpecialAmmoBoost\").selectedIndex]);\n  }\n\n  if (/BowGun/.test(weaponType.value)) {\n    if (weaponType.value === \"HeavyBowGun\") {\n      if (/Sticky|Wyvern/.test(power.attackName)) {\n        power.stats.augEFR *=\n          window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][\n            power.attackName.match(\"Sticky|Wyvern\")[0]\n          ][1];\n        power.stats.augPRM *=\n          window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][\n            power.attackName.match(\"Sticky|Wyvern\")[0]\n          ][0];\n      }\n\n      if (!/snipe|heart|Cluster/.test(power.attackName)) {\n        power.stats.PRM *= window.info.skills.ChargeLevel[document.getElementById(\"ChargeLevel\").selectedIndex].PRM;\n        if (power.NoEleBuff) {\n          power.baseEle *= window.info.skills.ChargeLevel[document.getElementById(\"ChargeLevel\").selectedIndex].PEM;\n        } else {\n          power.stats.PEM *= window.info.skills.ChargeLevel[document.getElementById(\"ChargeLevel\").selectedIndex].PEM;\n        }\n      }\n    }\n\n    if (\n      weaponType.value === \"LightBowGun\" &&\n      /Pierce|Spread|Normal/.test(power.attackName) &&\n      document.getElementById(\"CriticalFirePower\").selectedIndex > 0\n    ) {\n      if (/Normal/.test(power.attackName)) {\n        power.stats.PRM *= 1.3;\n      } else if (/Spread/.test(power.attackName)) {\n        power.stats.PRM *= 1.2;\n      } else if (/Pierce/.test(power.attackName)) {\n        power.stats.PRM *= 1.1;\n      }\n    }\n  }\n\n  if (weaponType.value === \"Bow\" && !/Stake/.test(power.attackName)) {\n    statsArr.push(window.info.skills.BowCoating[document.getElementById(\"BowCoating\").selectedIndex]);\n  }\n  return getStats(power.stats, statsArr);\n};\nconst getMeleeSkills = power => {\n  const statsArr = [];\n  if (weaponType.value === \"LongSword\" && !/Helm Breaker|Serene/.test(power.attackName)) {\n    statsArr.push(window.info.skills.SpiritGauge[document.getElementById(\"SpiritGauge\").selectedIndex]);\n  } else if (/Helm Breaker|Serene/.test(power.attackName)) {\n    statsArr.push(\n      /Helm Breaker/.test(power.attackName)\n        ? window.info.skills.Helmbreaker[document.getElementById(\"Helmbreaker\").selectedIndex]\n        : window.info.skills.SerenePose[document.getElementById(\"SerenePose\").selectedIndex]\n    );\n  }\n\n  if (weaponType.value === \"GreatSword\") {\n    // Applies GreatSwords Charge Level Bonus\n    const thisAttack = power.attackName.match(\n      /Charged Slash|Rising Slash|Wide Slash|Strong Charged Slash|True Charged Slash|Rage Slash/\n    );\n    if (thisAttack && document.getElementById(\"StrongarmStance\").selectedIndex > 0) {\n      power.stats.PRM *= window.info.skills.StrongarmStance[thisAttack][0];\n      power.stats.PEM *= window.info.skills.StrongarmStance[thisAttack][1];\n    }\n\n    if (/(?<!Tackle )Lv[1-3]/.test(power.attackName)) {\n      power.rawMV *= Number(`1.${power.attackName.match(/(?<=Lv)[1-3]/)[0]}`);\n    }\n  }\n\n  // Applies ChargeBlade specific abilities\n\n  if (weaponType.value === \"ChargeBlade\") {\n    if (!/3rd|(?<!Midair |Axe: )UED|(?<!Charged )Sword(?!.*Shield)/.test(power.attackName)) {\n      statsArr.push(window.info.skills.SavageAxe[document.getElementById(\"SavageAxe\").selectedIndex]);\n    }\n\n    if (power.phialType === \"Impact Phial\") {\n      statsArr.push(window.info.skills.ImpactShieldCharge[document.getElementById(\"ImpactShieldCharge\").selectedIndex]);\n    } else {\n      statsArr.push(window.info.skills.EleShieldCharge[document.getElementById(\"EleShieldCharge\").selectedIndex]);\n    }\n  }\n\n  return getStats(power.stats, statsArr);\n};\nexport function getDependantSkills(power) {\n  const statsArr = [];\n  if (\"FireWaterIceThunderDragon\".includes(power.eleType)) {\n    document.querySelectorAll(`.${lower(power.eleType)}`).forEach(skill => {\n      if (skill.selectedIndex > 0) {\n        statsArr.push(window.info.skills[skill.id][skill.selectedIndex]);\n      }\n    });\n  }\n\n  if (weaponType.value.includes(\"Bow\")) {\n    return getRangedSkills(power);\n  }\n  return getMeleeSkills(power);\n}\n\nexport function getEnrage() {\n  return document.getElementById(\"dropEnraged\").value === \"Enraged\"\n    ? window.info.monster[dropMon.value]?.anger_data\n    : 1;\n}\nconst getWeaknessExploit = type =>\n  getRawHZ(type) >= 45\n    ? window.info.skills.WeaknessExploit[Math.min(0, document.getElementById(\"WeaknessExploit\").selectedIndex)].aff\n    : 0;\nexport function getDisplayedSkillsStats(skillsUsebByType) {\n  let skills = {};\n  // Get skills from unique select menus\n  Object.values(document.querySelectorAll(\"#unique select\")).forEach(uniqueSkill => {\n    const skillName = uniqueSkill.id;\n    if (skillsUsebByType.includes(skillName) && uniqueSkill.selectedIndex > 0 && !skills[skillName]) {\n      skills[skillName] = window.info.skills[skillName][uniqueSkill.selectedIndex];\n    }\n  });\n\n  // Get skills from the EquippedSkillDisplay\n  Object.values(document.querySelectorAll(\"#EquippedSkillDisplay>output output\")).forEach(skill => {\n    const [skillName, pointsOf] = skill.textContent.replace(/\\s/g, \"\").split(\":\");\n    if (\n      skillsUsebByType.includes(skillName) &&\n      skill.previousElementSibling.textContent === \"Active\" &&\n      !skills[skillName]\n    ) {\n      skills[skillName] = window.info.skills[skillName][pointsOf];\n    }\n  });\n  document.querySelectorAll(\"input.skillButton\").forEach(thisInput => {\n    if (thisInput.checked) {\n      skills[thisInput.id] = window.info.skills[thisInput.id];\n    }\n  });\n  return skills;\n}\n\nexport function getInitialStats(power, type) {\n  if (comboTracker[0] === null) {\n    comboTracker = [];\n  }\n  power.stats = {\n    BR: 0,\n    BRM: 1,\n    PRM: 1,\n    BEM: 1,\n    BE: 0,\n    PEM: 1\n  };\n  power.stats.aff = power.baseAff || 0;\n  const usedSkills = {};\n  let skills = [];\n\n  const skillsObj = getDisplayedSkillsStats(\n    window.info.types[weaponType.value].filter(skill => window.info.types[type].includes(skill))\n  );\n  // Applies Demon Ammo if selected and damage type is sever or blunt\n  power.stats.PRM *= document.getElementById(\"DemonAmmo\").checked && /(Sever|Blunt)/.test(power.type) ? 1.1 : 1;\n\n  document.getElementById(\"enrageDisplay\").textContent = `${~~(getEnrage() * 100)}%`;\n  if (document.getElementById(\"dropEnraged\").value === \"Enraged\") {\n    skillsObj.Agitator = window.info.skills.Agitator[document.getElementById(\"Agitator\").selectedIndex];\n    power.stats.PEM *= getEnrage();\n    power.stats.PRM *= getEnrage();\n  }\n\n  if (weaponType.value === \"DualBlades\") {\n    power.stats.BEM *= window.info.skills.ArchdemonMode[document.getElementById(\"ArchdemonMode\").selectedIndex].BEM;\n    power.stats.BEM *= /\\[Feral Demon Mode\\]/.test(power.attackName)\n      ? 1\n      : window.info.skills.DemonMode[document.getElementById(\"DemonMode\").selectedIndex].BEM;\n    power.stats.BRM *= /\\[Demon Mode\\]/.test(power.attackName)\n      ? 1\n      : window.info.skills.FeralDemonMode[document.getElementById(\"FeralDemonMode\").selectedIndex].BRM;\n    power.stats.aff += document.getElementById(\"weaponRampage0\").value === \"Hellion Mode\" ? 20 : 0;\n  }\n\n  if (weaponType.value === \"Bow\") {\n    if (document.getElementById(\"HerculesDraw\").selectedIndex > 0) {\n      skillsObj.HerculesDraw = window.info.skills.HerculesDraw[document.getElementById(\"HerculesDraw\").selectedIndex];\n    }\n    if (document.getElementById(\"UpperCrit\").selectedIndex > 0) {\n      skillsObj.UpperCrit = window.info.skills.UpperCrit[document.getElementById(\"UpperCrit\").selectedIndex];\n    }\n  }\n\n  // skills = statsArr.filter(isUnique);\n\n  // skills.forEach((skillName) => {\n  // if (!usedSkills[skillName] && document.getElementById(skillName).selectedIndex) {\n  // usedSkills[skillName] = 1;\n  // statsArr.push(window.info.skills[skillName][document.getElementById(skillName).selectedIndex]);\n  // }\n  // });\n  Object.entries(skillsObj).forEach(([skillName, stats]) => {\n    if (!stats) {\n      console.log(skillName);\n      delete skillsObj[skillName];\n    }\n  });\n  power.stats = getStats(power.stats, Object.values(skillsObj));\n  // Applies Water Blight if selected appropriate to the hzv\n  if (document.getElementById(\"weaponRampage0\").value === \"Kushala Daora Soul\") {\n    power.stats.aff += 15;\n  }\n\n  power.stats.aff += getWeaknessExploit(type);\n  power.stats.aff = Math.min(power.stats.aff, 100) / 100;\n\n  return power.stats;\n}\n\nexport function updateComboTracker() {\n  if (!document.getElementsByClassName(\"inputs\")?.length) return;\n  if (!(!Number.isNaN(Number(window?.event?.target.id)) && window?.event?.target.id !== \"0\")) {\n    return;\n  }\n  // If value entered in the e?.target combo input > amount stored in comboTracker [] adds attack id to the end of the comboTracker until they are ===\n  let difference =\n    document.querySelectorAll(\".inputs\")[window?.event?.target.id].value - timesUsed(window?.event?.target.id);\n  while (difference > 0) {\n    comboTracker.push(window.event.target.id);\n    --difference;\n  }\n\n  // If value entered in the e.target combo input < amount stored in comboTracker [] removes the last instance of this attack id from the comboTracker until they are ===\n  while (difference < 0) {\n    comboTracker.splice(comboTracker.lastIndexOf(window?.event?.target.id), 1);\n    ++difference;\n  }\n}\n\nexport function updateComboDisplay() {\n  document.querySelectorAll(\"li.comboHits\").forEach(x => x.remove());\n  let comboHit;\n  comboTracker.forEach(index => {\n    comboHit = document.createElement(\"li\");\n    comboHit.className = `${index} comboHits`;\n    comboHit.setAttribute(\"draggable\", \"true\");\n    comboHit.textContent = document.querySelector(`td#b${[index]}>output`).textContent;\n    document.getElementById(\"comboCountDisplay\").append(comboHit);\n  });\n}\n\n// Finds HitsOfSharpness current sharpness as well as what combo hits were used how many times per color\n// export function TotalHitsOfSharpUsed(power) {\nexport const getInitialSharpness = () => {\n  let pointsFor = document.getElementById(\"Handicraft\").selectedIndex * 10;\n  const { sharpness, handicraft, rank } = getWeaponMR();\n  const quriousSharp =\n    (window.info.augIndex.sharpnessAug + (rank === 10 && document.getElementById(\"augUpgrades\").checked ? 1 : 0)) * 10;\n\n  sharpness.orange -= Math.max(0, quriousSharp - (sharpness.red - 10));\n  sharpness.red = Math.max(10, sharpness.red - quriousSharp);\n  let startingIndex = Object.values(sharpness).indexOf(0) === -1 ? 6 : Object.values(sharpness).indexOf(0) - 1;\n\n  if (sharpness[Object.keys(sharpness)[startingIndex]] === 0) {\n    sharpness[Object.keys(sharpness)[startingIndex - 1]] += quriousSharp;\n  } else {\n    sharpness[Object.keys(sharpness)[startingIndex]] += quriousSharp;\n  }\n  while (pointsFor) {\n    const min = Math.min(pointsFor, handicraft.shift());\n    sharpness[Object.keys(sharpness)[startingIndex]] += min;\n    ++startingIndex;\n    pointsFor -= min;\n  }\n  return sharpness;\n};\nexport function applySharpnessSkills(\n  aff,\n  totalSharp = {\n    ...getInitialSharpness()\n  }\n) {\n  const razorSharp = window.info.skills.RazorSharp[document.getElementById(\"RazorSharp\").selectedIndex].Sharp;\n  const MT = window.info.skills.MastersTouch[document.getElementById(\"MastersTouch\").selectedIndex].Sharp * aff;\n  // Applies the extra hits of sharpness from the Masters Touch skill;\n  const mTBonus =\n    aff > 0 && document.getElementById(\"MastersTouch\").selectedIndex > 0\n      ? sharpnessReduction(MT) * sharpnessReduction(razorSharp)\n      : sharpnessReduction(razorSharp);\n  return Object.entries(totalSharp).map(sharp => ~~(Number(sharp[1]) * Number(mTBonus)));\n}\n\nexport function listOfAllComboHits() {\n  let [...listOfEachAttack] = comboTracker;\n  if (comboTracker[0] == null) {\n    return;\n  }\n  let comboMulti = document.getElementsByClassName(\"inputComboRepeat\")[0].value;\n  // For each pont in the comboMultiplier input, adds another comboTracker [] to the listOfEachAttack\n  while (comboMulti > 1) {\n    listOfEachAttack = listOfEachAttack.concat(comboTracker);\n    --comboMulti;\n  }\n\n  return listOfEachAttack;\n}\n\nexport function getComboHitsAndSetSharpness(affinity = 0) {\n  const [remainingSharp, comboHitsPerColor, total] = hitsPerColorSharp(affinity);\n\n  document.getElementById(\"Sharpness\").selectedIndex = 6 - remainingSharp.lastIndexOf(0);\n  remainingSharp.forEach((count, index) => {\n    document.querySelector(\"#sharpnessContainer\").children[6 - index].style.width = `${(count / total) * 90}%`;\n    document.querySelector(\"#sharpnessContainer\").children[6 - index].textContent = count < 0.1 ? \"\" : ~~count;\n  });\n  return comboHitsPerColor;\n}\n\nexport function hitsPerColorSharp(affinity = 0, everyHitsAttackIndex = listOfAllComboHits()) {\n  // array to hold the list of all combo hits per color sharpness\n  const comboHitsPerColor = {\n    purple: [],\n    white: [],\n    blue: [],\n    green: [],\n    yellow: [],\n    orange: [],\n    red: []\n  };\n  // applies sharpness reduction skills...bow does not use sharpness\n  const maxHitsPerColor =\n    weaponType.value !== \"Bow\" ? applySharpnessSkills(affinity).reverse() : [0, 0, 0, 1, 0, 0, 0, 0];\n  const sharpnessCapacity = Object.values(maxHitsPerColor).reduce((a, b) => a + b);\n  if (everyHitsAttackIndex) {\n    const attackKeys = Object.keys(getUsedAttacks());\n    let sharpnessIndex = 0;\n    const colors = Object.keys(comboHitsPerColor);\n    const listOfAllAttacks = getAttacks();\n    attackLoop: for (const thisAttackIndex of everyHitsAttackIndex) {\n      const thisAttackKey = attackKeys[thisAttackIndex];\n      let ticsPerAttack = listOfAllAttacks[thisAttackKey].ticsPer + 1;\n      const sharpUsedPerTick = getHitsPerTick(listOfAllAttacks[thisAttackKey].hitsOfSharp, thisAttackIndex);\n      if (weaponType.value !== \"Gunlance\" || thisAttackIndex < 27) {\n        while (ticsPerAttack--) {\n          if (maxHitsPerColor[sharpnessIndex] < 0.1 && ++sharpnessIndex === 7) break attackLoop;\n          comboHitsPerColor[colors[sharpnessIndex]].push(thisAttackIndex);\n          maxHitsPerColor[sharpnessIndex] -= sharpUsedPerTick;\n        }\n      }\n    }\n  }\n\n  return [maxHitsPerColor, comboHitsPerColor, sharpnessCapacity];\n}\n\nexport function getHitsPerTick(hitsOfSharp, index) {\n  if (document.getElementById(\"ProtectivePolish\").checked || weaponType.value === \"Bow\") {\n    return 0;\n  }\n  if (weaponType.value !== \"Gunlance\" || index > 27) {\n    return weaponType.value !== \"DualBlades\" ? hitsOfSharp : hitsOfSharp / 3;\n  }\n\n  return 1;\n}\n\nexport function getRemainingSkills(power) {\n  const weaponRampage = getWeaponMR().rampageSlots;\n\n  power.stats.augEFR = 1;\n  power.stats.augPRM = 1;\n  power.stats.augPEM = 1;\n\n  power.stats.augPEM *=\n    document.getElementById(\"weaponRampage0\").value === \"Valstrax Soul\" && power.eleType === \"Dragon\" ? 1.2 : 1;\n  // Applies Dulling Strike to Base raw depending on sharpness and if selected\n  [power.stats.augEFR, power.stats.augPRM] =\n    document.getElementById(\"weaponRampage0\").value === \"Dulling Strike\" &&\n    document.getElementById(\"Sharpness\").selectedIndex < 5\n      ? [1.02, 1.2]\n      : [power.stats.augEFR, power.stats.augPRM];\n\n  // Anti-Species\n  const species = Object.values(window.info.monster[dropMon.value]?.species);\n  if (\n    species &&\n    ((species[1] !== \"Invalid\" && document.querySelector(\"#weaponRampage0\").value === \"Wyvern Exploit\") ||\n      document.querySelector(\"#weaponRampage0\").value.includes(species[2]) ||\n      (species[3] !== \"Invalid\" && document.querySelector(\"#weaponRampage0\").value === \"Fanged Exploit\"))\n  ) {\n    power.stats.PRM *= 1.05;\n  }\n\n  if (/blight Exploit/.test(document.getElementById(\"weaponRampage0\").value)) {\n    power.stats.PRM *= 1.1;\n  }\n\n  if (document.getElementById(\"weaponRampage0\").value === \"Magnamalo Soul\") {\n    power.stats.BR += 12;\n  }\n\n  if (power.type === \"IgnoreHZV\" && weaponType.value === \"ChargeBlade\") {\n    power.stats.augEFR *= window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][1];\n    power.stats.augPRM *= window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][0];\n  }\n\n  if (weaponType.value === \"SwitchAxe\" && /Sword|ZSD|ED/.test(power.attackName) && power.phialType === \"Impact Phial\") {\n    power.stats.BRM *= 1.15;\n  }\n\n  if (\n    weaponType.value === \"SwitchAxe\" &&\n    /Sword|Elemental|ED/.test(power.attackName) &&\n    power.phialType === \"Elemental Phial\"\n  ) {\n    power.stats.BEM *= 1.45;\n  }\n\n  // If elemental exploit is selected && power.eleHZV >= 25 applies elemental exploit\n\n  if (power.eleType !== \"None\") {\n    power.stats.PEM *=\n      weaponRampage === 0 &&\n      document.getElementById(\"weaponRampage0\").value === \"Elemental Exploit\" &&\n      getEleHZ(power.eleType) >= 25\n        ? 1.3\n        : 1;\n    power.stats.PEM *=\n      weaponRampage !== 0 &&\n      document.getElementById(\"weaponRampage0\").value === \"Element Exploit\" &&\n      getEleHZ(power.eleType) >= 25 &&\n      lower(power.eleType) !== \"none\"\n        ? 1.15\n        : 1;\n    power.stats.PEM *=\n      getEleHZ(power.eleType) >= 20 && lower(power.eleType) !== \"none\"\n        ? window.info.skills.ElementExploit[document.getElementById(\"ElementExploit\").selectedIndex].PEM\n        : 1;\n  }\n\n  if (weaponType.value === \"ChargeBlade\" || weaponType.value === \"SwitchAxe\") {\n    power.stats.BRM *= /Morph Slash|Condensed Spinning|Up Roundslash/.test(power.attackName)\n      ? window.info.skills.RapidMorph[document.getElementById(\"RapidMorph\").selectedIndex].BRM\n      : 1;\n  }\n  // Applies Bludgeoner to Base raw depending on sharpness and selectedIndex\n\n  if (\n    document.getElementById(\"Sharpness\").selectedIndex > 0 &&\n    document.getElementById(\"Bludgeoner\").selectedIndex > 0\n  ) {\n    power.stats.BRM *=\n      document.getElementById(\"Bludgeoner\").selectedIndex === 1 &&\n      document.getElementById(\"Sharpness\").selectedIndex < 4\n        ? [1.05]\n        : [1];\n    power.stats.BRM *=\n      document.getElementById(\"Bludgeoner\").selectedIndex === 2 &&\n      document.getElementById(\"Sharpness\").selectedIndex < 4\n        ? [1.1]\n        : [1];\n    power.stats.BRM *=\n      document.getElementById(\"Bludgeoner\").selectedIndex === 3 &&\n      document.getElementById(\"Sharpness\").selectedIndex < 5\n        ? [1.1]\n        : [1];\n  }\n\n  if (\n    !/Wyvern/.test(power.attackName) &&\n    Object.keys(window.info.skills.ChargeMaster).includes(weaponType.value) &&\n    power.ChargeMaster === true\n  ) {\n    power.stats.BEM *=\n      window.info.skills.ChargeMaster[weaponType.value][document.getElementById(\"ChargeMaster\").selectedIndex].BEM;\n  } else if (power.ChargeMaster === true && power.NoEleBuff === true) {\n    power.baseEle *= /Wyvern/.test(power.attackName)\n      ? window.info.skills.ChargeMaster[\"HeavyBowGun Wyvern\"][document.getElementById(\"ChargeMaster\").selectedIndex].BEM\n      : window.info.skills.ChargeMaster[weaponType.value][document.getElementById(\"ChargeMaster\").selectedIndex].BEM;\n  }\n  // Applies sharpnessModifier to sever and blunt type attacks that use at least one hit of sharpness. This makes sure attacks like tackle or Bow skills don't get a sharpness modifier.\n\n  const sharpnessModifier = {};\n  [sharpnessModifier.PRM, sharpnessModifier.PEM] =\n    power.noSharpMod === false && /sever|blunt/.test(lower(power.type))\n      ? [\n          JSON.parse(document.getElementById(\"Sharpness\").value).PRM,\n          JSON.parse(document.getElementById(\"Sharpness\").value).PEM\n        ]\n      : [1, 1];\n  // Adds minds eye\n  power.stats.PRM *=\n    ~~(25 / sharpnessModifier.PRM) >= getRawHZ(power.type)\n      ? window.info.skills.MindsEye[document.getElementById(\"MindsEye\").selectedIndex].PRM\n      : 1;\n\n  /*\n   * Brutal Strike\n   * Converts -Aff to a positive then * chance to proc * dmg modifier then\n   * adds the -dps to the +dps gain to find overall dps difference\n   */\n\n  if (\n    weaponRampage === 0 &&\n    document.getElementById(\"weaponRampage0\").value === \"Brutal Strike\" &&\n    power.stats.aff < 0\n  ) {\n    power.efrMulti = 1 + power.stats.aff * -1 * 0.2 * 1.5 - power.stats.aff * -1 * 0.8 * 0.75;\n    power.critBoost = 1.5;\n  } else if (\n    weaponRampage !== 0 &&\n    document.getElementById(\"weaponRampage0\").value === \"Brutal Strike\" &&\n    power.stats.aff < 0\n  ) {\n    power.efrMulti = 1 + power.stats.aff * -1 * 0.25 * 2 - power.stats.aff * -1 * 0.75 * 0.75;\n    power.critBoost = 1.5;\n  }\n\n  if (power.type === \"Shot\") {\n    power.stats.augPRM *= window.info.skills.Marksman[document.getElementById(\"Marksman\").selectedIndex][0];\n    power.stats.augEFR *= window.info.skills.Marksman[document.getElementById(\"Marksman\").selectedIndex][1];\n  }\n\n  if (!power.NoSneak) {\n    power.stats.augPRM *= window.info.skills.SneakAttack[document.getElementById(\"SneakAttack\").selectedIndex].PRM;\n    power.stats.augEFR *= window.info.skills.SneakAttack[document.getElementById(\"SneakAttack\").selectedIndex].PRM;\n  }\n\n  return {\n    ...power\n  };\n}\n\nexport function getCritEle(affinity, canCrit = true) {\n  return canCrit\n    ? {\n        PEM: window.info.skills.CriticalElement[document.getElementById(\"CriticalElement\").selectedIndex].PEM,\n        EFE:\n          1 +\n          (window.info.skills.CriticalElement[document.getElementById(\"CriticalElement\").selectedIndex].PEM - 1) *\n            affinity\n      }\n    : {\n        PEM: 1,\n        EFE: 1\n      };\n}\n\nexport function getCritBoost(affinity, canCrit = true) {\n  return canCrit\n    ? {\n        PRM: window.info.skills.CriticalBoost[document.getElementById(\"CriticalBoost\").selectedIndex].PRM,\n        EFR:\n          1 +\n          (window.info.skills.CriticalBoost[document.getElementById(\"CriticalBoost\").selectedIndex].PRM - 1) * affinity\n      }\n    : {\n        PRM: 1,\n        EFR: 1\n      };\n}\n\nexport function damageCalculations(power) {\n  if (power.Raw === false) {\n    [power.raw, power.rawNon, power.efr, power.rawCrit] = [0, 0, 0, 0];\n  } else {\n    power.raw = Math.min(\n      ~~(\n        ~~(~~power.baseRaw * power.stats.BRM + power.stats.BR + 0.1) *\n        (document.getElementById(\"HuntingHornAttack\").checked ? 1.1 : 1)\n      ),\n      2600\n    );\n    const rawFormula = (power.raw * power.stats.PRM * getRawHZ(lower(power.type)) * power.rawMV) / 10_000;\n    power.rawNon = ~~(0.5 + Math.max(1, rawFormula * power.stats.augPRM));\n    power.efr = ~~(0.5 + Math.max(1, rawFormula * power.stats.augEFR * getCritBoost(power.stats.aff, power.Crit).EFR));\n    power.rawCrit = ~~(\n      0.5 + Math.max(1, rawFormula * power.stats.augPRM * getCritBoost(power.stats.aff, power.Crit).PRM)\n    );\n  }\n\n  if (Object.prototype.hasOwnProperty.call(power, \"NoEleBuff\") && power.NoEleBuff === true) {\n    [power.ele, power.eleNon, power.efe, power.eleCrit] = [power.baseEle, power.baseEle, power.baseEle, power.baseEle];\n  } else if (\n    !weaponType.value === \"Bow\" &&\n    (power.Ele === false || (power.eleType === \"None\" && !/BowGun/.test(weaponType.value)))\n  ) {\n    [power.ele, power.eleNon, power.efe, power.eleCrit] = [0, 0, 0, 0];\n  } else {\n    power.eleAmmo = /BowGun/.test(weaponType.value) && power.eleType !== \"None\" ? 1 + power.raw / 100 : 1;\n    power.ele = ~~(Math.min(~~(power.baseEle * power.stats.BEM + power.stats.BE), 560) + 0.1);\n    const eleFormula =\n      power.ele * power.stats.PEM * (getEleHZ(power.eleType) / 100) * power.eleAmmo * power.eleMV * power.stats.augPEM;\n    power.eleNon = eleFormula > 0 && eleFormula < 1 ? 1 : ~~eleFormula;\n    power.efe = ~~Math.max(1, eleFormula * getCritEle(power.stats.aff, power.Crit).EFE);\n    power.eleCrit = ~~Math.max(1, eleFormula * getCritEle(power.stats.aff, power.Crit).PEM);\n  }\n\n  return {\n    ...power\n  };\n}\n\nconst sharpnessReduction = reduction => 1 / (1 - reduction);\n\nexport function gunlanceShelling(currentDamage, comboDamage, power) {\n  const regex = new RegExp(`${getWeaponMR().shellingType} Lv${getWeaponMR().shellingLevel}`);\n  let Raw = 1;\n  let EFR = 1;\n  Object.entries(getAttacks()).forEach((attack, index) => {\n    if (!regex.test(attack[0])) {\n      return;\n    }\n    Raw = ~~(\n      attack[1].rawMV *\n      window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][0] *\n      window.info.skills.Artillery[document.getElementById(\"Artillery\").selectedIndex].BRM\n    );\n    EFR = ~~(\n      attack[1].rawMV *\n      window.info.skills.Bombardier[document.getElementById(\"Bombardier\").selectedIndex][1] *\n      window.info.skills.Artillery[document.getElementById(\"Artillery\").selectedIndex].BRM\n    );\n    const final = [\n      \"replaceME\",\n      attack[0],\n      0,\n      `${Raw} / ${Raw}`,\n      `${attack[1].baseEle} / ${attack[1].baseEle}`,\n      `${(Raw + attack[1].baseEle) * (attack[1].ticsPer + 1)} / ${(Raw + attack[1].baseEle) * (attack[1].ticsPer + 1)}`,\n      EFR,\n      attack[1].baseEle,\n      (EFR + attack[1].baseEle) * (attack[1].ticsPer + 1)\n    ];\n    currentDamage.push(final);\n    comboDamage[0] += 0;\n    comboDamage[1] += Raw * timesUsed(index + 27);\n    comboDamage[2] += Raw * timesUsed(index + 27);\n    comboDamage[3] += attack[1].baseEle * timesUsed(index + 27);\n    comboDamage[4] += attack[1].baseEle * timesUsed(index + 27);\n    comboDamage[5] += (Raw + attack[1].baseEle) * (power.ticsPer + 1) * timesUsed(index + 27);\n    comboDamage[6] += (Raw + attack[1].baseEle) * (power.ticsPer + 1) * timesUsed(index + 27);\n    comboDamage[7] += (EFR + attack[1].baseEle) * (power.ticsPer + 1) * timesUsed(index + 27);\n  });\n  if (!/Inputs|inputButton/.test(window?.event?.target.className)) {\n    buildDamageTable(currentDamage, \"dps\");\n  }\n\n  document.getElementById(\"c0\").innerHTML = `${comboDamage[0].toLocaleString()}`;\n  document.getElementById(\"d0\").innerHTML = `${comboDamage[1].toLocaleString()} / ${comboDamage[2].toLocaleString()}`;\n  document.getElementById(\"e0\").innerHTML = `${comboDamage[3].toLocaleString()} / ${comboDamage[4].toLocaleString()}`;\n  document.getElementById(\"f0\").innerHTML = `${comboDamage[5].toLocaleString()} / ${comboDamage[6].toLocaleString()}`;\n  document.getElementById(\"g0\").innerHTML = `${comboDamage[7].toLocaleString()}`;\n}\nexport function createTable(stats, eleType) {\n  let string = \"\";\n  const attackIcon = \"<img src='./icons/attack.png'>\";\n  const eleIcon = `<img src='./icons/${eleType}.png'>`;\n  const affinityIcon = \"<img src='./icons/affinity.png'>\";\n\n  stats.forEach((stat, index) => {\n    if (index === stats.length - 1) {\n      string += `<div><h5>${stat[0]}</h5>${affinityIcon} ${stat[1]}%</div>`;\n    } else {\n      string += `<div><h5>${stat[0]}</h5>${attackIcon} ${stat[1]} ${eleIcon} ${stat[2]}</div>`;\n    }\n  });\n\n  document.querySelector(\"#statsTableDiv\").innerHTML = `${string}</table>`;\n}\n\nexport function buildDamageTable(myDamage, id) {\n  const currentAmmoTableStyle =\n    !document.getElementById(\"ammoTable\").classList.contains(\"augInvis\") && weaponType.value.includes(\"BowGun\");\n  const currentDamageTableStyle =\n    document.getElementById(\"dpsTable\").classList.contains(\"augInvis\") || !weaponType.value.includes(\"BowGun\");\n  const inputs = /gray/.test(document.getElementById(\"filterCombo\").className)\n    ? document.querySelectorAll(\".a\")\n    : document.querySelectorAll(\".a:not(.gray)\");\n  let k = 0;\n  const myHeader = document.querySelector(`#${id}Head`);\n  const myBody = document.querySelector(`#${id}Body`);\n  const table = document.createElement(\"table\");\n  const tHead = document.createElement(\"thead\");\n\n  if (/BowGun/.test(weaponType.value) && id !== \"stats\") {\n    tHead.className = \"tableRowRanged\";\n  } else if (id !== \"stats\") {\n    tHead.className = \"tableRowMelee\";\n  }\n  tHead.id = `${id}Head`;\n  const headerRow = document.createElement(\"tr\");\n  const tBody = document.createElement(\"tbody\");\n  tBody.id = `${id}Body`;\n\n  const myHeaders = myDamage.splice(0, 1);\n  myHeaders[0].forEach(headerText => {\n    const header = document.createElement(\"th\");\n    let textNode;\n    if (Array.isArray(headerText)) {\n      textNode = document.createTextNode(headerText[0]);\n      header.dataset.tooltip = headerText[1];\n    } else {\n      textNode = document.createTextNode(headerText);\n    }\n    header.appendChild(textNode);\n    headerRow.appendChild(header);\n  });\n\n  tHead.appendChild(headerRow);\n  myHeader.replaceWith(tHead);\n  myDamage.forEach(attack => {\n    const row = document.createElement(\"tr\");\n    if (/BowGun/.test(weaponType.value) && id !== \"stats\") {\n      row.className = \"tableRowRanged\";\n    } else if (id !== \"stats\") {\n      row.className = \"tableRowMelee\";\n    }\n    Object.values(attack).forEach(text => {\n      if (text === \"replaceME\") {\n        if (\n          document.getElementById(\"previousWeaponType\").value === weaponType.value &&\n          inputs.length > 0 &&\n          ((window?.event?.target === dropWeapon && weaponType.value !== \"ChargeBlade\") ||\n            window?.event?.target !== dropWeapon) &&\n          window?.event?.target.id !== \"BowChargePlus\" &&\n          ((weaponType.value === \"Bow\" && document.getElementById(\"previousWeapon\").value === dropWeapon.value) ||\n            weaponType.value !== \"Bow\")\n        ) {\n          row.appendChild(inputs[k]);\n          ++k;\n        } else {\n          const cell = document.createElement(\"td\");\n          const adjuster = document.createElement(\"input\");\n\n          adjuster.type = \"Number\";\n          adjuster.className = `Combo skill ${k}`;\n          adjuster.Max = 20;\n          if (weaponType.value === \"Bow\" && document.getElementById(\"previousWeapon\").value !== dropWeapon.value) {\n            comboTracker = [];\n            updateComboDisplay();\n          }\n\n          if (k === 0) {\n            adjuster.id = \"inputComboRepeat\";\n            adjuster.Min = 1;\n            adjuster.value = 1;\n            adjuster.className = \"inputComboRepeat hitsOfSharpInputs inputs\";\n          } else {\n            adjuster.id = k;\n            adjuster.className = \"inputs hitsOfSharpInputs\";\n            adjuster.Min = 0;\n            adjuster.value = 0;\n          }\n\n          ++k;\n          cell.appendChild(adjuster);\n          row.appendChild(cell);\n        }\n        return;\n      }\n      const cell = document.createElement(\"td\");\n      const textNode = document.createTextNode(text);\n\n      cell.appendChild(textNode);\n      row.appendChild(cell);\n    });\n    tBody.appendChild(row);\n    myBody.replaceWith(tBody);\n  });\n  table.setAttribute(\"id\", `${id}Table`);\n\n  tBody.className = /(BowGun)/.test(weaponType.value) ? \"rangedTable\" : \"meleeTable\";\n  document.getElementById(\"damageContainer\").className = /(BowGun)/.test(weaponType.value)\n    ? \"rangedContainer\"\n    : \"meleeContainer\";\n\n  document.getElementById(\"ammoTable\").classList.toggle(\"augInvis\", currentAmmoTableStyle);\n  document.getElementById(\"dpsTable\").classList.toggle(\"augInvis\", !currentDamageTableStyle);\n  if (!/BowGun/.test(weaponType.value)) {\n    document.getElementById(\"ammoTable\").classList.add(\"augInvis\");\n  }\n  if (id !== \"stats\" && id !== \"ammo\") {\n    const [len, ...column] = /BowGun/.test(weaponType.value)\n      ? [k, \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\n      : [k, \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"];\n\n    if (/BowGun/.test(weaponType.value) && !/BowGun/.test(document.getElementById(\"previousWeaponType\").value)) {\n      document.querySelectorAll(\"#comboCountContainer\").forEach(menu => (menu.style.display = \"none\"));\n    } else if (!/BowGun/.test(weaponType.value) && /BowGun/.test(document.getElementById(\"previousWeaponType\").value)) {\n      document.querySelectorAll(\"#comboCountContainer\").forEach(menu => (menu.style.display = \"\"));\n    }\n\n    document.getElementById(\"previousWeapon\").value = dropWeapon.value;\n    document.getElementById(\"previousWeaponType\").value = weaponType.value;\n    for (let i = 0; i < len; ++i) {\n      column.forEach((letter, index) => {\n        document.getElementById(`${id}Body`).children[i].children[index].id = letter + i;\n        document.getElementById(`${id}Body`).children[i].children[index].className = `${letter} ${i}`;\n      });\n    }\n\n    if (\n      !weaponType.value.includes(\"BowGun\") // !window.event?.target?.classList.contains('inputButton')\n    ) {\n      document.querySelectorAll(`tbody#${id}Body>tr>td:nth-child(2)`).forEach((element, index) => {\n        const cell = document.createElement(\"td\");\n        cell.innerHTML = `<button type=\"button\" aria-pressed=\"false\" id=\"${index}\" class=\"inputButton dec\"\n                    >&#8681</button><button type=\"button\" aria-pressed=\"false\" id=\"${index}\" class=\"inputButton inc\">&#8679</button><output class=\"label\">${element.textContent}</output>`;\n        cell.id = `b${index}`;\n        cell.className = `b ${index} inputContainer`;\n        element.replaceWith(cell);\n      });\n    }\n  }\n\n  if (/blue/.test(document.getElementById(\"filterCombo\").className)) {\n    document.querySelectorAll(\".a\").forEach((x, index) => {\n      if (document.querySelectorAll(`.${index}`)[0].style.display === \"none\") {\n        document.querySelectorAll(`.${index}`).forEach(menu => (menu.style.display = \"none\"));\n      }\n    });\n  }\n}\nexport const setSpawn = () => {\n  document.querySelectorAll(\"#spawnArea>output\").forEach(x => x.remove());\n  window.info.quest[dropQuest.value].target.forEach(x => {\n    if (x.name === dropMon.value) {\n      x.spawn.forEach(z => {\n        const spawn = document.createElement(\"output\");\n        spawn.textContent = `Spawn Area ${z.block} ${z.lot}%`;\n        document.getElementById(\"spawnArea\").append(spawn);\n      });\n    }\n  });\n};\n// export function monChartold() {\n//   setSpawn();\n//   if (dropQuest.value !== \"\") {\n//     let mon = [];\n//     const type = /Bow/.test(weaponType.value) ? \"shot\" : weaponType.value[0] === \"H\" ? \"blunt\" : \"sever\";\n\n//     const headers = [\"Hit Zone\", \"Sever\", \"Blunt\", \"Shot\", \"Fire\", \"Water\", \"Thunder\", \"Ice\", \"Dragon\"];\n//     const table = document.createElement(\"table\");\n//     const myTable = document.querySelector(\"#monTable\");\n//     const headerRow = document.createElement(\"tr\");\n\n//     headers.forEach((headerText) => {\n//       const header = document.createElement(\"th\");\n//       const textNode = document.createTextNode(headerText);\n//       header.appendChild(textNode);\n//       headerRow.appendChild(header);\n//     });\n\n//     table.appendChild(headerRow);\n//     mon = Object.entries(window.info.monster[dropMon.value].parts).sort((b, a) => {\n//       if (\n//         a[1][type] === b[1][type] &&\n//         document.querySelector(\"#statsHead > tr > th:nth-child(4)\").textContent !== \"none\"\n//       ) {\n//         return (\n//           a[1][lower(document.querySelector(\"#statsHead > tr > th:nth-child(4)\").textContent)] -\n//           b[1][lower(document.querySelector(\"#statsHead > tr > th:nth-child(4)\").textContent)]\n//         );\n//       }\n\n//       return a[1][type] - b[1][type];\n//     });\n//     mon.forEach((element) => {\n//       const row = document.createElement(\"tr\");\n//       const HZV = [`${element[1].part} ${element[1].state}`].concat(Object.values(element[1]).splice(3, 8));\n\n//       for (let j = 0; j < 9; ++j) {\n//         const cell = document.createElement(\"td\");\n//         // Adds demon ammo and water blight to displayed HZV\n//         if (j !== 0) {\n//           HZV[j] =\n//             document.getElementById('WaterBlight').checked && /1|2|3/.test(j)\n//               ? Math.min(100, ~~(Math.max(HZV[j], HZV[j] * 0.63 + 22.2) + 3))\n//               : +HZV[j];\n\n//           if (+HZV[j] < 14) {\n//             cell.setAttribute(\"class\", \"F\");\n//           } else if (+HZV[j] < 15) {\n//             cell.setAttribute(\"class\", \"C\");\n//           } else if (+HZV[j] < 45) {\n//             cell.setAttribute(\"class\", \"B\");\n//           } else if (+HZV[j] < 65) {\n//             cell.setAttribute(\"class\", \"A\");\n//           } else if (+HZV[j] >= 65) {\n//             cell.setAttribute(\"class\", \"S\");\n//           }\n\n//           HZV[j] = ~~HZV[j];\n//         }\n\n//         const textNode = document.createTextNode(HZV[j]);\n//         cell.appendChild(textNode);\n//         row.appendChild(cell);\n//       }\n\n//       table.appendChild(row);\n//     });\n//     table.setAttribute(\"id\", \"monTable\");\n//     myTable.replaceWith(table);\n//     Object.values(document.getElementById(\"monTableContainer\").children).forEach((ele) => {\n//       Object.values(ele.children).forEach((row) => {\n//         row.className = \"tableRow\";\n//       });\n//     });\n//   }\n// }\nexport function monChart() {\n  setSpawn();\n  if (dropQuest.value === \"\") {\n    return;\n  }\n  const type = /Bow/.test(weaponType.value) ? \"shot\" : weaponType.value[0] === \"H\" ? \"blunt\" : \"sever\";\n\n  const headers = [\"Hit Zone\", \"sever\", \"blunt\", \"shot\", \"fire\", \"water\", \"thunder\", \"ice\", \"dragon\"];\n  const table = document.createElement(\"table\");\n  const myTable = document.querySelector(\"#monTable\");\n\n  const mon = window.info.monster[dropMon.value].parts.sort((b, a) => {\n    if (a[type] === b[type] && getWeaponMR().eleType) {\n      return a[getWeaponMR().eleType] - b[getWeaponMR().eleType];\n    }\n\n    return a[type] - b[type];\n  });\n\n  // Create header row\n  const headerRow = document.createElement(\"tr\");\n  headers.forEach((headerText, index) => {\n    if (!index) {\n      headerRow.innerHTML += `<th>${headerText}</th>`;\n    } else {\n      headerRow.innerHTML += `<th class=\"${headerText}\"></th>`;\n    }\n  });\n  table.appendChild(headerRow);\n\n  // Create data rows\n\n  mon.forEach(monPart => {\n    const row = document.createElement(\"tr\");\n    for (let j = 0; j < 9; ++j) {\n      let HZV = j === 0 ? `${monPart.part} ${monPart.state}` : monPart[lower(headers[j])];\n\n      const cell = document.createElement(\"td\");\n      if (j !== 0) {\n        HZV =\n          document.getElementById(\"WaterBlight\").checked && j < 4\n            ? Math.min(100, ~~(Math.max(HZV, HZV * 0.63 + 22.2) + 3))\n            : +HZV;\n        if (+HZV < 14) {\n          cell.setAttribute(\"class\", \"F\");\n        } else if (+HZV < 15) {\n          cell.setAttribute(\"class\", \"C\");\n        } else if (+HZV < 45) {\n          cell.setAttribute(\"class\", \"B\");\n        } else if (+HZV < 65) {\n          cell.setAttribute(\"class\", \"A\");\n        } else if (+HZV >= 65) {\n          cell.setAttribute(\"class\", \"S\");\n        }\n\n        HZV = ~~HZV;\n      }\n\n      const textNode = document.createTextNode(HZV);\n      cell.appendChild(textNode);\n      row.appendChild(cell);\n    }\n    table.appendChild(row);\n  });\n  table.setAttribute(\"id\", \"monTable\");\n  myTable.replaceWith(table);\n}\ndocument.querySelectorAll(\"select.demon\").forEach(x => {\n  x.addEventListener(\"change\", e => {\n    if (e?.target.selectedIndex > 0) {\n      document.querySelectorAll(`.demon:not(#${e?.target.id})`)[0].selectedIndex = 0;\n      document.querySelectorAll(`.demon:not(#${e?.target.id})`)[1].selectedIndex = 0;\n    }\n  });\n});\ndocument.querySelectorAll(`#${dropWeapon.id}, #${weaponType.id}`).forEach(x => {\n  x.addEventListener(\"change\", e => {\n    if (e.target === weaponType || weaponType.value === \"ChargeBlade\") {\n      classChange();\n    }\n  });\n});\ndocument.querySelectorAll(`#${dropWeapon.id}, #${weaponType.id}`).forEach(x => {\n  x.addEventListener(\"change\", () => {\n    if (weaponType.value !== \"Bow\") {\n      return;\n    }\n    document.querySelectorAll(\"#BowCoating>option\").forEach(x => x.remove());\n    const thisArr = [];\n    getWeaponMR().coatings.forEach(thisCoating => {\n      const thisOption = document.createElement(\"option\");\n      thisOption.textContent = thisCoating;\n      document.getElementById(\"BowCoating\").append(thisOption);\n      thisArr.push(window.info.skills[thisCoating]);\n    });\n    window.info.skills.BowCoating = thisArr;\n  });\n});\n\nexport function classChange() {\n  if (!window.info) return;\n\n  if (weaponType.value.includes(\"Bow\")) document.getElementById(\"Sharpness\").selectedIndex = 0;\n  if (document.getElementsByClassName(\"inputs\").length > 0) comboReset();\n\n  // Changes Burst value depending on weapon\n  switch (weaponType.value) {\n    case \"DualBlades\":\n      window.info.skills.Burst = window.info.skills.BurstDualBlades;\n      break;\n    case \"Bow\":\n      window.info.skills.Burst = window.info.skills.BurstBow;\n      break;\n    case \"LightBowGun\":\n      window.info.skills.Burst = window.info.skills.BurstBowGun;\n      break;\n    case \"HeavyBowGun\":\n      window.info.skills.Burst = window.info.skills.BurstBowGun;\n      break;\n    default:\n      window.info.skills.Burst = window.info.skills.BurstStandard;\n      break;\n  }\n\n  window.info.skills.Bombardier = /Gun|Charge/.test(weaponType.value)\n    ? window.info.skills.BombardierSource[weaponType.value]\n    : [];\n\n  document.querySelectorAll(`.skill:not(.${weaponType.value})`).forEach(x => (x.selectedIndex = 0));\n  document.querySelectorAll(\".classSpecific\").forEach(div => {\n    div.style.display = \"\";\n    div.parentElement.style.display = \"\";\n\n    if (div.classList.contains(weaponType.value)) {\n      if (div.tagName === \"BUTTON\" || div.tagName === \"DIV\") {\n        div.style.display = \"\";\n      } else {\n        div.parentElement.style.display = \"\";\n      }\n    } else if (div.tagName === \"BUTTON\" || div.tagName === \"DIV\") {\n      div.style.display = \"none\";\n    } else {\n      div.parentElement.style.display = \"none\";\n    }\n  });\n  document.querySelectorAll(\"div\").forEach(x => {\n    if (\n      Object.values(x.children).some(\n        y => x.childElementCount <= 3 && y.tagName === \"SELECT\" && x.style.display !== \"none\"\n      )\n    ) {\n      x.classList.add(\"dropContainer\");\n    }\n  });\n\n  // document.getElementById(\"weaponId\").innerHTML = \"\";\n  // document.getElementById(\"weaponId\").textContent = weaponType.value;\n  // if (weaponType.value === \"ChargeBlade\") meleeElements();\n}\n\nexport function meleeElements() {\n  if (getWeaponMR().phialType === \"Impact Phial\") {\n    document.getElementById(\"ImpactShieldCharge\").parentNode.style = 'display:\"';\n    document.getElementById(\"EleShieldCharge\").parentNode.style = \"display:none\";\n    document.getElementById(\"EleShieldCharge\").selectedIndex = 0;\n    return;\n  }\n  if (getWeaponMR().phialType !== \"Element Phial\") {\n    return;\n  }\n  document.getElementById(\"ImpactShieldCharge\").parentNode.style = \"display:none\";\n  document.getElementById(\"ImpactShieldCharge\").selectedIndex = 0;\n  document.getElementById(\"EleShieldCharge\").parentNode.style = 'display:\"\"';\n}\n\n// Calculate the base and actual number of shots that can be fired in a fixed time limit (60 seconds), taking into account recoil and reload times, clip size, and the chance of not consuming ammo with spareShot\nconst shotsPerTimeLimit = 60;\n\nexport function calculateAmmoFrames(power) {\n  let attackName = /Sub-Lv|Explosion| Procs|\\(RF\\+\\d\\)/g.test(power.attackName)\n    ? power.attackName.replace(/Sub-| Explosion| \\(RF\\+\\d\\) Procs| Procs| \\(RF\\+\\d\\)/g, \"\")\n    : power.attackName;\n  attackName = /(?<!Lv)\\d/.test(attackName)\n    ? `${attackName.slice(0, attackName.length - 1)}Lv${attackName.slice(-1)}`\n    : attackName;\n  const ammo = {};\n  ammo.ammoIncrease = window.info.ammo.AmmoUp[attackName][document.getElementById(\"AmmoUp\").selectedIndex];\n  // Converts to number to find frames used while staying within possible parameters\n  ammo.recoilSpeed =\n    window.info.ammo.recoil[attackName][\n      Math.max(\n        0,\n        Math.min(\n          5,\n          power.recoil -\n            1 +\n            document.getElementById(\"RecoilDown\").selectedIndex +\n            (window.info.skills.BowgunBarrel[document.getElementById(\"BowgunBarrel\").selectedIndex ?? 0].Silencer > 0\n              ? document.getElementById(\"Tune-Up\").selectedIndex +\n                window.info.skills.BowgunBarrel[document.getElementById(\"BowgunBarrel\").selectedIndex ?? 0].Silencer\n              : 0) -\n            (document.getElementById(\"CriticalFirePower\").selectedIndex > 0 ? 2 : 0)\n        )\n      )\n    ];\n  ammo.recoilSpeed = /\\(RF\\+\\d\\)/.test(power.attackName)\n    ? `${ammo.recoilSpeed} ${power.attackName.match(/\\(RF\\+\\d\\)/)[0]}`\n    : ammo.recoilSpeed;\n  ammo.recoilFrames = window.info.ammo.recoil.frames[ammo.recoilSpeed];\n  ammo.reloadSpeed =\n    window.info.ammo.reload[attackName][\n      Math.max(\n        0,\n        Math.min(\n          8,\n          power.reload +\n            document.getElementById(\"ReloadSpeed\").selectedIndex +\n            window.info.skills.BowgunBarrel[document.getElementById(\"BowgunBarrel\").selectedIndex ?? 0].reload +\n            (document.getElementById(\"BowgunBarrel\")?.selectedIndex === 0 &&\n            document.getElementById(\"Tune-Up\").selectedIndex > 0\n              ? 1\n              : 0) -\n            (document.getElementById(\"ElementalReload\").selectedIndex > 0 ? 2 : 0)\n        )\n      )\n    ];\n  ammo.reloadFrames = window.info.ammo.reload.frames[ammo.reloadSpeed];\n  ammo.clipSize = power.clipSize[power.isUsed] + ammo.ammoIncrease;\n  ammo.spareShot = Math.max(\n    0,\n    window.info.skills.SpareShot[document.getElementById(\"SpareShot\").selectedIndex] +\n      Number(document.getElementById(\"spareAdjust\").value)\n  );\n  if (/(?<!snipe.*)explosion/.test(attackName) && document.getElementById(\"Bombardier\").selectedIndex > 0) {\n    ammo.spareShot += window.info.skills.Bombardier[attackName.match(/Sticky|Wyvern/)[0]][2];\n  }\n\n  ammo.shotsPerMinBase = shotsCheck(\n    ammo.recoilFrames / 30, // Recoil time converted to seconds\n    ammo.reloadFrames / 30, // Reload time converted to seconds\n    power.clipSize[power.isUsed], // Base clip size\n    shotsPerTimeLimit\n  );\n  ammo.shotsPerMin = shotsCheck(\n    ammo.recoilFrames / 30, // Recoil time converted to seconds\n    ammo.reloadFrames / 30, // Reload time converted to seconds\n    ammo.clipSize, // Actual clip size\n    shotsPerTimeLimit,\n    100 / ammo.spareShot // Chance of not consuming ammo with spareShot\n  );\n\n  // Calculate the percentage increase in shots fired due to increases in clip size and/or the chance of not consuming ammo with spareShot\n  ammo.shotsPerGain = `${((ammo.shotsPerMin / ammo.shotsPerMinBase - 1) * 100).toFixed(2)}%`;\n  const pierceTics = {\n    PierceEle: 3,\n    Pierce1: 1.5,\n    Pierce2: 1.1,\n    Pierce3: 1\n  };\n  attackName = attackName.replace(/ Lv/, \"\");\n  ammo.ticsAdjust = power.ticsPer += 1;\n  if (/Pierc/.test(attackName) && dropMon.value !== \"Toadversary\") {\n    power.ticsPer = Math.min(\n      power.ticsPer,\n      Math.ceil(\n        // gets smallest large gold crown size and converts size to meters\n        (window.info.monster[dropMon.value].size.base_size * window.info.monster[dropMon.value].size.king_boarder) /\n          100 /\n          // gets appropriate meters per tic rate\n          pierceTics[/Pierce[1-3]/.test(attackName) ? attackName : \"PierceEle\"]\n      ) *\n        // if RF accounts for the extra tics\n        (power.attackName.includes(\"RF+\") ? +power.attackName.trim().slice(-2, -1) : 1)\n    );\n\n    // ammo.ticsAdjust =\n    //   power.ticsPer * JSON.parse(document.getElementById(\"pierceAdjust\").value)[attackName.slice(-1) > 0 ? 0 : 1];\n    // if (power.attackName.includes(\"RF+\")) {\n    //   power.ticsAdjust = Math.min(power.ticsPer + 1, (power.ticsAdjust * +power.attackName.trim().slice(-2)));\n    // }\n  }\n  // Reduces total damage from pierce attacks displayed depending on selection\n  // top is for piercing attacks, bottom is for elemental piercing attacks(elemental pierce is reduced by a higher percentage)\n  // if (/Pierce Lv|Pierce [1-3]/.test(attackName)) {\n  // ammo.ticsAdjust *= JSON.parse(document.getElementById(\"pierceAdjust\").value)[0];\n  // } else if (/Pierc/.test(attackName)) {\n  // ammo.ticsAdjust *= JSON.parse(document.getElementById(\"pierceAdjust\").value)[1];\n  // }\n\n  return ammo;\n}\n\nexport function comboReset() {\n  if (!document.getElementsByClassName(\"inputs\").length) return;\n  // Resets the combo inputs to default values\n  if (\n    !(\n      !/BowGun/.test(document.getElementById(\"previousWeaponType\").value) &&\n      document.getElementById(\"previousWeaponType\").value !== \"\"\n    )\n  ) {\n    return;\n  }\n  document.querySelectorAll(\".comboHits\").forEach(x => x.remove());\n  document.querySelectorAll(\"#dpsBody>tr:nth-child(1)>td:nth-child(n+3)\").forEach(x => (x.value = 0));\n  document.querySelectorAll(\".inputs\").forEach(x => (x.value = 0));\n  document.querySelectorAll(\".inputComboRepeat\").forEach(x => (x.value = 1));\n  comboTracker = [];\n}\n\n// export function filterTableForComboAttacks() {\n// document.querySelectorAll(\".inputs\").forEach((element, index) => {\n// if (\n// /blue/.test(document.getElementById(\"filterCombo\").className) &&\n// (element.value == 0 || element.style.display.includes(\"none\"))\n// ) {\n// document.getElementsByClassName(index).forEach(x=>x.style.display = \"none\");\n// } else {\n// document.getElementsByClassName(index).forEach(element => element.style.display = \"\");\n// }\n// });\n// }\n\n// document.querySelectorAll(\".augButton\").forEach((x) =>\n// x.addEventListener(\"mousedown\", (e) => {\n// let ugh = 0;\n// const label = document.getElementsByClassName(`${e.target.className.split(\" \")[0]} augLabel`)[0];\n// document.querySelectorAll(\".augLabel\").forEach((output) => {\n// ugh += Number(output.value);\n// });\n// if (\n// e.target.className.includes(\"inc\") &&\n// ugh + Number(e?.target.value) <= 9 &&\n// ((((Number(label.value) + Number(e?.target.value) <= 9 &&\n// ||\n// Number(label.value) < 7) &&\n// ||\n// Number(label.value) !== 7)\n// ) {\n// document.getElementById(\"weaponQurious\").textContent = `Remaining Augments ${\n// 8 - ugh - Number(e?.target.value)\n// }/8`;\n// label.value = Number(label.value) + Number(e?.target.value);\n// } else if (e.target.classList.contains(\"dec\") && Number(label.value) > 0) {\n// document.getElementById(\"weaponQurious\").textContent = `Remaining Augments ${\n// 8 - ugh + Number(e?.target.value)\n// }/8`;\n// label.value = Number(label.value) - Number(e?.target.value);\n// }\n// if (/ampage/.test(e?.target.className)) {\n// rampageSelect();\n// }\n// if (e.target.classList.contains(\"sharpnessAug\")) getComboHitsAndSetSharpness();\n// dataCompile(e);\n// })\n// );\n\n// document.getElementById('taWikiSetBuilder').addEventListener('paste', e => {\n// \te?.preventDefault();\n// \tif (!Array.isArray(document.getElementById('taWikiSetBuilder').value[0]))\n// \t\treturn;\n\n// \tconst pasteurl = (e?.clipboardData || window.clipboardData).getData('text');\n// \tdocument.querySelectorAll('select.skill').forEach(skill => {\n// \t\tlastEvent = skill;\n// \t\tresetSkillDescription(skill);\n// \t});\n// \tdecodeURL(e, pasteurl);\n// \tdocument.getElementById('taWikiSetBuilder').textContent\n// \t\t= document.createTextNode('Paste TA Wiki Set Builder Link Here');\n\n// \tdataCompile(e);\n// });\n\n// export function decodeURL(e, url = document.getElementById('taWikiSetBuilder').value) {\n// \tif (/mhrise\\.wiki-'DualBlades'\\.com/.test(url)) {\n// \t\tconst decode = decodeURIComponent(url);\n// \t\tconst skills = decode.match('(?<=skills=)(.*?)(?=&)')[0].split(',');\n// \t\tresetSkills(\n// \t\t\tdocument.querySelectorAll(`.thisSkill:not(.${weaponType.value})`),\n// \t\t);\n// \t\t$.each(skills, (_index, value) => {\n// \t\t\tconst thisSkill = value.split('Lv');\n// \t\t\tthisSkill[0] = thisSkill[0].replace(/(\\s)|(\\/)/g, '');\n// \t\t\tthisSkill[0] = thisSkill[0].replace(/'s/g, 's');\n// \t\t\tthisSkill[0] = /Fire|Water|Wind|Ice|Dragon/.test(thisSkill[0])\n// \t\t\t\t? 'ElementalAttack'\n// \t\t\t\t: thisSkill[0];\n// \t\t\tthisSkill[0] = /Kush|Teos|Storm|Thunder|Wind/.test(thisSkill[0])\n// \t\t\t\t? 'ElderEssence'\n// \t\t\t\t: thisSkill[0];\n// \t\t\tif (\n// \t\t\t\tdocument.querySelector(`#${thisSkill[0]}`) !== null\n// \t\t\t\t&& document.querySelector(`#${thisSkill[0]}`).style.display !== 'none'\n// \t\t\t) {\n// \t\t\t\tdocument.querySelector(`#${thisSkill[0]}`).selectedIndex = thisSkill[1];\n// \t\t\t}\n\n// \t\t\tresetWikiText();\n// \t\t});\n// \t} else if (Array.isArray(JSON.parse(url))) {\n// \t\tloadState(url);\n// \t\tresetWikiText();\n// \t}\n// }\n\n// document.querySelectorAll('#taWikiSetBuilder').on('keyup', e => {\n// \te?.target.textContent\n// \t\t= (e?.originalEvent.key === 'v' && e?.originalEvent.ctrlKey)\n// \t\t|| e?.originalEvent.metaKey\n// \t\t\t? e?.target.textContent === 'Build Successfully Decrypted'\n// \t\t\t: 'Paste TA Wiki Set Builder Link Here';\n// });\n\n// export function resetWikiText() {\n// \tdocument.getElementById('taWikiSetBuilder').value = '';\n// \tdocument.getElementById('taWikiSetBuilder').value\n// \t\t= 'Paste TA Wiki Set Builder Link Here';\n// }\n// export function saveState(ugh = [[], [], [], [], [], []]) {\n// document.getElementsByTagName(\"select\").forEach((x) => {\n// ugh[0].push(x.selectedIndex);\n// });\n// document.querySelectorAll(\"input.check\").forEach((x) => {\n// ugh[1].push(x.checked);\n// });\n// document.getElementsByClassName(\"inputs\").forEach((x) => {\n// ugh[2].push(x.value);\n// });\n// ugh[3].push(comboTracker);\n// document.getElementsByClassName(\"scroll\").forEach((x) => {\n// ugh[4].push(x.className);\n// });\n// ugh[5] = \"\";\n// document.querySelectorAll(\"output.augLabel\").forEach((x) => (ugh[5] += x.textContent));\n// const copyText = document.createElement(\"input\");\n// copyText.setAttribute(\"value\", JSON.stringify(ugh));\n// copyText.select();\n// copyText.setSelectionRange(0, 99999);\n// /* For mobile devices */\n// navigator.clipboard.writeText(copyText.value);\n// return ugh;\n// }\nconst toClipboardNoFocus = result => {\n  const text = document.createElement(\"textarea\");\n  text.value = result;\n  document.body.appendChild(text);\n  text.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(text);\n};\nconst toClipboard = state => {\n  const data = JSON.stringify(state);\n  navigator.clipboard.writeText(data);\n};\nexport const saveState = () => {\n  const ugh = [dropWeapon.selectedIndex, weaponType.selectedIndex];\n  document.querySelectorAll(\"#skillSelect label\").forEach(x => {\n    ugh.push([x.textContent, +x.nextElementSibling.textContent.slice(-1)]);\n  });\n  toClipboardNoFocus(\n    JSON.stringify([\n      [ugh],\n      Object.values(document.querySelectorAll(\"section.armorDisplay\")).map(card =>\n        [].concat(\n          Object.values(card.querySelectorAll(\".armor,select.augmentType,select.augment\")).map(el => el.selectedIndex),\n          Object.values(card.querySelectorAll(\"select.armorDisplay\")).map(el => el.selectedIndex)\n        )\n      )\n    ])\n  );\n};\n\nexport const loadState = () => {\n  navigator.clipboard.readText().then(async data => {\n    const savedVal = JSON.parse(data);\n    const initalData = await savedVal.shift()[0];\n    dropWeapon.selectedIndex = await initalData.shift();\n    weaponType.selectedIndex = await initalData.shift();\n    await rampageSelect();\n    await initalData.forEach(x => createSkillSelections(x[0], x[1]));\n    getSetBuilds(15);\n  });\n};\ndocument.getElementById(\"saveState\")?.addEventListener(\"click\", () => saveState());\ndocument.getElementById(\"loadState\")?.addEventListener(\"click\", () => loadState());\n// export function loadState(valuesToSet, pass = false, e = window.event) {\n// if (e?.target?.tagName !== 'BODY' && (e || pass)) {\n// valuesToSet = JSON.parse(valuesToSet);\n// }\n\n// const selectElements = document.querySelectorAll(\"select\");\n\n// selectElements[0].selectedIndex = valuesToSet[0][0];\n// classChange();\n// weaponSelect();\n// for (let i = 0; i < valuesToSet[5].length; i++) {\n// document.querySelectorAll(\"output.augLabel\")[i].textContent = valuesToSet[5][i];\n// }\n\n// selectElements[3].selectedIndex = valuesToSet[0][3];\n// rampageSelect();\n// selectElements[80].selectedIndex = valuesToSet[0][document.querySelectorAll(\"select\").length - 10];\n// document.getElementById(\"dropQuest\").selectedIndex = 1;\n// partSelect();\n// healthSelect();\n\n// document.querySelectorAll(\"select\").forEach((select, index) => {\n// if (index !== 0 && index !== 3 && index !== document.querySelectorAll(\"select\").length - 10) {\n// select.selectedIndex = valuesToSet[0][index];\n// }\n// });\n// document.querySelectorAll(\"input.check\").forEach((element, index) => {\n// element.checked = valuesToSet[1][index];\n// });\n\n// document.querySelectorAll(\".inputs\").forEach((input, index) => {\n// input.value = valuesToSet[2][index];\n// });\n// document.querySelectorAll(\".scroll\").forEach((scroll, index) => {\n// scroll.className = valuesToSet[4][index];\n// });\n// window.info.skills.MailofHellfire = document.querySelectorAll(\"#redScroll\").classList.contains(\"invis\")\n// ? window.info.skills.MailofHellfireSource.blue\n// : window.info.skills.MailofHellfireSource.red;\n// window.info.skills.Dereliction = document.querySelectorAll(\"#redScroll\").classList.contains(\"invis\")\n// ? window.info.skills.DerelictionSource.blue\n// : window.info.skills.DerelictionSource.red;\n\n// [...comboTracker] = valuesToSet[3][0];\n// document.querySelectorAll(\"input:not(comboRepeat)\").forEach((thisInput) => {\n// if (thisInput.value > 0) {\n// let difference = document.querySelectorAll(\".inputs\")[thisInput.id]?.value ?? 0 - timesUsed(thisInput.id);\n// while (difference > 0) {\n// comboTracker.push(thisInput.id);\n// --difference;\n// }\n\n// while (difference < 0) {\n// comboTracker.splice(comboTracker.lastIndexOf(thisInput.id), 1);\n// ++difference;\n// }\n// }\n// });\n// dataCompile();\nupdateComboDisplay();\n// setTimeout(() => {\n// \tdocument.querySelectorAll('input#taWikiSetBuilder')[0].value\n// \t\t= 'Paste TA Wiki Set Builder Link Here';\n// }, 2000);\n// document.querySelectorAll('input#taWikiSetBuilder')[0].value = 'Build Succsefully Loaded';\n\nexport function weaponTypeSelect() {\n  populateDropDowns(weaponTypes, weaponType);\n}\n\nexport function weaponSelect() {\n  Object.values(dropWeapon.children).forEach(x => x.remove());\n  const filter = document.getElementById(\"weaponFilter\").classList.contains(\"blue\");\n  let str = \"\";\n  window.info[weaponType.value].weapons.forEach((weapon, index) => {\n    if (filter && weapon.rank < 10) return;\n    str += `<option value=\"${index}\">${weapon.weapon}</option>`;\n  });\n  dropWeapon.innerHTML = str;\n}\n\nexport function rampageSelect() {\n  const decoArr = [];\n  const [...decos] = window.info[weaponType.value].weapons[dropWeapon.value].decos;\n  let markerCount = 2;\n  for (let i = 3; i >= 0 && markerCount; i--) {\n    while (decos[i] > 0) {\n      decoArr.push(i + 1);\n      --decos[i];\n      --markerCount;\n    }\n  }\n  setDecoDisplay(\"weapon\", decoArr);\n\n  document.querySelectorAll(\"#weaponRampage>*\").forEach(menu => (menu.style.display = \"none\"));\n  document.getElementById(\"weaponRampage0\").style.display = \"\";\n  if (getWeaponMR().rampageSlots) {\n    const usableDecos = [];\n    document.getElementById(\"rampImg\").src = document\n      .getElementById(\"rampImg\")\n      .src.replace(/ramp\\d/, `ramp${Math.min(3, getWeaponMR().rampageSlots + window.info.augIndex.rampageAug)}`);\n    Object.keys(window.info.rampage.rampageDecos).forEach(rampDeco => {\n      if (Number(rampDeco.slice(-1)) <= Math.min(3, getWeaponMR().rampageSlots + window.info.augIndex.rampageAug)) {\n        usableDecos.push(window.info.rampage.rampageDecos[rampDeco]);\n      }\n    });\n    populateDropDowns(usableDecos, document.getElementById(\"weaponRampage0\"));\n    return;\n  }\n  document.querySelectorAll(\"#weaponRampage>*\").forEach(menu => {\n    menu.selectedIndex = 0;\n    menu.style.display = \"none\";\n  });\n  document.getElementById(\"weaponRampage0\").style.display = \"\";\n  if (/Rampage/.test(getWeaponMR().weapon)) {\n    window.info.rampage[getWeaponMR().weapon].Rampage.forEach((vals, index) => {\n      document.querySelector(\"#weaponRampage\").children[index].style.display = \"\";\n      populateDropDowns(Object.values(vals), document.querySelector(\"#weaponRampage\").children[index]);\n    });\n  } else {\n    getWeaponMR().rampage.forEach(rampSkill => {\n      const option = document.createElement(\"option\");\n      option.value = window.info.rampage.keys2[rampSkill];\n      option.textContent = window.info.rampage.keys2[rampSkill];\n      document.getElementById(\"weaponRampage0\").append(option);\n    });\n  }\n}\nexport function populateDropDowns(json, dropDown, value = json) {\n  let elString = \"\";\n  json.forEach((text, index) => {\n    elString += `<option value=\"${value[index]}\">${text}</option>`;\n  });\n  dropDown.innerHTML = elString;\n}\nexport function monsterSelect() {\n  populateDropDowns(Object.keys(window.info.monster).sort(), dropMon);\n  dropMon.selectedIndex = Object.keys(window.info.monster).indexOf(\"Toadversary\");\n}\n\nexport const getEleHZ = eleType => window.info.monster[dropMon.value].parts[dropHZ.selectedIndex][lower(eleType)];\n\nexport function getRawHZ(damageType) {\n  return window.info.monster[dropMon.value].parts[dropHZ.selectedIndex][lower(damageType)] === undefined\n    ? 100\n    : document.getElementById(\"WaterBlight\").checked\n    ? Math.min(\n        100,\n        ~~(\n          Math.max(\n            window.info.monster[dropMon.value].parts[dropHZ.selectedIndex][lower(damageType)],\n            window.info.monster[dropMon.value].parts[dropHZ.selectedIndex][lower(damageType)] * 0.63 + 22.2\n          ) + 3\n        )\n      )\n    : window.info.monster[dropMon.value].parts[dropHZ.selectedIndex][lower(damageType)];\n}\n\nexport const getUsedAttacks = (weapon = weaponType.value) => {\n  let attacks = {};\n  if (weaponType.value === \"InsectGlaive\") {\n    attacks = Object.fromEntries(\n      Object.entries(window.info[\"InsectGlaive\"].attacks).filter(\n        skill => !/Sever|Blunt|Kinsect|Dust|Powder|Mark/.test(skill)\n      )\n    );\n\n    return {\n      ...attacks\n    };\n  }\n\n  if (weaponType.value === \"ChargeBlade\") {\n    const phialType = getWeaponMR().phialType === \"Impact Phial\" ? \"Element Phial|Elemental Phial\" : \"Impact Phial\";\n    const regexp = new RegExp(`${phialType}`);\n\n    attacks = Object.fromEntries(\n      Object.entries(window.info[\"ChargeBlade\"].attacks).filter(skill => !regexp.test(skill))\n    );\n\n    return {\n      ...attacks\n    };\n\n    //  Filters bow attacks for only the usable attacks\n  }\n\n  if (weaponType.value === \"Bow\") {\n    let usableKeys = \"\";\n    const totalKeys =\n      document.getElementById(\"BowChargePlus\").selectedIndex === 1 && getWeaponMR().baseCharge < 4\n        ? getWeaponMR().baseCharge + 1\n        : getWeaponMR().baseCharge;\n    getWeaponMR().bowShot.forEach((element, index) => {\n      if (index < totalKeys) {\n        usableKeys += `|Lv${element.match(\"[1-5]\")[0]} ${element.match(\"Normal|Rapid|Pierce|Spread\")[0]}`;\n      }\n    });\n    const regex = new RegExp([usableKeys.slice(1)]);\n    let ugh = Object.entries(window.info[\"Bow\"].attacks).filter(attack => regex.test(attack[0]));\n    ugh = [].concat(Object.entries(window.info[\"Bow\"].attacks).splice(0, 1), ugh);\n    ugh = ugh.concat(Object.entries(window.info[\"Bow\"].attacks).splice(136));\n    attacks = Object.fromEntries(ugh);\n    return {\n      ...attacks\n    };\n  }\n\n  if (weaponType.value === \"Gunlance\") {\n    attacks = Object.fromEntries(Object.entries(window.info[\"Gunlance\"].attacks).splice(0, 27));\n    return {\n      ...attacks\n    };\n  }\n\n  if (weaponType.value === \"LightBowGun\" || weaponType.value === \"HeavyBowGun\") {\n    const { isRapidFire, clipSize } = window.info[weaponType.value].weapons[dropWeapon.value];\n    let usableAmmo = [];\n    let index = 0;\n    for (const ammo of window.info.ammo.keys) {\n      if (clipSize[++index]) {\n        usableAmmo.push(isRapidFire?.indexOf(ammo[0]) >= 0 ? ammo[1] : ammo[0]);\n      }\n    }\n    usableAmmo = usableAmmo.concat(\n      Object.keys(window.info.ammo).filter(x =>\n        weaponType.value === \"LightBowGun\" ? /lbg|Wyvern Blast(?! before)/.test(x) : /hbg|Wyverns/.test(x)\n      )\n    );\n    attacks = Object.fromEntries(Object.entries(window.info.ammo).filter(skill => timesUsed(skill[0], usableAmmo) > 0));\n    return {\n      ...attacks\n    };\n  }\n\n  return {\n    ...window.info[weapon].attacks\n  };\n};\n\nexport const getAttacks = (weapon = weaponType.value) => ({\n  ...window.info[weapon].attacks\n});\nexport const getWeapon = () =>\n  window.info[weaponType.value].weapons[dropWeapon.selectedIndex].rampageSlots > 0 ? getWeaponMR() : getRampageSkills();\n\nexport function partSelect() {\n  document.querySelectorAll(\"#dropHZ>option\").forEach(x => x.remove());\n  const parts = [];\n  window.info.monster[dropMon.value].parts.forEach(hitzone => {\n    parts.push([`${hitzone.part} ${hitzone.state}`]);\n  });\n\n  populateDropDowns(parts, dropHZ);\n}\nexport function questSelect() {\n  document.querySelectorAll(\"#HR>option\").forEach(x => x.remove());\n  document.querySelectorAll(\"#MR>option\").forEach(x => x.remove());\n  const quests = Object.values(window.info.quest).filter(quest => {\n    if (quest.target.some(mon => mon.name === dropMon.selectedOptions[0].textContent)) {\n      return quest;\n    }\n  });\n  quests.forEach(quest => {\n    quest.target.forEach((x, index) => {\n      if (x.name !== dropMon.value) {\n        return;\n      }\n      const option = document.createElement(\"option\");\n      option.value = quest.quest;\n      option.textContent = quest.quest;\n      document.getElementById(quest.rank).append(option);\n    });\n  });\n  updateQuest(\n    document.querySelectorAll(\"#MR>option\")?.length > 0\n      ? document.querySelectorAll(\"#MR>option\")[0].textContent\n      : document.querySelectorAll(\"#HR>option\")[0].textContent\n  );\n\n  if (document.querySelectorAll(\"MR>option\")?.length) {\n    document.getElementById(\"MR\")?.classList.remove(\"augInvis\");\n  } else {\n    document.getElementById(\"MR\")?.classList.add(\"augInvis\");\n  }\n  if (document.querySelectorAll(\"HR>option\")?.length) {\n    document.getElementById(\"HR\")?.classList.remove(\"augInvis\");\n  } else {\n    document.getElementById(\"HR\")?.classList.add(\"augInvis\");\n  }\n}\n\nexport function healthSelect() {\n  let modifier = 1;\n  switch (document.getElementById(\"players\").selectedOptions[0].value) {\n    case \"1p\":\n      modifier = 1;\n      break;\n    case \"2p\":\n      modifier = 1.35;\n      break;\n    case \"3p\":\n      modifier = 1.7;\n      break;\n    case \"4p\":\n      modifier = 2;\n      break;\n  }\n  window.info.quest[dropQuest.value].target.forEach(x => {\n    if (x.name === dropMon.value) {\n      const health = x.hp.map(hp => hp * modifier);\n      populateDropDowns(health, document.getElementById(\"health\"));\n    }\n  });\n}\n\n// document.querySelectorAll('#taWikiSetBuilder').on('mousedown', e => {\n// if (document.querySelectorAll(e?.target).val() === 'Paste TA Wiki Set Builder Link Here') {\n// document.querySelectorAll(e?.target).val('');\n// }\n// });\n\nexport function isUnique(value, index, self) {\n  return self.indexOf(value) === index;\n}\n\nexport function updateQuest(value) {\n  document.getElementById(\"dropQuest\").selectedOptions[0].value = value;\n  document.getElementById(\"dropQuest\").selectedOptions[0].textContent = value;\n  document.getElementById(\"questDiv\")?.classList.add(\"augInvis\");\n}\n\nconst capitalAll = str => str.replace(/(?<!\\w)\\w/g, letter => letter.toUpperCase());\n\nexport const capital = (str, index = 0) => str[index].toUpperCase() + str.slice(1);\n\nexport const lower = str => str[0].toLowerCase() + str.slice(1);\n\n// Calculate the number of shots that can be fired in a fixed time limit (60 seconds), taking into account recoil and reload times, clip size, and the chance of not consuming ammo with spareShot\nexport function shotsCheck(convertedRecoilFrames, convertedReloadFrames, clipSize, maxTime = 60, spareShot = 0) {\n  let spareShotAccumulator = 0;\n  spareShotAccumulator += spareShot;\n  let timeUsed = 0;\n  let totalShots = 0;\n  while (timeUsed <= maxTime) {\n    for (let i = 0; i < clipSize; ++i) {\n      timeUsed += convertedRecoilFrames;\n      totalShots += totalShots + timeUsed <= maxTime ? 1 : 0; // Increment totalShots by 1 only if the sum of totalShots and timeUsed is less than or equal to maxTime\n      if (totalShots >= spareShotAccumulator && spareShot !== 0 && spareShot !== Infinity) {\n        --i;\n        spareShotAccumulator += spareShot;\n      }\n    }\n\n    timeUsed += convertedReloadFrames;\n  }\n\n  return totalShots;\n}\n\nexport function getHealthPools(hp = [[], [], [], []]) {\n  const quest = window.info.quest.filter(x => x.quest === dropQuest.value);\n  quest.target[dropMon.value].hp.forEach(health => {\n    hp[0].push(health);\n    hp[1].push(~~(health * 1.35));\n    hp[2].push(~~(health * 1.7));\n    hp[3].push(~~(health * 2));\n  });\n  return hp;\n}\n\nexport function resetSkillDescription() {\n  if (lastEvent === \"\" || (lastEvent === document.getElementById(\"BowCoating\") && weaponType.value !== \"Bow\")) {\n    return;\n  }\n\n  let theseOptions = [];\n  if (Object.values(lastEvent.children).some(x => x.tagName === \"OPTGROUP\")) {\n    theseOptions = document.querySelectorAll(`${lastEvent.id}>*>*`);\n    theseOptions.splice(-2);\n    theseOptions.splice(0, 0, lastEvent[0]);\n  } else {\n    theseOptions = Object.values(lastEvent.children);\n  }\n\n  theseOptions.forEach((thisOption, index) => {\n    let newText = \"\";\n    if (lastEvent === document.getElementById(\"BowCoating\")) {\n      newText = getWeaponMR().coatings[index];\n    } else if (lastEvent === document.getElementById(\"BowgunBarrel\")) {\n      newText = [\"----\", \"Long\", \"Power\", \"Silencer\", \"Guard-Up\"][index];\n    } else if (lastEvent === document.getElementById(\"Dereliction\")) {\n      newText = [\"----\", \"Lv-1-1\", \"Lv-1-2\", \"Lv-1-3\", \"Lv-2-1\", \"Lv-2-2\", \"Lv-2-3\", \"Lv-3-1\", \"Lv-3-2\", \"Lv-3-3\"][\n        index\n      ];\n    } else {\n      let skillLvl = index + 0;\n      if (lastEvent.children[1].tagName === \"OPTGROUP\" && index !== 0) {\n        if (lastEvent.id === \"Burst\" && index >= 2) {\n          skillLvl = index - 1;\n        } else {\n          skillLvl = index % 3 === 0 ? 3 : index % 3;\n        }\n      }\n\n      newText = lastEvent.id === \"Burst\" && index === 1 ? \"Base Bonus\" : `Lv-${skillLvl}`;\n    }\n\n    thisOption.textContent = index === 0 ? \"----\" : newText;\n  });\n  lastEvent = \"\";\n}\n\ndocument.querySelectorAll(\".buildSkills\").forEach(x =>\n  x.addEventListener(\"mousedown\", e => {\n    if (lastEvent !== \"\" && lastEvent === e?.target && !e.target.className.includes(\"augment\")) return;\n    if (lastEvent !== \"\") {\n      resetSkillDescription();\n    }\n\n    if (e.target.classList.contains(\"skill\")) {\n      setSkillDescriptions(e?.target);\n    }\n    if (e.target.tagName === \"INPUT\" && e.target.className.includes(\"skillInput\")) lastEvent = e.target;\n  })\n);\n\ndocument.querySelectorAll(\"select.skill\").forEach(x =>\n  x.addEventListener(\"change\", e => {\n    resetSkillDescription();\n\n    // dataCompile();\n    e?.target.blur();\n  })\n);\n\nexport function setSkillDescriptions(thisSkill) {\n  if (thisSkill.classList.contains(\"skill\") && Array.isArray(window.info.skills[thisSkill.id])) {\n    window.info.skills[thisSkill.id].forEach((statInc, index) => {\n      let option;\n      if (index === 0) {\n        option = thisSkill.id;\n      } else if (thisSkill.id === \"RecoilDown\" || thisSkill.id === \"ReloadSpeed\") {\n        option = `${thisSkill.id.slice(0, 6)} ${thisSkill.id.slice(6)} +${index}`;\n      } else if (thisSkill.id === \"AmmoUp\" || thisSkill.id === \"SpareShot\") {\n        const inc =\n          thisSkill.id === \"AmmoUp\"\n            ? [\"No Change\", \"Lv2 & Ele Ammo\", \"Lv3 & Dragon Ammo\"]\n            : [\"Spare Shot +5%\", \"Spare Shot +10%\", \"Spare Shot +20%\"];\n        option = `${index}: ${inc[index - 1]}`;\n      } else if (thisSkill.id === \"Marksman\") {\n        option = `${index}: ${\n          [\n            \"Chance 20% Raw  + 5% EFR +1%\",\n            \"Chance 20% Raw+10% EFR +2%\",\n            \"Chance 60% Raw  + 5% EFR +3% \",\n            \"Chance 40% Raw+10% EFR +4%\"\n          ][index - 1]\n        }`;\n      } else if (thisSkill.id === \"Bombardier\") {\n        option =\n          weaponType.value === \"HeavyBowGun\"\n            ? [\n                \"Bombardier\",\n                \"1: Raw + 10% EFR + 10%\",\n                \"2: Sticky+10% Wyvern+15%\",\n                \"3: Raw + 20% EFR + 16%\",\n                \"4: Raw + 25% EFR + 17%\"\n              ][index]\n            : `${index}: Raw +${window.info.skills.Bombardier[index][0]}% EFR +${window.info.skills.Bombardier[index][1]}`;\n      } else if (thisSkill.id === \"BowgunBarrel\") {\n        option = [\"Barrels\", \"Long: Raw + 5%\", \"Power: Raw + 12.5%\", \"Silencer: Recoil Down +1\", \"Shield: Guard Up\"][\n          index\n        ];\n      } else if (thisSkill.id === \"CriticalFirePower\") {\n        option = [\"-\", \"Normal +30% Spread +20% Pierce +10% Recoil -2\"][index];\n      } else {\n        option = applyDescription(statInc, thisSkill, option, index);\n      }\n      if (!window.info.description) window.info.description = {};\n      if (!window.info.description[thisSkill.id]) window.info.description[thisSkill.id] = [];\n      window.info.description[thisSkill.id].push(option);\n      document.getElementById(thisSkill.id)[index].textContent = option;\n    });\n    lastEvent = thisSkill;\n  }\n\n  // if (\n  //   (thisSkill.classList.contains(\"skill\") && thisSkill.children[0].textContent === thisSkill.id) ||\n  //   !document\n  //     .querySelectorAll(\"select.skill>*\")\n  //     .some((x) => x.id === thisSkill.id || x.id === thisSkill)\n  // ) {\n  //   resetSkillDescription(thisSkill);\n  // }\n}\n\nexport function applyDescription(statInc, thisSkill, option, index) {\n  let raw = applyRawDescription(statInc, thisSkill);\n\n  let ele = applyEleDescription(statInc);\n\n  const aff =\n    statInc.aff > 0 && /\\d\\.?\\d/.test(statInc.aff)\n      ? `Aff+${statInc.aff}`\n      : statInc.aff > 0\n      ? `Aff + ${statInc.aff}`\n      : \"\";\n  raw =\n    Object.prototype.hasOwnProperty.call(statInc, \"Sharp\") && statInc.Sharp < 1\n      ? `Sharp +${statInc.Sharp * 100}%`\n      : raw;\n  raw = Object.prototype.hasOwnProperty.call(statInc, \"Sharp\") && statInc.Sharp > 1 ? `Sharp +${statInc.Sharp}` : raw;\n  raw = raw === \"\" && ele === \"\" && aff === \"\" ? \"No Change\" : raw;\n  if (thisSkill === document.getElementById(\"BowCoating\")) {\n    const text = getWeaponMR().coatings;\n    return `${text[index]}: ${[raw, ele, aff].join(\" \")}`;\n  }\n  let skillLvl = index + 0;\n  if (thisSkill.children[1].tagName === \"OPTGROUP\" && index !== 0) {\n    if (thisSkill.id === \"Burst\" && index >= 2) {\n      skillLvl = index - 1;\n    } else {\n      skillLvl = index % 3 === 0 ? 3 : index % 3;\n    }\n  }\n\n  return `${skillLvl}: ${[raw, ele, aff].join(\" \")}`;\n}\n\nexport function applyEleDescription(statInc) {\n  let ele = \"\";\n  if (statInc.BE > 0 || statInc.PEM > 1 || statInc.BEM > 1) {\n    ele = \"Ele\";\n    if (statInc.BE > 0) {\n      ele += /\\d\\.?\\d/.test(statInc.BE) ? `+${statInc.BE}` : ` + ${statInc.BE}`;\n    }\n\n    if (statInc.BEM > 1) {\n      const bem = /\\.[1-8]/.test((statInc.BEM - 1) * 100)\n        ? ((statInc.BEM - 1) * 100).toFixed(1)\n        : ((statInc.BEM - 1) * 100).toFixed(0);\n      ele += /\\d\\.?\\d/.test(bem) ? `+${bem}%` : ` + ${bem}%`;\n    }\n\n    if (statInc.PEM > 1) {\n      const pem = /\\.[1-8]/.test((statInc.PEM - 1) * 100)\n        ? ((statInc.PEM - 1) * 100).toFixed(1)\n        : ((statInc.PEM - 1) * 100).toFixed(0);\n      ele += /\\d\\.?\\d/.test(pem) ? `+${pem}%` : ` + ${pem}%`;\n    }\n  }\n  return ele;\n}\n\nexport function applyRawDescription(statInc, thisSkill) {\n  let raw = \"\";\n  if (statInc.BR > 0 || statInc.PRM > 1 || statInc.BRM > 1) {\n    raw = \"Raw\";\n    if (statInc.BR > 0) {\n      raw += /\\d\\.?\\d/.test(statInc.BR) ? `+${statInc.BR}` : ` + ${statInc.BR}`;\n    }\n\n    if (statInc.BRM > 1) {\n      const brm = /\\.[1-8]/.test((statInc.BRM - 1) * 100)\n        ? ((statInc.BRM - 1) * 100).toFixed(1)\n        : ((statInc.BRM - 1) * 100).toFixed(0);\n      raw += /\\d\\.?\\d/.test(brm) ? `+${brm}%` : ` + ${brm}%`;\n    }\n\n    if (statInc.PRM > 1) {\n      const prm = /\\.[1-8]/.test((statInc.PRM - 1) * 100)\n        ? ((statInc.PRM - 1) * 100).toFixed(1)\n        : ((statInc.PRM - 1) * 100).toFixed(0);\n      raw +=\n        thisSkill.id === \"CriticalBoost\" && /\\d\\.?\\d/.test(prm - 25)\n          ? `+${prm - 25}%`\n          : thisSkill.id === \"CriticalBoost\"\n          ? ` + ${prm - 25}%`\n          : /\\d\\.?\\d/.test(prm)\n          ? `+${prm}%`\n          : ` + ${prm}%`;\n    }\n  }\n  return raw;\n}\n\nexport function getStats(stats, statsArr) {\n  statsArr.forEach(skillValues => {\n    stats.BRM *= +skillValues.BRM;\n    stats.BR += +skillValues.BR;\n    stats.PRM *= +skillValues.PRM;\n    stats.BEM *= +skillValues.BEM;\n    stats.BE += +skillValues.BE;\n    stats.PEM *= +skillValues.PEM;\n    stats.aff += +skillValues.aff;\n  });\n  return stats;\n}\n\nexport function partSelector() {\n  document.querySelectorAll(\"dropHZ>*\").forEach((part, index) => {\n    if (part.textContent === getWeapon().eleType) {\n      document.getElementById(\"dropHZ\").selectedIndex = index;\n    }\n  });\n}\n\nexport const createSkillSelections = (skillName, initialLevel = 0, target = undefined) => {\n  if (skillName === \"Select\") return;\n  if (document.getElementById(`${skillName}Select`) !== null) {\n    document.getElementById(\"dropSkills\").after(document.getElementById(`${skillName}Select`));\n\n    return;\n  }\n  const cell = document.createElement(\"div\");\n  const label = document.createElement(\"label\");\n  label.className = `label ${skillName} skillInput`;\n  label.textContent = skillName;\n\n  const output = document.createElement(\"output\");\n  output.className = `skillInput ${skillName}`;\n  output.setAttribute(\"max\", window.info.types.maxLevel[skillName]);\n  output.setAttribute(\"min\", \"0\");\n  output.textContent = `Lv-${initialLevel}`;\n\n  const decButton = document.createElement(\"button\");\n  decButton.type = \"button\";\n  decButton.setAttribute(\"aria-pressed\", \"false\");\n  decButton.id = `${skillName}Dec`;\n  decButton.className = `skillInput ${skillName} dec`;\n  decButton.dataset.tooltip = \"Decrease Skill Level\";\n  decButton.innerHTML += \"&#8681\";\n\n  const incButton = document.createElement(\"button\");\n  incButton.type = \"button\";\n  incButton.setAttribute(\"aria-pressed\", \"false\");\n  incButton.id = `${skillName}Inc`;\n  incButton.className = `skillInput ${skillName} inc`;\n  incButton.dataset.tooltip = \"Increase Skill Level\";\n  incButton.innerHTML += \"&#8679\";\n\n  cell.appendChild(label);\n  cell.appendChild(output);\n  cell.appendChild(decButton);\n  cell.appendChild(incButton);\n  cell.id = `${skillName}Select`;\n  document.getElementById(\"dropSkills\").after(cell);\n};\nexport const getSkillSelects = () => {\n  document.querySelectorAll(\"select.skill\").forEach(skill => {\n    if (skill.selectedIndex > 0) {\n      createSkillSelections(skill.id, skill.selectedIndex);\n    }\n  });\n  // dataCompile();\n};\ndocument.getElementById(\"dropSkills\")?.addEventListener(\"change\", e => {\n  if (\n    document.getElementById(e.target.value)?.className.includes(\"classSpecific\") &&\n    !document.getElementById(e.target.value)?.className.includes(weaponType.value)\n  ) {\n    return;\n  }\n\n  createSkillSelections(e.target.value, window.info.types.maxLevel[e.target.value]);\n  // if (document.getElementById([e.target.value])) {\n  // \tdocument.getElementById(e.target.value).selectedIndex =\n  // \t\twindow.info.types.maxLevel[e.target.value];\n  // }\n  // dataCompile();\n});\n\n// extra skills menu\n// updates skill displays used for set builder\nexport const addPoints = ([skillName, skillLevel]) => {\n  skillName = skillName.replace(/\\s/g, \"\").replace(/['-/#.:()[\\]]/g, \"\\\\$&\");\n  const output = document.querySelector(`output.${skillName}`);\n  if (output) {\n    output.textContent = `Lv-${Math.min(\n      window.info.types.maxLevel[skillName] || window.info.skills[skillName].length - 1,\n      output.textContent.slice(-1) + +skillLevel\n    )}`;\n    // dataCompile();\n  } else {\n    createSkillSelections(skillName, skillLevel);\n  }\n};\n/* ////////////////////////////////////////////////////////////////////////// */\n/* ////////////////////////////////////////////////////////////////////////// */\n/* //////////                Qurious augments                 /////////////// */\n/* ////////////////////////////////////////////////////////////////////////// */\n/* ////////////////////////////////////////////////////////////////////////// */\n\n// export const setNext = (previous, check) => {\n// \tconst augment = previous.nextElementSibling;\n// \tconst options = augment.querySelectorAll('option');\n// \toptions.forEach(option => {\n// \t\t// Enable or disable the option based on its value\n// \t\tif (check) {\n// \t\t\toption.disabled = false;\n// \t\t} else {\n// \t\t\toption.disabled = true;\n// \t\t}\n// \t});\n// \tif (check) return;\n// \taugment.selectedIndex = 0;\n// \tconst nextAugType = augment.nextElementSibling;\n// \tnextAugType.selectedIndex = -1;\n// \tif (nextAugType.nextElementSibling?.className.includes('augmentType'))\n// \t\tsetNext(nextAugType, false);\n// };\n\n// const restrictMenus = augType => {\n// \t// Get the value of the selected option\n// \tconst selected = augType.selectedIndex > 0;\n// \tconsole.log(`Selected value: ${selected}`);\n// \tsetNext(augType, selected);\n// };\n// Object.values(document.querySelectorAll('select.augment')).forEach(x =>\n// \tx.addEventListener('blur', e => {\n// \t\tgetRemainingPoints(e.target.parentElement);\n// \t})\n// );\n// document.addEventListener('blur', e => {\n// \tif (\n// \t\te.target.className.includes('augment') ||\n// \t\tlastEvent.className.includes('augment')\n// \t)\n// \t\tsetSkillsDisplay(e.target.parentElement.id.slice(0, -7));\n// \tgetRemainingPoints(e.target.parentElement);\n// });\nexport const getCurrentArmorSkills = (skills = {}) => {\n  // if (!window.info.armor) return;\n  getArmorTypes().forEach(armorType => {\n    Object.values(document.querySelectorAll(`section.${armorType} .skillDiv>output`)).forEach(option => {\n      const skill = option.textContent?.slice(0, -2).trim();\n      const level = +option.textContent.slice(-2);\n      if (level) {\n        skills[skill] = (skills[skill] || 0) + level;\n      }\n    });\n  });\n  return skills;\n};\nexport const getSelectedDecoSkills = (skills = {}) => {\n  Object.values(document.querySelectorAll(\".decoDisplay>select,select.charm\")).map(option => {\n    if (!option.selectedOptions[0]) return;\n    const skill = option.selectedOptions[0].textContent?.slice(0, -2).trim();\n    const level = +option.selectedOptions[0].textContent?.slice(-2);\n    if (level > 0) {\n      skills[skill] = (skills[skill] || 0) + level;\n    }\n  });\n  return skills;\n};\nexport const updateOldDropdownSelectedIndex = () => {\n  if (!window.info.armor) return;\n  Object.values(document.querySelectorAll(\"#EquippedSkillDisplay>output output\")).forEach(el => {\n    const [attackName, pointsUsed] = el.textContent.replace(/\\s/g, \"\").split(\":\");\n\n    if (document.getElementById(attackName)?.tagName === \"SELECT\") {\n      document.getElementById(attackName).selectedIndex =\n        window.info.types[weaponType.value].includes(attackName) && el.previousElementSibling.textContent === \"Active\"\n          ? Math.min(window.info.types.maxLevel[attackName] || window.info.skills[attackName].length - 1, +pointsUsed)\n          : 0;\n    }\n  });\n\n  // document.querySelectorAll(\"#raw select\").forEach((select) => {\n  //   if (skills[select.id]) {\n  //     select.selectedIndex = Math.min(\n  //       window.info.types.maxLevel[select.id] || window.info.skills[select.id].length - 1,\n  //       skills[select.id],\n  //     );\n  //   }\n  // });\n  // return skills;\n};\nweaponType.addEventListener(\"change\", () => {\n  weaponSelect();\n  classChange();\n  rampageSelect();\n  monChart();\n});\ndropWeapon.addEventListener(\"change\", () => rampageSelect());\ndocument.querySelectorAll(\"select.menu\").forEach(menu =>\n  menu.addEventListener(\"change\", e => {\n    updateQuest(e.target.selectedOptions[0].value);\n    monChart();\n    healthSelect();\n  })\n);\ndocument.getElementById(\"players\")?.addEventListener(\"change\", () => healthSelect());\ndropQuest.addEventListener(\"change\", () => {\n  monChart();\n  healthSelect();\n});\ndropMon.addEventListener(\"change\", () => {\n  partSelect();\n  questSelect();\n  healthSelect();\n  monChart();\n});\nexport { dropHZ };\n//////////////////////////////////////////////////////////\n////////////   Drag N Drop  /////////////////////////////\n/////////////////////////////////////////////////////////\n\nconst getDrugIndex = target => Object.values(document.getElementById(\"comboCountDisplay\").children).indexOf(target);\n\ndocument.addEventListener(\"dragstart\", e => {\n  e.dataTransfer.setData(\"text/plain\", getDrugIndex(e.target));\n});\ndocument.addEventListener(\"dragover\", e => {\n  e.preventDefault();\n  e.dataTransfer.dropEffect = \"move\";\n});\n\ndocument.addEventListener(\"drop\", e => {\n  e.preventDefault();\n  // Get the id of the target and add the moved element to the target's DOM\n  const data = e.dataTransfer?.getData(\"text/plain\");\n  if (e.target.parentElement.id === \"comboCountDisplay\") {\n    e.target.before(Object.values(e.target.parentElement.children)[+data]);\n  }\n  comboTracker = Object.values(document.getElementById(\"comboCountDisplay\").children).map(\n    x => x.className.split(\" \")[0]\n  );\n});\n","import {\n  updateComboDisplay,\n  comboReset,\n  monChart,\n  dropHZ,\n  getArmorTypes,\n  dataCompile,\n  addPoints,\n  updateOldDropdownSelectedIndex,\n  rampageSelect,\n  weaponSelect,\n  capital\n} from \"./backup.js\";\nimport {\n  augmentEventHandler,\n  startValidation,\n  getArmorsDecoArrNSkillsObj,\n  setCharmsAvailableDecoSlots\n} from \"./armorFunctions.js\";\nconst getArmor = armorType => window.info.armor[armorType][document.getElementById(armorType).value];\n\ndocument.getElementById(\"BowChargePlus\").addEventListener(\"change\", () => {\n  comboReset();\n  updateComboDisplay();\n});\nconst dropWeapon = document.getElementById(\"dropWeapon\");\nconst weaponType = document.getElementById(\"dropWeaponType\");\ndocument.querySelectorAll(\".scroll\").forEach(x => {\n  if (x.tagName === \"IMG\" || x.tagName === \"BUTTON\") {\n    x.addEventListener(\"mousedown\", e => {\n      if (e.target.classList.contains(\"Blue\")) {\n        document.getElementById(\"blueNon\").classList.add(\"augInvis\");\n        document.getElementById(\"blueScroll\").classList.remove(\"augInvis\");\n        document.getElementById(\"redNon\").classList.remove(\"augInvis\");\n        document.getElementById(\"redScroll\").classList.add(\"augInvis\");\n        window.info.skills.MailofHellfire = window.info.skills.MailofHellfireSource.blue;\n        window.info.skills.Dereliction = window.info.skills.DerelictionSource.blue;\n        return;\n      }\n      document.getElementById(\"blueNon\").classList.remove(\"augInvis\");\n      document.getElementById(\"blueScroll\").classList.add(\"augInvis\");\n      document.getElementById(\"redNon\").classList.add(\"augInvis\");\n      document.getElementById(\"redScroll\").classList.remove(\"augInvis\");\n      window.info.skills.MailofHellfire = window.info.skills.MailofHellfireSource.red;\n      window.info.skills.Dereliction = window.info.skills.DerelictionSource.red;\n    });\n  }\n});\ndocument.querySelectorAll(\"input.check\").forEach(x =>\n  x.addEventListener(\"mousedown\", e => {\n    if (/DemonDrug/.test(e?.target.id)) {\n      if (e?.target.id === \"DemonDrug\") {\n        document.getElementById(\"MegaDemonDrug\").checked = false;\n      } else {\n        document.getElementById(\"DemonDrug\").checked = false;\n      }\n      // } else {\n      // e?.target.checked = !e?.target.checked;\n    }\n\n    // dataCompile();\n\n    // if (e?.target.id !== \"filterCombo\") {\n    // dataCompile();\n    if (e?.target.id !== \"WaterBlight\") {\n      return;\n    }\n    const ugh = dropHZ.selectedIndex;\n    monChart();\n    dropHZ.selectedIndex = ugh;\n    // } else if (e?.target === filterCombo) {\n    // filterTableForComboAttacks();\n    // }\n  })\n);\n\nObject.values(document.querySelectorAll(\".augment\")).forEach(el => {\n  el.addEventListener(\"change\", e => {\n    augmentEventHandler(e.target, e.target.selectedOptions[0].textContent);\n    startValidation(e.target);\n  });\n  el.addEventListener(\"mousedown\", e => {\n    augmentEventHandler(e.target, e.target.selectedOptions[0].textContent);\n    startValidation(e.target);\n  });\n});\n// document.querySelectorAll(\"button\").forEach(el =>\n// el.addEventListener(\"click\", e => {\n// if (![\"startSearch\", \"searchAgain\", \"extendedSearch\"].includes(e.target.id)) {\n// dataCompile(e);\n// }\n// })\n// );\n// document.querySelectorAll(\"select,input\").forEach(element => element.addEventListener(\"change\", e => dataCompile(e)));\n\n// document.querySelectorAll(\"section.armorDisplay select\").forEach((x) =>\n// x.addEventListener(\"change\", (e) => {\n// if (e.target?.className.includes(\"armor\")) {\n// resetAugmentSelections(e.target.id);\n// } else {\n// updateSelectedSkills();\n// }\n// })\n// );\n\nexport function sumInReverseOrder(selector, curr = 0) {\n  const elements = document.querySelectorAll(selector);\n  for (let i = elements.length - 1; i > 0; i--) {\n    curr += +elements[i].textContent;\n  }\n  elements[0].textContent = curr;\n}\n\n// updates available augment selections on change\ngetArmorTypes().forEach(type => {\n  document.querySelector(`#${type}`).addEventListener(\"change\", () => {\n    const armor = getArmor(type);\n    document.querySelector(`section.${type} .currentPoints`).textContent = `${capital(type)} Qurious Augments ${\n      armor.quriousPoints\n    }/${armor.quriousPoints} Points Remaining`;\n    getArmorsDecoArrNSkillsObj([type]);\n    [\"def\", \"dragon\", \"fire\", \"ice\", \"thunder\", \"water\"].forEach(defType => {\n      document.querySelector(`section.${type} .${defType} output`).textContent = armor[defType];\n      sumInReverseOrder(`.${defType} output`);\n    });\n    document.querySelectorAll(`#${type}Qurious select`).forEach(el => (el.selectedIndex = 0));\n  });\n});\n\n//////////////////////////////////////////////////////////\n////////////   General Selection  ////////////////////////\n/////////////////////////////////////////////////////////\ndocument.querySelectorAll(\"input, button:not(#setReturn button), select:not(#setReturn select)\").forEach(x => {\n  x.addEventListener(\"change\", () => updateOldDropdownSelectedIndex(x));\n});\ndocument.querySelector(\"#weaponSelects>#Qurious\")?.addEventListener(\"mousedown\", () => {\n  document.getElementById(\"augToggle\").classList.remove(\"augInvis\");\n});\n\ndocument.querySelectorAll(\".charmSlot, #charm>select\").forEach(option =>\n  option.addEventListener(\"change\", e => {\n    if (document.getElementById(\"slot1\").selectedIndex === 4) {\n      document.getElementById(\"slot2\").selectedIndex = 0;\n      document.getElementById(\"slot3\").selectedIndex = 0;\n    }\n    setCharmsAvailableDecoSlots();\n  })\n);\n\n//////////////////////////////////////////////////////////\n////////////   Weapon Selection  ////////////////////////\n/////////////////////////////////////////////////////////\nweaponType.addEventListener(\"change\", () => {\n  weaponSelect();\n});\ndocument.getElementById(\"weaponFilter\").addEventListener(\"click\", e => {\n  e.target.classList.toggle(\"blue\");\n  e.target.classList.toggle(\"gray\");\n  weaponSelect();\n});\ndocument.querySelectorAll(\"#weaponFilter,button.rampageAug\").forEach(x =>\n  x.addEventListener(\"click\", () => {\n    rampageSelect();\n  })\n);\nweaponType.addEventListener(\"change\", () => {\n  document.querySelector(\"#weapon > img\").src = document\n    .querySelector(\"#weapon > img\")\n    .src.replace(/(?<=icons\\/)\\w+/, weaponType.value);\n});\ndropWeapon.addEventListener(\"change\", () => {\n  const weapon = window.info[weaponType.value].weapons[dropWeapon.value];\n  document.querySelector(\".weapon .div6 output\").textContent = weapon.baseRaw + \" Base Raw\";\n  if (weapon.baseEle) {\n    document.querySelector(\".weapon .div7 output\").textContent = weapon.baseEle + \" Base Element\";\n    document.querySelector(\".weapon .div7 img\").classList += weapon.eleType;\n  } else if (weaponType.value.includes(\"BowGun\")) {\n    document.querySelector(\".weapon .div7 img\").classList += \"ammo\";\n    document.querySelector(\".weapon .div7 output\").textContent = \"Ammo\";\n  } else {\n    document.querySelector(\".weapon .div7 img\").src = \"./icons/none.png\";\n    document.querySelector(\".weapon .div7 output\").textContent = \" Non Elemental\";\n  }\n  document.querySelector(\".weapon .div8 output\").textContent = weapon.aff + \" Base Affinity\";\n});\n//////////////////////////////////////////////////////////\n////////////   Skills Descriptions  /////////////////////\n/////////////////////////////////////////////////////////\ndocument.querySelector(\"#EquippedSkillDisplay\").addEventListener(\"mouseover\", e => {\n  let [skillName, skillLevel] = e.target.textContent.replace(/[\\s\\n\\t]/g, \"\").split(\":\");\n  if (skillLevel && window.info.descriptions[skillName]) {\n    e.target.dataset.tooltip = window.info.descriptions[skillName][skillLevel - 1];\n  }\n});\n\ndocument.getElementById(\"setSearcher\").addEventListener(\"mouseover\", e => {\n  if (e.target.tagName === \"OUTPUT\" && e.target.classList[1] && window.info.descriptions[e.target.classList[1]]) {\n    e.target.dataset.tooltip = window.info.descriptions[e.target.classList[1]].join(\"\\n\");\n  }\n});\n\ndocument.getElementById(\"setReturn\").addEventListener(\"mouseover\", e => {\n  if (e.target.tagName === \"BUTTON\" && window.info.descriptions[e.target.textContent.split(\" \")[0]]) {\n    e.target.dataset.tooltip = window.info.descriptions[e.target.textContent.split(\" \")[0]].join(\"\\n\");\n  }\n});\n// document.getElementById(\"setBuilder\").addEventListener(\"change\", e => {\n// if (e?.target.tagName === \"SELECT\") dataCompile(e);\n// });\n//////////////////////////////////////////////////////////\n//////////// Combo Count  //////////////////////////////\n/////////////////////////////////////////////////////////\ndocument.getElementById(\"damageTable\").addEventListener(\"mousedown\", e => {\n  if (e.target.classList.contains(\"inputButton\")) {\n    e.target?.classList.contains(\"dec\") ? decreaseComboCount(e) : increaseComboCount(e);\n    document.getElementById(\"comboCountContainer\")?.classList.remove(\"augInvis\");\n  }\n});\nexport function increaseComboCount(e) {\n  if (Number(document.querySelectorAll(\".inputs\")[e?.target.id].value) < 20) {\n    ++document.querySelectorAll(\".inputs\")[e?.target.id].value;\n  }\n}\nexport function decreaseComboCount(e) {\n  if (\n    (e?.target.id === \"0\" && Number(document.querySelectorAll(\".inputs\")[e?.target.id].value) > 1) ||\n    (Number(e?.target.id) > 0 && Number(document.querySelectorAll(\".inputs\")[e?.target.id].value) > 0)\n  ) {\n    --document.querySelectorAll(\".inputs\")[e?.target.id].value;\n  }\n}\n//////////////////////////////////////////////////////////\n////////////  Qurious Weapon   //////////////////////////////\n/////////////////////////////////////////////////////////\nconst quriousAugsDec = target => {\n  let augType = target.className.match(/\\w+Aug$/)[0];\n  let augIndex = window.info.augIndex[augType];\n  if (augIndex === 0) return;\n  const output = target.parentElement.querySelector(\"output.label\");\n  let thisAug = window.info.augs[augType];\n  window.info.augIndex[augType]--;\n  output.textContent = thisAug[augIndex - 1][0];\n  output.nextElementSibling.textContent = `+${thisAug[augIndex - 1][1]}`;\n  let newTotal = Object.entries(window.info.augs).reduce((total, [augType, values]) => {\n    return total + values[window.info.augIndex[augType]][0];\n  }, 0);\n\n  document.getElementById(\"weaponQurious\").textContent = `Remaining Weapon Augments ${9 - newTotal}/9`;\n};\n\nconst quriousAugsInc = target => {\n  let augType = target.className.match(/\\w+Aug$/)[0];\n  let augIndex = window.info.augIndex[augType];\n  let thisAug = window.info.augs[augType];\n  if (!thisAug[augIndex + 1]) return;\n  let currentTotal = Object.entries(window.info.augs).reduce((total, [augType, values]) => {\n    return total + values[window.info.augIndex[augType]][0];\n  }, 0);\n\n  const acc = currentTotal + (thisAug[augIndex + 1][0] - thisAug[augIndex][0]);\n  if (acc > 9) return;\n  const output = target.parentElement.querySelector(\"output.label\");\n  window.info.augIndex[augType]++;\n  output.textContent = thisAug[augIndex + 1][0];\n  output.nextElementSibling.textContent = `+${thisAug[augIndex + 1][1]}`;\n  document.getElementById(\"weaponQurious\").textContent = `Remaining Weapon Augments ${9 - acc}/9`;\n};\n\ndocument\n  .querySelectorAll(\".augButton.inc\")\n  .forEach(augInc => augInc.addEventListener(\"click\", e => quriousAugsInc(e.target)));\ndocument\n  .querySelectorAll(\".augButton.dec\")\n  .forEach(augDec => augDec.addEventListener(\"click\", e => quriousAugsDec(e.target)));\n//////////////////////////////////////////////////////////\n////////////  Settings Menu   //////////////////////////////\n/////////////////////////////////////////////////////////\ndocument\n  .getElementById(\"settingsMenuButton\")\n  .addEventListener(\"click\", e => document.getElementById(\"settingsMenu\").classList.toggle(\"augInvis\"));\ndocument.getElementById(\"skillsMenu\").addEventListener(\"mousedown\", () => {\n  document.getElementById(\"skillSettings\").classList.remove(\"augInvis\");\n  document.getElementById(\"monsterSettings\").classList.add(\"augInvis\");\n  document.getElementById(\"infoSettings\").classList.add(\"augInvis\");\n});\ndocument.getElementById(\"monsterMenu\").addEventListener(\"mousedown\", () => {\n  document.getElementById(\"skillSettings\").classList.add(\"augInvis\");\n  document.getElementById(\"monsterSettings\").classList.remove(\"augInvis\");\n  document.getElementById(\"infoSettings\").classList.add(\"augInvis\");\n});\ndocument.getElementById(\"infoMenu\").addEventListener(\"mousedown\", () => {\n  document.getElementById(\"skillSettings\").classList.add(\"augInvis\");\n  document.getElementById(\"monsterSettings\").classList.add(\"augInvis\");\n  document.getElementById(\"infoSettings\").classList.remove(\"augInvis\");\n});\n\n//////////////////////////////////////////////////////////\n////////////  Set search   //////////////////////////////\n/////////////////////////////////////////////////////////\nexport function showMenu() {\n  document.querySelectorAll(\".menu\").forEach(x => x.classList.remove(\"augInvis\"));\n  const mrToggle = document.querySelectorAll(\"#MR>option\").length > 0;\n  document.getElementById(\"MR\").parentElement.classList.toggle(\"augInvis\", !mrToggle);\n\n  const hrToggle = document.querySelectorAll(\"#HR>option\").length > 0;\n  document.getElementById(\"HR\").parentElement.classList.toggle(\"augInvis\", !hrToggle);\n}\n\ndocument.querySelector(\"#questButton\").addEventListener(\"mousedown\", () => showMenu());\n\ndocument.querySelector(\".extraSkills\").addEventListener(\"mousedown\", e => {\n  if (e.target.tagName === \"BUTTON\" && !e.target?.classList[0]) {\n    addPoints(e.target.textContent.split(\" +\"));\n    e.target.remove();\n  }\n});\n//////////////////////////////////////////////////////////\n////////////  Set Searcher Selections ///////////////////\n/////////////////////////////////////////////////////////\ndocument.getElementById(\"skillSelect\").addEventListener(\"mousedown\", e => {\n  if (e.target.classList[0] !== \"skillInput\") return;\n\n  const id = e.target.classList[1];\n  let input = +document.querySelector(`output.${id}`).textContent.slice(-1);\n  if (e.target.tagName === \"BUTTON\") {\n    if (e.target.classList[2] === \"dec\") {\n      if (input === 0) {\n        e.target.parentElement.remove();\n      } else {\n        document.querySelector(`output.${id}`).textContent = `Lv-${input - 1}`;\n      }\n    } else if (e.target.classList[2] === \"inc\") {\n      document.querySelector(`output.${id}`).textContent = `Lv-${Math.min(window.info.types.maxLevel[id], input + 1)}`;\n    }\n  }\n});\n\n//////////////////////////////////////////////////////////\n////////////  Extra Menus  //////////////////////////////\n/////////////////////////////////////////////////////////\ndocument\n  .querySelectorAll(\"#weaponQurious,section.currentPoints\")\n  .forEach(el =>\n    el.addEventListener(\"mousedown\", () =>\n      document.querySelectorAll(\".armorAugment\").forEach(el => el.classList.toggle(\"augInvis\"))\n    )\n  );\nObject.values(document.querySelectorAll(\".Charm\")).forEach(menu =>\n  menu.addEventListener(\"change\", e => setCharmsAvailableDecoSlots(e.target))\n);\nexport function resetSkills() {\n  document.querySelectorAll(\"div#setSearcher>div#skillSelect>div\").forEach(x => x.remove());\n}\n\nexport function toggleAmmoTables() {\n  const toggle = document.getElementById(\"dpsTable\").classList.contains(\"augInvis\");\n  document.getElementById(\"dpsTable\").classList.toggle(\"augInvis\", !toggle);\n  document.getElementById(\"ammoTable\").classList.toggle(\"augInvis\", toggle);\n}\ndocument.getElementById(\"resetCombo\").addEventListener(\"click\", () => comboReset());\ndocument.getElementById(\"resetSkills\").addEventListener(\"click\", () => resetSkills());\ndocument.getElementById(\"ammoChange\").addEventListener(\"click\", () => toggleAmmoTables());\n\ndocument.querySelectorAll(\"select,input\").forEach(element =>\n  element.addEventListener(\"change\", e => {\n    if (/SELECT|INPUT/.test(e.target.tagName)) {\n      dataCompile(e);\n    }\n  })\n);\ndocument.addEventListener(\"keydown\", event => {\n  // Change the key code to the desired key you want to use as a trigger.\n  const triggerKeyCode = \"KeyQ\"; // This will trigger the debugger when the 'D' key is pressed.\n\n  if (event.code === triggerKeyCode) {\n    console.log(\"Triggering debugger\");\n    debugger; // This will pause the execution, allowing you to inspect your variables and functions.\n  }\n});\ndocument.addEventListener(\"click\", e => {\n  if (\n    e?.target.tagName === \"BUTTON\" &&\n    (/dec|inc|skill/.test(e.target.className) ||\n      Object.values(document.getElementById(\"EquippedSkillDisplay\").querySelectorAll(\"button\")).includes(e.target))\n  )\n    dataCompile(e);\n});\n","import { createSkillSelections, dataCompile } from \"./backup.js\";\nimport { equipBuild } from \"./armorFunctions.js\";\nlet newSkillsCache = {};\nconst dropWeapon = document.getElementById(\"dropWeapon\");\nconst weaponType = document.getElementById(\"dropWeaponType\");\nlet totalCombos = 0;\nlet timer = 0;\nconst workers = [];\nlet workerCount = 0;\nlet workersPortion;\nlet armorPermutations = [];\nconst GlobalMap = new Map();\nlet GlobalFragment;\nlet totalSets = 0;\nexport const getTotal = (skillInfo = window.info.types) => {\n  const { skills } = getSetRequirements();\n  const { armorSkills, remainingSlots, quriousSkills } = newSkillsCache;\n  for (let i = 0; i < 4; ++i) {\n    if (!remainingSlots[i]) continue;\n    for (const [skillName, skillLvl] of Object.entries(skillInfo.decoLevels[i])) {\n      armorSkills[skillName] = (armorSkills[skillName] || 0) + skillLvl * remainingSlots[i];\n    }\n  }\n  Object.entries(skillInfo.qurious).forEach(([skillName, quriousCost]) => {\n    if (quriousSkills[~~(quriousCost / 3) - 1]) {\n      armorSkills[skillName] = (armorSkills[skillName] || 0) + quriousSkills[quriousCost / 3 - 1];\n    }\n  });\n  const returnVal = [];\n\n  Object.entries(armorSkills).forEach(([skillName, points]) => {\n    if (!isNaN(skillName)) return;\n    if (skills[skillName] + points > 0 && skillInfo.maxLevel[skillName] > 0) {\n      const pointsToMaxLevel =\n        (skillInfo.maxLevel[skillName] || window.info.skills[skillName].length - 1) + skills[skillName];\n      returnVal.push([skillName, Math.min(+points, pointsToMaxLevel)]);\n    } else if (!skills[skillName]) {\n      returnVal.push([\n        skillName,\n        Math.min(+points, skillInfo.maxLevel[skillName] || window.info.skills[skillName].length - 1)\n      ]);\n    }\n  });\n  return returnVal.sort();\n};\nconst setOutput = extraSkills => {\n  let buttons = \"\";\n  extraSkills.forEach(skill => {\n    if (skill[1] == 0) return;\n    buttons += `<button textContent=\"${skill[0]}\">${skill[0].replace(\n      /(?<=[a-z])([A-Z])(?![A-Z])/g,\n      \" $1\"\n    )} +${+skill[1]}</button>`;\n    // const thisSkill = document.createElement(\"button\");\n    // thisSkill.textContent = `${skill[0]} +${+skill[1]}\n\n    // thisSkill.setAttribute();\n  });\n  if (document.getElementById(\"temp\")) document.getElementById(\"temp\").remove();\n  document.querySelector(\".extraSkills\").innerHTML += buttons;\n  document.getElementById(\n    \"extraOutput\"\n  ).textContent = `Found ${totalSets.toLocaleString()} Builds / ${totalCombos.toLocaleString()} Combinations`;\n  console.log((performance.now() - timer) / 1000);\n  console.log(GlobalMap);\n};\n// const memo = new Map();\n\nconst getUsedCharm = sets => {\n  return sets.map(charmSkills => {\n    let skills = charmSkills.usedSkills.slice(-2);\n    return `${skills[0][0]}: ${skills[0][1]} & ${skills[1][0]}: ${skills[1][1]}`;\n  });\n};\nexport const getSkillReq = (skills = []) => {\n  document.querySelectorAll(\".buildSkills>div>.skill\").forEach(skill => {\n    if (skill.selectedIndex > 0) skills.push([skill.id, skill.selectedIndex]);\n  });\n  return skills;\n};\n\nexport const getSetRequirements = (types = window.info.types) => {\n  const skills = {};\n  const skillInfo = {};\n\n  document.querySelectorAll(\"#skillSelect>div>output\").forEach(skill => {\n    const skillName = skill.className.split(\" \")[1];\n    skills[skillName] = -skill.textContent.match(/(?<=Lv-)\\d/)[0];\n    skillInfo[skillName] = {\n      lvl: types.decos[skillName] ?? 5,\n      lvl4: types.lvl4[skillName] ?? 0,\n      max: types.maxLevel[skillName] - +skill.textContent.match(/(?<=Lv-)\\d/)[0],\n      qurious: ~~((types.qurious[skillName] ?? 60) / 3)\n    };\n  });\n  return {\n    skills: Object.fromEntries(\n      Object.entries(skills).sort(\n        (a, b) =>\n          skillInfo[b[0]].qurious - skillInfo[a[0]].qurious ||\n          skillInfo[b[0]].lvl - skillInfo[a[0]].lvl ||\n          skillInfo[a[0]].lvl4 * skillInfo[a[0]].qurious - skillInfo[b[0]].lvl4 * skillInfo[b[0]].qurious\n      )\n    ),\n    skillInfo\n  };\n};\nexport function applyArmorFilter(skills, skillInfo, maxArmorsPerType) {\n  const retrieveArmorData = new Map(Object.entries(JSON.parse(JSON.stringify(window.info.armor))));\n  const armors = {};\n  // sets a baseline for deco slot ratings based off the approx aug cost the slot will be used for / 3 for to simplify my life\n  const pointsForDecos = [1.25, 8.5, 8.5, 9];\n  for (let i = 0; i < 5; i++) {\n    const armorType = [\"helm\", \"waist\", \"chest\", \"arm\", \"leg\"][i];\n    // makes sure only male or female versions are used. doesnt matter which version as they are identical\n    retrieveArmorData.set(\n      armorType,\n      retrieveArmorData.get(armorType).filter(x => x.sex !== \"MaleOnly\")\n    );\n  }\n\n  [\"helm\", \"waist\", \"chest\", \"arm\", \"leg\"].forEach(armorType => {\n    armors[armorType] = [];\n    retrieveArmorData.get(armorType).forEach(thisPiece => {\n      if (!thisPiece) return;\n      const newArmorObj = {};\n      newArmorObj.setBonus = {};\n      const theseSkills = thisPiece.skills;\n      /* joins deco slot array into a string and for certain combinations that are almost guaranteed\n               to be at least an equivalent exchange increase them to the next lvl 2 slot is obtained  */\n      if (thisPiece.quriousTable !== 13) {\n        const usedAug = Object.entries(thisPiece.decoAugments)\n          .filter(x => +x[0] <= 3 && x[1][0] == 2)\n          .pop();\n        if (usedAug) {\n          const [points, [lvl, augArr]] = usedAug;\n\n          // if (lvl !== 2) continue;\n          newArmorObj.decos = augArr;\n          newArmorObj.augs = [{ \"+Slots\": +points * -6 }];\n          newArmorObj.quriousPoints = thisPiece.quriousPoints - 6 * +points;\n          newArmorObj.decoAugments = thisPiece.decoAugments;\n        }\n      } else if (thisPiece.quriousTable === 13) {\n        newArmorObj.decos = [1, 1, 0, 1];\n        newArmorObj.quriousPoints = 0;\n        newArmorObj.augs = [{ def: 5 }, { def: 5 }, { def: 5 }, { def: 5 }, { \"+Slots\": -18 }, { \"+Slots\": -12 }];\n      }\n      if (!newArmorObj.augs) {\n        newArmorObj.decos = thisPiece.decos;\n        newArmorObj.augs = [];\n        newArmorObj.quriousPoints = thisPiece.quriousPoints;\n        newArmorObj.decoAugments = thisPiece.decoAugments;\n      }\n\n      // Adds skill points if StormSoul 4/5 is selected\n      if (document.getElementById(\"StormSoul\").selectedIndex > 3) {\n        const thisBonus = document.getElementById(\"StormSoul\").selectedIndex === 4 ? 1 : 2;\n\n        for (const skill of theseSkills) {\n          if (skillInfo[skill].qurious < 6) {\n            theseSkills[skill] += thisBonus;\n          }\n        }\n      }\n      newArmorObj.fodderSkills = [];\n      newArmorObj.fodderCount = 0;\n      // Applies and gets the total weighed value for deco slots\n      let thisArmorRating =\n        newArmorObj.decos[0] * pointsForDecos[0] +\n        newArmorObj.decos[1] * pointsForDecos[1] +\n        newArmorObj.decos[2] * pointsForDecos[2] +\n        newArmorObj.decos[3] * pointsForDecos[3];\n      // let tempForArmorRating = 0;\n      // await thisArmorRating;\n      for (const [skillName, skillLevel] of Object.entries(theseSkills)) {\n        // for (let j = 0; j < Object.keys(theseSkills).length; j++) {\n        /* Checks if skills on the pieces are used in the search and if so applies a value depending on the level of deco slot it uses\n              for any skill not used in the search adds to a counter to find the maximum Qurious Points\n              */\n        if (!skills[skillName]) {\n          /* adds unused skills to a fodderCount variable so they can be accounted for\n                  the extra augment points and extra skills if points not needed  */\n          newArmorObj.fodderCount += skillLevel;\n\n          // if (!newArmorObj.fodderSkills)\n          for (let l = 0; l < skillLevel; l++) {\n            newArmorObj.fodderSkills.push(skillName);\n          }\n          // if skill is used\n        } else if (skills[skillName]) {\n          if (\n            // if skill is a set bonus only obtainable on an armor piece\n            skillInfo[skillName].qurious === 20 &&\n            skillInfo[skillName].lvl === 5\n          ) {\n            // keep track of set bunus skills used in the set\n            newArmorObj.setBonus[skillName] = skillLevel;\n            // if the skill can only be gained from the armor piece boost this armors rating\n            thisArmorRating += Math.min(skills[skillName] * -1, theseSkills[skillName]) * 30;\n          }\n\n          // adds points for skills used\n          thisArmorRating +=\n            // ensures it only gives points for a maximum of the times needed\n            Math.min(skills[skillName] * -1, theseSkills[skillName]) *\n            (skillInfo[skillName].qurious === 20 ? 4 : skillInfo[skillName].qurious / 3);\n\n          // special case for ibushi/narwa sets\n        } else if (thisPiece.quriousTable == 13 && !newArmorObj.fodderCount) {\n          newArmorObj.fodderCount = 0;\n        }\n      }\n\n      // Ibushi/Narwa sets again these can not get skill augments\n      if (thisPiece.quriousTable === 13) {\n        newArmorObj.unBloatedPoints = 0;\n        newArmorObj.armorRating = thisArmorRating;\n      } else {\n        // assigned augments and extra points depending on how many fodder skills are available\n        switch (newArmorObj.fodderCount) {\n          case 0:\n            newArmorObj.quriousPoints += 15;\n            newArmorObj.unBloatedPoints = ~~(newArmorObj.quriousPoints / 3);\n            newArmorObj.augs = newArmorObj.augs[0]\n              ? [{ \"-Def\": 5 }, { \"-Def\": 5 }, { \"-Def\": 5 }].concat(newArmorObj.augs)\n              : [{ \"-Def\": 5 }, { \"-Def\": 5 }, { \"-Def\": 5 }];\n            newArmorObj.armorRating = thisArmorRating + newArmorObj.unBloatedPoints;\n\n            break;\n          /* adds 10 points per fodderCount and 5 if none left.  Assumes 3 augments will be used to gain points as in 95%\n                  of the time 3-4 are used. There is a check that can undo this during the augmentation process as needed the\n                  concat is to keep the defense augs before the slot augs so they dont use more points then they should have at that time */\n          case 1:\n            newArmorObj.quriousPoints += 20;\n            newArmorObj.unBloatedPoints = ~~(newArmorObj.quriousPoints / 3);\n            newArmorObj.augs = newArmorObj.augs\n              ? [{ \"-Skill\": newArmorObj.fodderSkills.pop() }, { \"-Def\": 5 }, { \"-Def\": 5 }].concat(newArmorObj.augs)\n              : [{ \"-Skill\": newArmorObj.fodderSkills.pop() }, { \"-Def\": 5 }, { \"-Def\": 5 }];\n\n            newArmorObj.armorRating = thisArmorRating + newArmorObj.unBloatedPoints;\n\n            break;\n          case 2:\n            newArmorObj.quriousPoints += 25;\n            newArmorObj.unBloatedPoints = ~~(newArmorObj.quriousPoints / 3);\n            newArmorObj.augs = newArmorObj.augs\n              ? [\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() },\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() },\n                  { \"-Def\": 5 }\n                ].concat(newArmorObj.augs)\n              : [\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() },\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() },\n                  { \"-Def\": 5 }\n                ];\n\n            newArmorObj.armorRating = thisArmorRating + newArmorObj.unBloatedPoints;\n\n            break;\n          default:\n            newArmorObj.quriousPoints += 30;\n            newArmorObj.unBloatedPoints = ~~(newArmorObj.quriousPoints / 3);\n            newArmorObj.augs = newArmorObj.augs\n              ? [\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() },\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() },\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() }\n                ].concat(newArmorObj.augs)\n              : [\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() },\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() },\n                  { \"-Skill\": newArmorObj.fodderSkills.pop() }\n                ];\n\n            newArmorObj.armorRating = thisArmorRating + newArmorObj.unBloatedPoints;\n\n            break;\n        }\n      }\n      const addArmorPiece = (k, remove = true) => {\n        if (remove) armors[armorType].pop();\n        newArmorObj.name = thisPiece.name;\n        newArmorObj.type = armorType;\n        newArmorObj.skills = thisPiece.skills;\n        armors[armorType].splice(k, 0, newArmorObj);\n      };\n      // Sets aug count and qurious points on the piece itself to put restrictions on points spent later on\n      if (!armors[armorType][0]) {\n        newArmorObj.name = thisPiece.name;\n\n        newArmorObj.type = armorType;\n        newArmorObj.skills = thisPiece.skills;\n        armors[armorType].push(newArmorObj);\n        return;\n      }\n      // has more relaxed requirents to make sure each type has enough pieces then increases to reduce calculations\n      if (\n        newArmorObj.armorRating >\n        (armors[armorType].length === maxArmorsPerType ? armors[armorType][maxArmorsPerType - 1].armorRating : 10)\n      ) {\n        for (let k = 0; k < armors[armorType].length; k++) {\n          if (newArmorObj.armorRating > armors[armorType][k].armorRating) {\n            addArmorPiece(k);\n            return;\n          }\n        }\n        if (armors[armorType].length < maxArmorsPerType) {\n          addArmorPiece(armors[armorType].length - 1, false);\n        }\n      }\n    });\n  });\n\n  return armors;\n}\n\nexport const getCharms = (skills, skillInfo, charmList = []) => {\n  const { charms, types } = window.info;\n  // filters for so that both skills on charm must be used\n  const filteredCharms = Object.values(charms).filter(charm =>\n    Object.entries(charm.skills).every(\n      ([skillName, skillPoints]) => skills[skillName] + skillPoints <= 0 && types.lvl4[skillName] < 3\n    )\n  );\n\n  filteredCharms.forEach(charm => {\n    const newCombo = { ...charm.skills };\n    charmList.push(newCombo);\n  });\n  return charmList;\n};\nconst resetGlobals = () => {\n  GlobalFragment = \"\";\n  document.getElementById(\"setReturn\").classList.remove(\"augInvis\");\n  // document.getElementById(\"damage\").classList.add(\"augInvis\");\n  document.querySelectorAll(\".extraSkills>button\").forEach(x => x.remove());\n  if (document.getElementById(\"temp\")) document.getElementById(\"temp\").remove();\n  document.querySelector(\".extraSkills\").innerHTML +=\n    \"<P2 id='temp' style='font-size:18px !important; height:15em !important;'>Searching...</P2>\";\n  document.getElementsByClassName(\"grid\")[0].innerHTML = \"\";\n  newSkillsCache = {\n    remainingSlots: [0, 0, 0, 0],\n    armorSkills: {},\n    quriousSkills: [0, 0, 0, 0, 0]\n  };\n  totalCombos = 0;\n  totalSets = 0;\n};\nconst receiveMessage = (sets, flag) => {\n  for (const set of sets) {\n    if (GlobalMap.size < 100) {\n      GlobalMap.set(GlobalMap.size, set);\n      const charms = getUsedCharm(set);\n\n      let fragment = '<button type=\"button\" aria-pressed=\"false\" class=\"equipBuild\">Equip Build</button>';\n\n      for (let i = 0; i < 5; i++) {\n        fragment += `<output class=\"armorImg ${[\"helm\", \"chest\", \"arm\", \"waist\", \"leg\"][i]}\"></output><span>${\n          set[0].armors[i][0]\n        }</span>`;\n      }\n\n      let charmOptions = \"\";\n      charms.forEach(charm => {\n        charmOptions += `<option value=\"${charm}\">${charm}</option>`;\n      });\n\n      fragment += `<output class=\"armorImg charm\"></output><select class=\"armorCharm\" title=\"charmSkill1\">${charmOptions}</select>`;\n      const setResult = document.createElement(\"div\");\n      setResult.classList.add(\"setResult\");\n      setResult.innerHTML = fragment;\n      document.querySelector(\".grid\").appendChild(setResult);\n    }\n\n    if (GlobalMap.size === 100) {\n      let sum = 0;\n      for (let i = 0; i <= 100; i++) {\n        if (!GlobalMap.has(i)) break;\n        sum += GlobalMap.get(i).length;\n      }\n      document.getElementById(\"setOutput\").textContent = `Displayed ${Math.min(\n        100,\n        GlobalMap.size\n      )} Builds / ${sum.toLocaleString()} Combinations`;\n      GlobalMap.set(\"finished\", true);\n    }\n  }\n};\nexport const getSetBuilds = (filterLimit = 18) => {\n  timer = performance.now();\n  armorPermutations = [];\n  // precaustion incase button is hit before function is finished previous run\n  workers.forEach(x => x.terminate());\n  workerCount = 5;\n  for (let j = 0; j < workerCount; j++) {\n    workers[j] = new Worker(\"./setBuildWorker.js\");\n  }\n  workers.forEach(worker => {\n    // Attach event listeners or perform other actions with the worker here\n    worker.addEventListener(\"message\", e => {\n      let flag = false;\n      if (armorPermutations.length) {\n        sendBatch(e.target);\n      } else {\n        e.target.terminate();\n        --workerCount;\n        flag = true;\n      }\n      if (e.data.final.sets.length) {\n        totalCombos += e.data.final.count.combos;\n        totalSets += e.data.final.count.sets;\n        // if < 100 combo results make displays for any positives returned\n        if (GlobalMap.size < 100) {\n          receiveMessage(e.data.final.sets);\n        }\n      }\n      if (!flag) return;\n      // sum additional skills\n      const getMostSkills = newSet => {\n        const max = (a, b) => (a >= b ? a : b);\n        for (let i = 0; i < 4; i++) {\n          newSkillsCache.remainingSlots[i] = max(newSkillsCache.remainingSlots[i] || 0, newSet.remainingSlots[i]);\n        }\n        for (let i = 0; i < 5; i++) {\n          newSkillsCache.quriousSkills[i] = max(newSkillsCache.quriousSkills[i] || 0, newSet.quriousSkills[i]);\n        }\n        for (const [skill, lvl] of Object.entries(newSet.armorSkills)) {\n          newSkillsCache.armorSkills[skill] = max(newSkillsCache.armorSkills[skill] || 0, lvl);\n        }\n      };\n\n      getMostSkills(e.data.final.stats);\n      if (!workerCount) setOutput(getTotal());\n\n      if (!GlobalMap.has(\"finished\") && !workerCount) {\n        document.querySelector(\".grid\").innerHTML += GlobalFragment;\n        GlobalFragment = \"\";\n        document.getElementById(\"setOutput\").textContent = `Displayed ${Math.min(\n          100,\n          GlobalMap.size\n        )} Builds / ${totalCombos.toLocaleString()} Combinations`;\n        GlobalMap.set(\"finished\", true);\n        return;\n      }\n      if (GlobalMap.size === 0) {\n        document.getElementById(\"setOutput\").textContent = \"No Results Found\";\n        document.querySelectorAll(\".grid>div\").forEach(element => element.remove());\n      }\n    });\n  });\n  const messageObj = getSetRequirements();\n  messageObj.charmSlots = [0, 0, 0, 0];\n  document.querySelectorAll(\".charmSlot\").forEach(x => {\n    if (x.selectedIndex > 0) {\n      ++messageObj.charmSlots[x.selectedIndex - 1];\n    }\n  });\n  // gets the runs equipment to test\n  messageObj.thisWeapon = window.info[weaponType.value].weapons[dropWeapon.value].decos;\n  messageObj.theseCharms = getCharms(messageObj.skills, messageObj.skillInfo);\n  messageObj.armors = applyArmorFilter(messageObj.skills, messageObj.skillInfo, filterLimit);\n  const requires = {};\n  for (const [armorType, theseArmors] of Object.entries(messageObj.armors)) {\n    for (const [armorIndex, thisArmor] of Object.entries(theseArmors)) {\n      // Locates and stores the index of any pieces containing a set bonus skill that was used\n      if (!thisArmor.setBonus || !messageObj.skills[Object.keys(thisArmor.setBonus)[0]]) {\n        continue;\n      }\n      const skillName = Object.keys(thisArmor.setBonus)[0];\n      if (!requires[skillName]) requires[skillName] = [];\n      requires[skillName].push(armorType, +armorIndex, thisArmor.setBonus[skillName] * -1);\n    }\n  }\n  const a = {\n    helm: -1,\n    chest: 0,\n    arm: 0,\n    waist: 0,\n    leg: 0,\n    workers: 0\n  };\n  const divideBuilds = maxArmorPieces => {\n    // fill array with minimal space to iterate a set amount times\n    const pass = Object.keys(requires).length;\n    loop: while (true) {\n      iterator: {\n        if (++a.helm < maxArmorPieces) break iterator;\n        a.helm = 0;\n        if (++a.chest < maxArmorPieces) break iterator;\n        a.chest = 0;\n        if (++a.arm < maxArmorPieces) break iterator;\n        a.arm = 0;\n        if (++a.waist < maxArmorPieces) break iterator;\n        a.waist = 0;\n        if (++a.leg === maxArmorPieces) break;\n      }\n      if (pass) {\n        for (const skillName in requires) {\n          let temp = 0;\n          const thisSkill = requires[skillName];\n          let index = thisSkill.length - 1;\n          while (true) {\n            if (thisSkill[index - 1] === a[thisSkill[index - 2]]) {\n              temp += thisSkill[index];\n            }\n            if ((index -= 3) < 0) break;\n          }\n          if (messageObj.skills[skillName] < temp) {\n            continue loop;\n          }\n        }\n      }\n      armorPermutations.push([a.helm, a.chest, a.arm, a.waist, a.leg]);\n    }\n  };\n  divideBuilds(filterLimit);\n  for (const skillName in requires) {\n    delete messageObj.skills[skillName];\n  }\n  GlobalMap.clear();\n  workersPortion = armorPermutations.length / workers.length;\n  function sendBatch(worker) {\n    messageObj.permutations = armorPermutations.splice(0, workersPortion);\n    messageObj.keepSets = GlobalMap.size < 100;\n    worker.postMessage(messageObj);\n  }\n\n  for (const worker of workers) {\n    sendBatch(worker);\n  }\n  // after initiation reset globals/display loading message while wait for first results\n  resetGlobals();\n};\nlet testKeyCount = 0;\nlet armorCount = \"\";\ndocument.addEventListener(\"keypress\", e => {\n  if (!(e.key === [\"t\", \"e\", \"s\", \"t\"][Math.min(3, testKeyCount)] && ++testKeyCount < 3)) {\n    if (e.key === \"Enter\" && testKeyCount >= 3) {\n      testBuild(armorCount !== \"f\");\n      armorCount = \"\";\n      testKeyCount = 0;\n    } else if (/t|f/.test(e.key) && testKeyCount >= 3) {\n      armorCount = e.key;\n    } else if (testKeyCount < 3) {\n      testKeyCount = 0;\n    }\n  }\n});\n\nexport const testBuild = (buildFlag = true) => {\n  [\n    \"Dereliction\",\n    \"CriticalEye\",\n    \"CriticalBoost\",\n    \"MaximumMight\",\n    \"RecoilDown\",\n    \"ReloadSpeed\",\n    \"RapidFireUp\",\n    \"PierceUp\",\n    \"Burst\",\n    \"Agitator\",\n    \"AttackBoost\"\n  ].forEach(x => createSkillSelections(x, window.info.types.maxLevel[x]));\n  getSetBuilds(20);\n  return GlobalMap;\n  // div.classList.add(\"dropContainer\");\n};\nObject.values(document.querySelectorAll(\"#searchAgain, #startSearch\")).forEach(menu =>\n  menu.addEventListener(\"click\", () => getSetBuilds(12))\n);\ndocument.getElementById(\"normalSearch\").addEventListener(\"click\", () => getSetBuilds(12));\ndocument.getElementById(\"startSearch\").addEventListener(\"click\", () => getSetBuilds(12));\ndocument.getElementById(\"extendedSearch\").addEventListener(\"click\", () => {\n  getSetBuilds();\n});\n//////////////////////////////////////////////////////////\n////////////  Equip Build   /////////////////////////////\n/////////////////////////////////////////////////////////\ndocument.querySelector(\".grid\").addEventListener(\"mousedown\", e => {\n  if (e.target.tagName !== \"BUTTON\") {\n    return;\n  }\n  const parentIndex = Object.values(document.querySelectorAll(\"div.grid > div.setResult\")).indexOf(\n    e.target.parentElement\n  );\n  if (!GlobalMap.has(parentIndex)) return;\n  const build = GlobalMap.get(parentIndex)[e.target.parentElement.lastElementChild.selectedIndex];\n  const charm = {};\n  build.usedSkills.slice(-2).forEach(skill => {\n    charm[skill[0]] = skill[1];\n  });\n  equipBuild(build, charm);\n  const buildTest = {};\n  build.usedSkills.forEach(entry => {\n    const points = !entry[3] ? entry[1] : entry[1] * entry[3];\n    if (!buildTest[entry[0]]) {\n      buildTest[entry[0]] = points;\n    } else {\n      buildTest[entry[0]] += points;\n    }\n  });\n  // console.log({ build, charm, buildTest });\n  document.getElementById(\"setReturn\").classList.add(\"augInvis\");\n  dataCompile();\n  document.querySelectorAll(\".extraSkills>button\").forEach(x => x.remove());\n  document.querySelectorAll(\".grid>div\").forEach(x => x.remove());\n  GlobalMap.clear();\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(222);\n__webpack_require__(932);\n__webpack_require__(153);\nvar __webpack_exports__ = __webpack_require__(21);\n"],"names":["armorSelect","window","info","armor","armorType","armors","Object","entries","option","index","piece","name","document","getElementById","innerHTML","updateSelectedSkillsDisplay","selectedSkills","currentArmorSkills","sortedArmorSkills","sort","equippedSkillDisplay","querySelector","skillsString","value","selectedIndex","querySelectorAll","forEach","select","addEventListener","e","changeDropdownOptions","target","nextElementSibling","startValidation","previousElementSibling","values","children","x","disabled","type","parentElement","id","slice","validator","getArmorsDecoArrNSkillsObj","augmentEventHandler","temp","pass","performance","now","time","augments","console","log","i","options","textContent","includes","getArmor","filter","el","map","thisOutput","augSelect","selectedOptions","trim","length","previousSibling","quriousPoints","thisAugment","updateAugmentPointsRemaining","getRemainingPoints","newVal","def","Math","max","currentDisplayedElement","difference","Number","totalDefElement","checkArmorsDef","setAugmentAuto","augTypeDropdowns","dropdownPointer","augs","augment","augTypeDropdown","augmentDropdown","augType","aug","setAugmentDropdown","text","childElementCount","tagName","equipBuild","set","charm","theseArmors","usedSkills","usedSlots","skillArray","keys","charmSelects","j","setCharmsAvailableDecoSlots","setCharmSelects","armorName","armorStats","classList","contains","augmentTypeDropdown","decos","lvl","indexOf","setUsedDecorations","usedAugments","skillName","pointsPer","augmentType","timesUsed","level","push","getUsedDecoArr","undefined","skill1","skill2","decoArr","grade","min","setDecoDisplay","augmentDropdowns","augmentTypeDropdowns","match","armorTypes","thisArmor","augSkills","skills","augmentTypeSelects","augmentSelects","k","replace","points","minUpgrade","skillsObj","order","output","style","display","join","setArmorsDisplayedSkills","budget","elString","skill","skillOutputs","types","qurious","attackName","some","limit","cost","img","currentLevel","toggle","className","src","string","decoLevels","deco","decoName","decoPoints","currentValue","baseValue","pointsDisplay","dropWeapon","weaponType","dropMon","applyAllSkills","DullingStrike","power","stats","augPEM","eleType","augEFR","augPRM","AntiSpecies","species","monster","PRM","test","MagnamaloSoul","BR","ElementExploit","weaponRampage","weapons","rampageSlots","PEM","getEleHZ","lower","Bludgener","BRM","ChargeMaster","BEM","NoEleBuff","baseEle","Sharpness","sharpnessModifier","noSharpMod","JSON","parse","getRawHZ","MindsEye","BrutalStrike","getWeaponMR","aff","efrMulti","critBoost","Marksman","SneakAttack","NoSneak","HeavyBowGun","Bombardier","ChargeLevel","LightBowGun","Bow","getStats","BowCoating","LongSword","Helmbreaker","SerenePose","SpiritGauge","ChargeBlade","RapidMorph","SavageAxe","phialType","ImpactShieldCharge","EleShieldCharge","GreatSword","thisAttack","StrongarmStance","rawMV","SwitchAxe","Ranged","PierceUp","SpreadUp","NormalRapidUp","RapidFireUp","SpecialAmmoBoost","applySkills","lastEvent","comboTracker","dropHZ","dropQuest","weaponTypes","getArmorTypes","addSpaces","getGrade","a","b","async","Promise","all","resolve","then","monsterData","rampageData","typesData","skillsData","questData","armorData","LightBowGunData","ammoData","charmsData","mhriceData","rampage","quest","ammo","charms","populateDropDowns","classChange","rampageSelect","weaponSelect","concat","maxLevel","partSelect","healthSelect","monChart","dataCompile","data","option1","option2","lvl4","initCharms","fromEntries","localeCompare","catch","error","updateInfo","fileName","baseURL","location","href","lastIndexOf","fetch","json","importJson","valueToCheck","arr","count","event","updateOldDropdownSelectedIndex","rangedDamage","ammoFrameData","pass1","baseWeaponStats","getInitialStats","theseAttacks","getUsedAttacks","baseRaw","Draw","getDependantSkills","getRemainingSkills","damageCalculations","ticsAdjust","calculateAmmoFrames","totalEffective","efr","efe","totalCrit","rawCrit","eleCrit","totalNon","rawNon","eleNon","shotsToKill","toLocaleString","timeToKill","shotsPerMin","rawBoth","eleBoth","total","damage","shotsPerGain","ammoStats","toFixed","reloadSpeed","recoilSpeed","isNaN","clipSize","ticsPer","shotsPerMinBase","createTable","raw","BE","getCritBoost","Crit","getCritEle","EFR","EFE","splice","buildDamageTable","rangedDPS","runTimeStart","meleeDamage","comboDamage","thisIndex","comboHitsUsed","attackTypes","attack","getElementsByClassName","updateComboTracker","updateComboDisplay","hitsPerColorSharp","affinity","remainingSharp","comboHitsPerColor","width","getComboHitsAndSetSharpness","toString","sharpness","capital","hitsPerAttackPerSharpness","ele","currentDamage","regex","RegExp","shellingType","shellingLevel","Raw","getAttacks","Artillery","final","gunlanceShelling","meleeDPS","attackAug","affinityAug","elementalAug","rampageAug","sharpnessAug","augIndex","rank","checked","affinityAugVal","inc","baseAff","getRangedSkills","statsArr","getMeleeSkills","getEnrage","anger_data","getWeaknessExploit","WeaknessExploit","skillsUsebByType","uniqueSkill","pointsOf","split","thisInput","getDisplayedSkillsStats","Agitator","ArchdemonMode","DemonMode","FeralDemonMode","HerculesDraw","UpperCrit","comboHit","remove","createElement","setAttribute","append","getInitialSharpness","pointsFor","handicraft","quriousSharp","orange","red","startingIndex","shift","everyHitsAttackIndex","listOfEachAttack","comboMulti","listOfAllComboHits","purple","white","blue","green","yellow","maxHitsPerColor","totalSharp","razorSharp","RazorSharp","Sharp","MT","MastersTouch","mTBonus","sharpnessReduction","sharp","applySharpnessSkills","reverse","sharpnessCapacity","reduce","attackKeys","sharpnessIndex","colors","listOfAllAttacks","attackLoop","thisAttackIndex","thisAttackKey","ticsPerAttack","sharpUsedPerTick","getHitsPerTick","hitsOfSharp","canCrit","CriticalElement","CriticalBoost","rawFormula","prototype","hasOwnProperty","call","Ele","eleAmmo","eleFormula","eleMV","reduction","eleIcon","stat","myDamage","currentAmmoTableStyle","currentDamageTableStyle","inputs","myHeader","myBody","table","tHead","headerRow","tBody","headerText","header","textNode","Array","isArray","createTextNode","dataset","tooltip","appendChild","replaceWith","row","cell","adjuster","Max","Min","add","len","column","menu","letter","element","setSpawn","spawn","z","block","lot","headers","myTable","mon","parts","monPart","HZV","part","state","comboReset","Burst","BurstDualBlades","BurstBow","BurstBowGun","BurstStandard","BombardierSource","div","y","thisArr","coatings","thisCoating","thisOption","shotsPerTimeLimit","ammoIncrease","AmmoUp","recoil","BowgunBarrel","Silencer","recoilFrames","frames","reload","reloadFrames","isUsed","spareShot","SpareShot","shotsCheck","pierceTics","PierceEle","Pierce1","Pierce2","Pierce3","ceil","size","base_size","king_boarder","saveState","ugh","result","body","execCommand","removeChild","toClipboardNoFocus","stringify","card","str","weapon","markerCount","usableDecos","rampageDecos","rampDeco","Rampage","vals","rampSkill","keys2","dropDown","navigator","clipboard","readText","savedVal","initalData","createSkillSelections","getSetBuilds","damageType","attacks","regexp","usableKeys","totalKeys","baseCharge","bowShot","isRapidFire","usableAmmo","hitzone","modifier","hp","updateQuest","toUpperCase","toLowerCase","convertedRecoilFrames","convertedReloadFrames","maxTime","spareShotAccumulator","timeUsed","totalShots","Infinity","resetSkillDescription","theseOptions","newText","skillLvl","skillValues","thisSkill","statInc","brm","prm","applyRawDescription","bem","pem","applyEleDescription","applyDescription","description","blur","initialLevel","after","label","decButton","incButton","addPoints","skillLevel","getCurrentArmorSkills","getSelectedDecoSkills","pointsUsed","dataTransfer","setData","preventDefault","dropEffect","getData","before","MailofHellfire","MailofHellfireSource","Dereliction","DerelictionSource","defType","selector","curr","elements","sumInReverseOrder","descriptions","decreaseComboCount","increaseComboCount","augInc","thisAug","acc","quriousAugsInc","augDec","newTotal","quriousAugsDec","mrToggle","hrToggle","showMenu","input","toggleAmmoTables","code","newSkillsCache","totalCombos","timer","workers","workersPortion","workerCount","armorPermutations","GlobalMap","Map","GlobalFragment","totalSets","getUsedCharm","sets","charmSkills","getSetRequirements","skillInfo","filterLimit","terminate","Worker","worker","flag","sendBatch","combos","fragment","charmOptions","setResult","sum","has","get","receiveMessage","newSet","remainingSlots","quriousSkills","armorSkills","getMostSkills","extraSkills","buttons","setOutput","quriousCost","returnVal","pointsToMaxLevel","getTotal","messageObj","charmSlots","thisWeapon","theseCharms","charmList","every","skillPoints","newCombo","getCharms","maxArmorsPerType","retrieveArmorData","pointsForDecos","sex","thisPiece","newArmorObj","theseSkills","quriousTable","usedAug","decoAugments","pop","augArr","thisBonus","fodderSkills","fodderCount","thisArmorRating","setBonus","l","unBloatedPoints","armorRating","addArmorPiece","applyArmorFilter","requires","armorIndex","helm","chest","arm","waist","leg","maxArmorPieces","loop","divideBuilds","permutations","keepSets","postMessage","clear","testKeyCount","armorCount","key","testBuild","buildFlag","parentIndex","build","lastElementChild","buildTest","entry","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","o","defineProperty","enumerable","obj","prop"],"sourceRoot":""}